"use strict";var currentLogger,__spreadArray=this&&this.__spreadArray||function(t,r,e){if(e||2===arguments.length)for(var o,s=0,a=r.length;s<a;s++)!o&&s in r||((o=o||Array.prototype.slice.call(r,0,s))[s]=r[s]);return t.concat(o||Array.prototype.slice.call(r))},constants_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.critical=exports.error=exports.warn=exports.debug=exports.all=exports.info=exports.setLogger=exports.getLogger=exports.LoggerImp=void 0,require("./constants")),utils_1=require("./utils"),LoggerImp=function(){function t(t,r,e,o,s){void 0===t&&(t=constants_1.LOGGER_LEVELS.INFO),void 0===r&&(r=!0),void 0===e&&(e=!0),void 0===o&&(o=!1),void 0===s&&(s=constants_1.DEFAULT_TIMESTAMP_FORMAT),this.level=t,this.useTimestamp=r,this.logLevel=e,this.logStackTrace=o,this.timestampFormat=s}return t.prototype.buildMessage=function(t,r,e){void 0===e&&(e=void 0);for(var o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return t instanceof Error&&(t=t.message),this.logLevel&&(t="[".concat(Object.keys(constants_1.LOGGER_LEVELS)[r],"] - ").concat(t)),e&&(t="[".concat(e.toString(),"]").concat(t)),this.useTimestamp&&(t="[".concat((0,utils_1.formatDate)(new Date,this.timestampFormat),"]").concat(t)),utils_1.stringFormat.apply(void 0,__spreadArray([t],o,!1))},t.prototype.report=function(t,r,e){void 0===r&&(r=constants_1.LOGGER_LEVELS.INFO),void 0===e&&(e=void 0);for(var o,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];if(!(r<this.level)){switch(r){case constants_1.LOGGER_LEVELS.WARN:o=console.warn;break;case constants_1.LOGGER_LEVELS.ERROR:case constants_1.LOGGER_LEVELS.CRITICAL:o=console.error;break;case constants_1.LOGGER_LEVELS.INFO:case constants_1.LOGGER_LEVELS.DEBUG:case constants_1.LOGGER_LEVELS.ALL:default:o=console.log}o(this.buildMessage.apply(this,__spreadArray([t,r,e],s,!1))),t instanceof Error&&t.stack&&this.logStackTrace&&o(this.buildMessage("\n-- StackStrace:\n{0}",r,e,t.stack))}},t.prototype.info=function(t,r){void 0===r&&(r=void 0);for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];this.report.apply(this,__spreadArray([t,constants_1.LOGGER_LEVELS.INFO,r],e,!1))},t.prototype.all=function(t,r){void 0===r&&(r=void 0);for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];this.report.apply(this,__spreadArray([t,constants_1.LOGGER_LEVELS.ALL,r],e,!1))},t.prototype.debug=function(t,r){void 0===r&&(r=void 0);for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];this.report.apply(this,__spreadArray([t,constants_1.LOGGER_LEVELS.DEBUG,r],e,!1))},t.prototype.warn=function(t,r){void 0===r&&(r=void 0);for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];this.report.apply(this,__spreadArray([t,constants_1.LOGGER_LEVELS.WARN,r],e,!1))},t.prototype.error=function(t,r){void 0===r&&(r=void 0);for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];this.report.apply(this,__spreadArray([t,constants_1.LOGGER_LEVELS.ERROR,r],e,!1))},t.prototype.critical=function(t,r){void 0===r&&(r=void 0);for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];this.report.apply(this,__spreadArray([t,constants_1.LOGGER_LEVELS.CRITICAL,r],e,!1))},t.prototype.setLevel=function(t){this.debug((0,utils_1.stringFormat)(constants_1.LOGGING_MSG.LEVEL_CHANGED,this.level.toString(),t.toString())),this.level=t},t}();function getLogger(){return currentLogger=currentLogger||new LoggerImp}function setLogger(t){currentLogger=t,getLogger().debug(constants_1.LOGGING_MSG.LOGGER_CHANGED)}exports.LoggerImp=LoggerImp,exports.getLogger=getLogger,exports.setLogger=setLogger;var info=function(t){for(var r,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];(r=getLogger()).info.apply(r,__spreadArray([t,this],e,!1))},all=(exports.info=info,function(t){for(var r,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];(r=getLogger()).all.apply(r,__spreadArray([t,this],e,!1))}),debug=(exports.all=all,function(t){for(var r,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];(r=getLogger()).debug.apply(r,__spreadArray([t,this],e,!1))}),warn=(exports.debug=debug,function(t){for(var r,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];(r=getLogger()).warn.apply(r,__spreadArray([t,this],e,!1))}),error=(exports.warn=warn,function(t){for(var r,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];(r=getLogger()).error.apply(r,__spreadArray([t,this],e,!1))}),critical=(exports.error=error,function(t){for(var r,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];(r=getLogger()).critical.apply(r,__spreadArray([t,this],e,!1))});exports.critical=critical;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2dpbmcvbG9nZ2luZy5qcyIsImxvZ2dpbmcvbG9nZ2luZy50cyJdLCJuYW1lcyI6WyJjdXJyZW50TG9nZ2VyIiwiX19zcHJlYWRBcnJheSIsInRoaXMiLCJ0byIsImZyb20iLCJwYWNrIiwibGVuZ3RoIiwiaSIsImwiLCJhciIsImFyZ3VtZW50cyIsIkFycmF5IiwicHJvdG90eXBlIiwic2xpY2UiLCJjYWxsIiwiY29uY2F0IiwiY29uc3RhbnRzXzEiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNyaXRpY2FsIiwiZXJyb3IiLCJ3YXJuIiwiZGVidWciLCJhbGwiLCJpbmZvIiwic2V0TG9nZ2VyIiwiZ2V0TG9nZ2VyIiwiTG9nZ2VySW1wIiwicmVxdWlyZSIsInV0aWxzXzEiLCJkZWZhdWx0TGV2ZWwiLCJ1c2VUaW1lc3RhbXAiLCJsb2dMZXZlbCIsImxvZ1N0YWNrVHJhY2UiLCJ0aW1lc3RhbXBGb3JtYXQiLCJMT0dHRVJfTEVWRUxTIiwiSU5GTyIsIkRFRkFVTFRfVElNRVNUQU1QX0ZPUk1BVCIsImxldmVsIiwiYnVpbGRNZXNzYWdlIiwibWVzc2FnZSIsImlzc3VlciIsInVuZGVmaW5lZCIsImFyZ3MiLCJfaSIsIkVycm9yIiwia2V5cyIsInRvU3RyaW5nIiwiZm9ybWF0RGF0ZSIsIkRhdGUiLCJzdHJpbmdGb3JtYXQiLCJhcHBseSIsInJlcG9ydCIsInJlcG9ydE1ldGhvZCIsIldBUk4iLCJjb25zb2xlIiwiRVJST1IiLCJDUklUSUNBTCIsIkRFQlVHIiwiQUxMIiwibG9nIiwic3RhY2siLCJzZXRMZXZlbCIsIkxPR0dJTkdfTVNHIiwiTEVWRUxfQ0hBTkdFRCIsImxvZ2dlciIsIkxPR0dFUl9DSEFOR0VEIiwiX2EiXSwibWFwcGluZ3MiOiJhQUNBLElDbU5JQSxjRG5OQUMsY0FBaUJDLE1BQVFBLEtBQUtELGVBQWtCLFNBQVVFLEVBQUlDLEVBQU1DLEdBQXBFSixHQUFBQSxHQUE4QkEsSUFBOUJBLFVBQWlC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LFNBQW9CbUIsR0FsR3JDYixJQU5BLElBQUF3QyxFQXdHNkR4QixFQUFBLEdBQUFDLEVBQUEsRUFBQUEsRUFBQXBDLFVBQUFKLE9BQUF3QyxJQUFBRCxFQUFBQyxFQUFBLEdBQUFwQyxVQUFBb0MsSUFDN0R1QixFQUFBekMsYUFBWU4sTUFBSytCLE1BQUFnQixFQUFBcEUsY0FBQSxDQUFDeUMsRUFBU3hDLE1BQVMyQyxHQUFJLE1BVy9CeEIsVUFaQUYsUUFBQUcsTUFBS0EsTUFZTSxTQUFvQm9CLEdEaE1uQyxJQUZELElBQUEyQixFQ2tNNER4QixFQUFBLEdBQUFDLEVBQUEsRUFBQUEsRUFBQXBDLFVBQUFKLE9BQUF3QyxJQUFBRCxFQUFBQyxFQUFBLEdBQUFwQyxVQUFBb0MsSUFDaEV1QixFQUFBekMsYUFBWVAsU0FBUWdDLE1BQUFnQixFQUFBcEUsY0FBQSxDQUFDeUMsRUFBU3hDLE1BQVMyQyxHQUFJLE1BRGxDMUIsUUFBQUUsU0FBUUEiLCJmaWxlIjoibG9nZ2luZy9sb2dnaW5nLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSwgcGFjaykge1xuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jcml0aWNhbCA9IGV4cG9ydHMuZXJyb3IgPSBleHBvcnRzLndhcm4gPSBleHBvcnRzLmRlYnVnID0gZXhwb3J0cy5hbGwgPSBleHBvcnRzLmluZm8gPSBleHBvcnRzLnNldExvZ2dlciA9IGV4cG9ydHMuZ2V0TG9nZ2VyID0gZXhwb3J0cy5Mb2dnZXJJbXAgPSB2b2lkIDA7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG52YXIgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xudmFyIExvZ2dlckltcCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTG9nZ2VySW1wKGRlZmF1bHRMZXZlbCwgdXNlVGltZXN0YW1wLCBsb2dMZXZlbCwgbG9nU3RhY2tUcmFjZSwgdGltZXN0YW1wRm9ybWF0KSB7XG4gICAgICAgIGlmIChkZWZhdWx0TGV2ZWwgPT09IHZvaWQgMCkgeyBkZWZhdWx0TGV2ZWwgPSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLklORk87IH1cbiAgICAgICAgaWYgKHVzZVRpbWVzdGFtcCA9PT0gdm9pZCAwKSB7IHVzZVRpbWVzdGFtcCA9IHRydWU7IH1cbiAgICAgICAgaWYgKGxvZ0xldmVsID09PSB2b2lkIDApIHsgbG9nTGV2ZWwgPSB0cnVlOyB9XG4gICAgICAgIGlmIChsb2dTdGFja1RyYWNlID09PSB2b2lkIDApIHsgbG9nU3RhY2tUcmFjZSA9IGZhbHNlOyB9XG4gICAgICAgIGlmICh0aW1lc3RhbXBGb3JtYXQgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXBGb3JtYXQgPSBjb25zdGFudHNfMS5ERUZBVUxUX1RJTUVTVEFNUF9GT1JNQVQ7IH1cbiAgICAgICAgdGhpcy5sZXZlbCA9IGRlZmF1bHRMZXZlbDtcbiAgICAgICAgdGhpcy51c2VUaW1lc3RhbXAgPSB1c2VUaW1lc3RhbXA7XG4gICAgICAgIHRoaXMubG9nTGV2ZWwgPSBsb2dMZXZlbDtcbiAgICAgICAgdGhpcy5sb2dTdGFja1RyYWNlID0gbG9nU3RhY2tUcmFjZTtcbiAgICAgICAgdGhpcy50aW1lc3RhbXBGb3JtYXQgPSB0aW1lc3RhbXBGb3JtYXQ7XG4gICAgfVxuICAgIExvZ2dlckltcC5wcm90b3R5cGUuYnVpbGRNZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UsIGxvZ0xldmVsLCBpc3N1ZXIpIHtcbiAgICAgICAgaWYgKGlzc3VlciA9PT0gdm9pZCAwKSB7IGlzc3VlciA9IHVuZGVmaW5lZDsgfVxuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDNdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEVycm9yKVxuICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UubWVzc2FnZTtcbiAgICAgICAgaWYgKHRoaXMubG9nTGV2ZWwpXG4gICAgICAgICAgICBtZXNzYWdlID0gXCJbXCIuY29uY2F0KE9iamVjdC5rZXlzKGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMpW2xvZ0xldmVsXSwgXCJdIC0gXCIpLmNvbmNhdChtZXNzYWdlKTtcbiAgICAgICAgaWYgKGlzc3VlcilcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBcIltcIi5jb25jYXQoaXNzdWVyLnRvU3RyaW5nKCksIFwiXVwiKS5jb25jYXQobWVzc2FnZSk7XG4gICAgICAgIGlmICh0aGlzLnVzZVRpbWVzdGFtcClcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBcIltcIi5jb25jYXQoKDAsIHV0aWxzXzEuZm9ybWF0RGF0ZSkobmV3IERhdGUoKSwgdGhpcy50aW1lc3RhbXBGb3JtYXQpLCBcIl1cIikuY29uY2F0KG1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4gdXRpbHNfMS5zdHJpbmdGb3JtYXQuYXBwbHkodm9pZCAwLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlXSwgYXJncywgZmFsc2UpKTtcbiAgICB9O1xuICAgIExvZ2dlckltcC5wcm90b3R5cGUucmVwb3J0ID0gZnVuY3Rpb24gKG1lc3NhZ2UsIGxldmVsLCBpc3N1ZXIpIHtcbiAgICAgICAgaWYgKGxldmVsID09PSB2b2lkIDApIHsgbGV2ZWwgPSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLklORk87IH1cbiAgICAgICAgaWYgKGlzc3VlciA9PT0gdm9pZCAwKSB7IGlzc3VlciA9IHVuZGVmaW5lZDsgfVxuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDNdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGV2ZWwgPCB0aGlzLmxldmVsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgcmVwb3J0TWV0aG9kO1xuICAgICAgICBzd2l0Y2ggKGxldmVsKSB7XG4gICAgICAgICAgICBjYXNlIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuV0FSTjpcbiAgICAgICAgICAgICAgICByZXBvcnRNZXRob2QgPSBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuRVJST1I6XG4gICAgICAgICAgICBjYXNlIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuQ1JJVElDQUw6XG4gICAgICAgICAgICAgICAgcmVwb3J0TWV0aG9kID0gY29uc29sZS5lcnJvcjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5JTkZPOlxuICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkRFQlVHOlxuICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkFMTDpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmVwb3J0TWV0aG9kID0gY29uc29sZS5sb2c7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZpbmFsTWVzc2FnZSA9IHRoaXMuYnVpbGRNZXNzYWdlLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIGxldmVsLCBpc3N1ZXJdLCBhcmdzLCBmYWxzZSkpO1xuICAgICAgICByZXBvcnRNZXRob2QoZmluYWxNZXNzYWdlKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvciAmJiBtZXNzYWdlLnN0YWNrICYmIHRoaXMubG9nU3RhY2tUcmFjZSlcbiAgICAgICAgICAgIHJlcG9ydE1ldGhvZCh0aGlzLmJ1aWxkTWVzc2FnZShcIlxcbi0tIFN0YWNrU3RyYWNlOlxcbnswfVwiLCBsZXZlbCwgaXNzdWVyLCBtZXNzYWdlLnN0YWNrKSk7XG4gICAgfTtcbiAgICBMb2dnZXJJbXAucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAobWVzc2FnZSwgaXNzdWVyKSB7XG4gICAgICAgIGlmIChpc3N1ZXIgPT09IHZvaWQgMCkgeyBpc3N1ZXIgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXBvcnQuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheShbbWVzc2FnZSwgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5JTkZPLCBpc3N1ZXJdLCBhcmdzLCBmYWxzZSkpO1xuICAgIH07XG4gICAgTG9nZ2VySW1wLnByb3RvdHlwZS5hbGwgPSBmdW5jdGlvbiAobWVzc2FnZSwgaXNzdWVyKSB7XG4gICAgICAgIGlmIChpc3N1ZXIgPT09IHZvaWQgMCkgeyBpc3N1ZXIgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXBvcnQuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheShbbWVzc2FnZSwgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5BTEwsIGlzc3Vlcl0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgfTtcbiAgICBMb2dnZXJJbXAucHJvdG90eXBlLmRlYnVnID0gZnVuY3Rpb24gKG1lc3NhZ2UsIGlzc3Vlcikge1xuICAgICAgICBpZiAoaXNzdWVyID09PSB2b2lkIDApIHsgaXNzdWVyID0gdW5kZWZpbmVkOyB9XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVwb3J0LmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuREVCVUcsIGlzc3Vlcl0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgfTtcbiAgICBMb2dnZXJJbXAucHJvdG90eXBlLndhcm4gPSBmdW5jdGlvbiAobWVzc2FnZSwgaXNzdWVyKSB7XG4gICAgICAgIGlmIChpc3N1ZXIgPT09IHZvaWQgMCkgeyBpc3N1ZXIgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXBvcnQuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheShbbWVzc2FnZSwgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5XQVJOLCBpc3N1ZXJdLCBhcmdzLCBmYWxzZSkpO1xuICAgIH07XG4gICAgTG9nZ2VySW1wLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlLCBpc3N1ZXIpIHtcbiAgICAgICAgaWYgKGlzc3VlciA9PT0gdm9pZCAwKSB7IGlzc3VlciA9IHVuZGVmaW5lZDsgfVxuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcG9ydC5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkVSUk9SLCBpc3N1ZXJdLCBhcmdzLCBmYWxzZSkpO1xuICAgIH07XG4gICAgTG9nZ2VySW1wLnByb3RvdHlwZS5jcml0aWNhbCA9IGZ1bmN0aW9uIChtZXNzYWdlLCBpc3N1ZXIpIHtcbiAgICAgICAgaWYgKGlzc3VlciA9PT0gdm9pZCAwKSB7IGlzc3VlciA9IHVuZGVmaW5lZDsgfVxuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcG9ydC5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkNSSVRJQ0FMLCBpc3N1ZXJdLCBhcmdzLCBmYWxzZSkpO1xuICAgIH07XG4gICAgTG9nZ2VySW1wLnByb3RvdHlwZS5zZXRMZXZlbCA9IGZ1bmN0aW9uIChsZXZlbCkge1xuICAgICAgICB0aGlzLmRlYnVnKCgwLCB1dGlsc18xLnN0cmluZ0Zvcm1hdCkoY29uc3RhbnRzXzEuTE9HR0lOR19NU0cuTEVWRUxfQ0hBTkdFRCwgdGhpcy5sZXZlbC50b1N0cmluZygpLCBsZXZlbC50b1N0cmluZygpKSk7XG4gICAgICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcbiAgICB9O1xuICAgIHJldHVybiBMb2dnZXJJbXA7XG59KCkpO1xuZXhwb3J0cy5Mb2dnZXJJbXAgPSBMb2dnZXJJbXA7XG52YXIgY3VycmVudExvZ2dlcjtcbmZ1bmN0aW9uIGdldExvZ2dlcigpIHtcbiAgICBpZiAoIWN1cnJlbnRMb2dnZXIpXG4gICAgICAgIGN1cnJlbnRMb2dnZXIgPSBuZXcgTG9nZ2VySW1wKCk7XG4gICAgcmV0dXJuIGN1cnJlbnRMb2dnZXI7XG59XG5leHBvcnRzLmdldExvZ2dlciA9IGdldExvZ2dlcjtcbmZ1bmN0aW9uIHNldExvZ2dlcihsb2dnZXIpIHtcbiAgICBjdXJyZW50TG9nZ2VyID0gbG9nZ2VyO1xuICAgIGdldExvZ2dlcigpLmRlYnVnKGNvbnN0YW50c18xLkxPR0dJTkdfTVNHLkxPR0dFUl9DSEFOR0VEKTtcbn1cbmV4cG9ydHMuc2V0TG9nZ2VyID0gc2V0TG9nZ2VyO1xudmFyIGluZm8gPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHZhciBfYTtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIChfYSA9IGdldExvZ2dlcigpKS5pbmZvLmFwcGx5KF9hLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCB0aGlzXSwgYXJncywgZmFsc2UpKTtcbn07XG5leHBvcnRzLmluZm8gPSBpbmZvO1xudmFyIGFsbCA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgdmFyIF9hO1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgKF9hID0gZ2V0TG9nZ2VyKCkpLmFsbC5hcHBseShfYSwgX19zcHJlYWRBcnJheShbbWVzc2FnZSwgdGhpc10sIGFyZ3MsIGZhbHNlKSk7XG59O1xuZXhwb3J0cy5hbGwgPSBhbGw7XG52YXIgZGVidWcgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHZhciBfYTtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIChfYSA9IGdldExvZ2dlcigpKS5kZWJ1Zy5hcHBseShfYSwgX19zcHJlYWRBcnJheShbbWVzc2FnZSwgdGhpc10sIGFyZ3MsIGZhbHNlKSk7XG59O1xuZXhwb3J0cy5kZWJ1ZyA9IGRlYnVnO1xudmFyIHdhcm4gPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHZhciBfYTtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIChfYSA9IGdldExvZ2dlcigpKS53YXJuLmFwcGx5KF9hLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCB0aGlzXSwgYXJncywgZmFsc2UpKTtcbn07XG5leHBvcnRzLndhcm4gPSB3YXJuO1xudmFyIGVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICB2YXIgX2E7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICAoX2EgPSBnZXRMb2dnZXIoKSkuZXJyb3IuYXBwbHkoX2EsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIHRoaXNdLCBhcmdzLCBmYWxzZSkpO1xufTtcbmV4cG9ydHMuZXJyb3IgPSBlcnJvcjtcbnZhciBjcml0aWNhbCA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgdmFyIF9hO1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgKF9hID0gZ2V0TG9nZ2VyKCkpLmNyaXRpY2FsLmFwcGx5KF9hLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCB0aGlzXSwgYXJncywgZmFsc2UpKTtcbn07XG5leHBvcnRzLmNyaXRpY2FsID0gY3JpdGljYWw7IiwiaW1wb3J0IHtERUZBVUxUX1RJTUVTVEFNUF9GT1JNQVQsIExPR0dFUl9MRVZFTFMsIExPR0dJTkdfTVNHfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcbmltcG9ydCB7Zm9ybWF0RGF0ZSwgc3RyaW5nRm9ybWF0fSBmcm9tIFwiLi91dGlsc1wiO1xuXG4vKipcbiAqIEB0eXBlZGVmIExvZ2dlck1lc3NhZ2VcbiAqIEBtZW1iZXJPZiBsb2dnaW5nLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IHR5cGUgTG9nZ2VyTWVzc2FnZSA9IEVycm9yIHwgc3RyaW5nO1xuXG4vKipcbiAqIEBpbnRlcmZhY2UgTG9nZ2VyXG4gKiBAbWVtYmVyT2YgbG9nZ2luZy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTG9nZ2VyIHtcbiAgICAvKipcbiAgICAgKiBSZXBvcnRzIGEgbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZXZlbFxuICAgICAqIEBwYXJhbSB7YW55fSBbaXNzdWVyXSB0aGUgT2JqZWN0L3Byb2Nlc3MgdGhhdCByZXBvcnRzIHRoZSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHthbnlbXX0gW2FyZ3NdXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgTG9nZ2VyXG4gICAgICovXG4gICAgcmVwb3J0KG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGxldmVsOiBudW1iZXIsIGlzc3VlcjogYW55LCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG4gICAgLyoqXG4gICAgICoge0BsaW5rIExvZ2dlciNyZXBvcnR9cyBhIG1lc3NhZ2UgdW5kZXIge0BsaW5rIExPR0dFUl9MRVZFTFMuQUxMfVxuICAgICAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICAgICAqXG4gICAgICogQG1lbWJlck9mIExvZ2dlclxuICAgICAqL1xuICAgIGFsbChtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG4gICAgLyoqXG4gICAgICoge0BsaW5rIExvZ2dlciNyZXBvcnR9cyBhIG1lc3NhZ2UgdW5kZXIge0BsaW5rIExPR0dFUl9MRVZFTFMuSU5GT31cbiAgICAgKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBMb2dnZXJcbiAgICAgKi9cbiAgICBpbmZvKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKTogdm9pZDtcbiAgICAvKipcbiAgICAgKiB7QGxpbmsgTG9nZ2VyI3JlcG9ydH1zIGEgbWVzc2FnZSB1bmRlciB7QGxpbmsgTE9HR0VSX0xFVkVMUy5ERUJVR31cbiAgICAgKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBMb2dnZXJcbiAgICAgKi9cbiAgICBkZWJ1ZyhtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG4gICAgLyoqXG4gICAgICoge0BsaW5rIExvZ2dlciNyZXBvcnR9cyBhIG1lc3NhZ2UgdW5kZXIge0BsaW5rIExPR0dFUl9MRVZFTFMuV0FSTn1cbiAgICAgKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBMb2dnZXJcbiAgICAgKi9cbiAgICB3YXJuKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKTogdm9pZDtcbiAgICAvKipcbiAgICAgKiB7QGxpbmsgTG9nZ2VyI3JlcG9ydH1zIGEgbWVzc2FnZSB1bmRlciB7QGxpbmsgTE9HR0VSX0xFVkVMUy5FUlJPUn1cbiAgICAgKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBMb2dnZXJcbiAgICAgKi9cbiAgICBlcnJvcihtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG4gICAgLyoqXG4gICAgICoge0BsaW5rIExvZ2dlciNyZXBvcnR9cyBhIG1lc3NhZ2UgdW5kZXIge0BsaW5rIExPR0dFUl9MRVZFTFMuQ1JJVElDQUx9XG4gICAgICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHthbnlbXX0gW2FyZ3NdXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgTG9nZ2VyXG4gICAgICovXG4gICAgY3JpdGljYWwobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pOiB2b2lkO1xuICAgIC8qKlxuICAgICAqIERlZmluZXMgdGhlIExvZ2dlciBsZXZlbFxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxldmVsXG4gICAgICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICAgICAqXG4gICAgICogQG1lbWJlck9mIExvZ2dlclxuICAgICAqL1xuICAgIHNldExldmVsKGxldmVsOiBudW1iZXIsIC4uLmFyZ3M6IGFueVtdKTogdm9pZDtcbn1cblxuLyoqXG4gKiBEZWZhdWx0IExvZ2dlciBJbXBsZW1lbnRhdGlvblxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWZhdWx0TGV2ZWwgZGVmYXVsdHMgdG8ge0BsaW5rIExPR0dFUl9MRVZFTFMuSU5GT31cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlVGltZXN0YW1wIGRlZmF1bHRzIHRvIHRydWVcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gbG9nTGV2ZWxcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gbG9nU3RhY2tUcmFjZVxuICogQHBhcmFtIHtzdHJpbmd9IHRpbWVzdGFtcEZvcm1hdFxuICpcbiAqIEBjbGFzcyBMb2dnZXJJbXBcbiAqIEBpbXBsZW1lbnRzIExvZ2dlclxuICovXG5leHBvcnQgY2xhc3MgTG9nZ2VySW1wIGltcGxlbWVudHMgTG9nZ2VyIHtcbiAgICBwcml2YXRlIGxldmVsOiBudW1iZXI7XG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IHVzZVRpbWVzdGFtcDogYm9vbGVhbjtcbiAgICBwcml2YXRlIHJlYWRvbmx5IGxvZ0xldmVsOiBib29sZWFuO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgdGltZXN0YW1wRm9ybWF0OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSByZWFkb25seSBsb2dTdGFja1RyYWNlOiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IoZGVmYXVsdExldmVsOiBudW1iZXIgPSBMT0dHRVJfTEVWRUxTLklORk8sIHVzZVRpbWVzdGFtcCA9IHRydWUsIGxvZ0xldmVsOiBib29sZWFuID0gdHJ1ZSwgbG9nU3RhY2tUcmFjZTogYm9vbGVhbiA9IGZhbHNlLCB0aW1lc3RhbXBGb3JtYXQgPSBERUZBVUxUX1RJTUVTVEFNUF9GT1JNQVQpe1xuICAgICAgICB0aGlzLmxldmVsID0gZGVmYXVsdExldmVsO1xuICAgICAgICB0aGlzLnVzZVRpbWVzdGFtcCA9IHVzZVRpbWVzdGFtcDtcbiAgICAgICAgdGhpcy5sb2dMZXZlbCA9IGxvZ0xldmVsO1xuICAgICAgICB0aGlzLmxvZ1N0YWNrVHJhY2UgPSBsb2dTdGFja1RyYWNlO1xuICAgICAgICB0aGlzLnRpbWVzdGFtcEZvcm1hdCA9IHRpbWVzdGFtcEZvcm1hdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCdWlsdHMgdGhlIGFjdHVhbCBsb2dnaW5nIG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbG9nTGV2ZWwgaWYgdGhlIGxldmVsIGlzIHRvIGJlIGxvZ2dlZFxuICAgICAqIEBwYXJhbSB7YW55fSBpc3N1ZXIgd2hvIGlzIGxvZ2dpbmcgdGhlIG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBhcmdzXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHByb3RlY3RlZCBidWlsZE1lc3NhZ2UobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgbG9nTGV2ZWw6IG51bWJlciwgaXNzdWVyOiBhbnkgPSB1bmRlZmluZWQsIC4uLmFyZ3M6IGFueVtdKXtcbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvcilcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlLm1lc3NhZ2U7XG5cbiAgICAgICAgaWYgKHRoaXMubG9nTGV2ZWwpXG4gICAgICAgICAgICBtZXNzYWdlID0gYFske09iamVjdC5rZXlzKExPR0dFUl9MRVZFTFMpW2xvZ0xldmVsXX1dIC0gJHttZXNzYWdlfWA7XG4gICAgICAgIGlmIChpc3N1ZXIpXG4gICAgICAgICAgICBtZXNzYWdlID0gYFske2lzc3Vlci50b1N0cmluZygpfV0ke21lc3NhZ2V9YDtcbiAgICAgICAgaWYgKHRoaXMudXNlVGltZXN0YW1wKVxuICAgICAgICAgICAgbWVzc2FnZSA9IGBbJHtmb3JtYXREYXRlKG5ldyBEYXRlKCksIHRoaXMudGltZXN0YW1wRm9ybWF0KX1dJHttZXNzYWdlfWA7XG4gICAgICAgIHJldHVybiBzdHJpbmdGb3JtYXQobWVzc2FnZSwgLi4uYXJncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGV2ZWwgZGVmYXVsdHMgdG8ge0BsaW5rIExPR0dFUl9MRVZFTFMuSU5GT31cbiAgICAgKiBAcGFyYW0ge2FueX0gW2lzc3Vlcl0gdGhlIG9iamVjdCB0aGF0IGlzIGNhbGxpbmcgdGhlIHJlcG9ydCBtZXRob2RcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBbYXJnc10gdmFsdWVzIHRvIHJlcGxhY2UgaW4gdGhlIG1lc3NhZ2UgYWNjb3JkaW5nIHRvIHRoZSAnezB9JyBub3RhdGlvblxuICAgICAqL1xuICAgIHJlcG9ydChtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBsZXZlbDogbnVtYmVyID0gTE9HR0VSX0xFVkVMUy5JTkZPLCBpc3N1ZXI6IGFueSA9IHVuZGVmaW5lZCwgLi4uYXJnczogYW55W10pIDogdm9pZCB7XG4gICAgICAgIGlmIChsZXZlbCA8IHRoaXMubGV2ZWwpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgbGV0IHJlcG9ydE1ldGhvZDogRnVuY3Rpb247XG4gICAgICAgIHN3aXRjaCAobGV2ZWwpe1xuICAgICAgICAgICAgY2FzZSBMT0dHRVJfTEVWRUxTLldBUk46XG4gICAgICAgICAgICAgICAgcmVwb3J0TWV0aG9kID0gY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBMT0dHRVJfTEVWRUxTLkVSUk9SOlxuICAgICAgICAgICAgY2FzZSBMT0dHRVJfTEVWRUxTLkNSSVRJQ0FMOlxuICAgICAgICAgICAgICAgIHJlcG9ydE1ldGhvZCA9IGNvbnNvbGUuZXJyb3I7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIExPR0dFUl9MRVZFTFMuSU5GTzpcbiAgICAgICAgICAgIGNhc2UgTE9HR0VSX0xFVkVMUy5ERUJVRzpcbiAgICAgICAgICAgIGNhc2UgTE9HR0VSX0xFVkVMUy5BTEw6XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJlcG9ydE1ldGhvZCA9IGNvbnNvbGUubG9nO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGZpbmFsTWVzc2FnZSA9IHRoaXMuYnVpbGRNZXNzYWdlKG1lc3NhZ2UsIGxldmVsLCBpc3N1ZXIsIC4uLmFyZ3MpO1xuICAgICAgICByZXBvcnRNZXRob2QoZmluYWxNZXNzYWdlKTtcblxuICAgICAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEVycm9yICYmIG1lc3NhZ2Uuc3RhY2sgJiYgdGhpcy5sb2dTdGFja1RyYWNlKVxuICAgICAgICAgICAgcmVwb3J0TWV0aG9kKHRoaXMuYnVpbGRNZXNzYWdlKGBcXG4tLSBTdGFja1N0cmFjZTpcXG57MH1gLCBsZXZlbCwgaXNzdWVyLCBtZXNzYWdlLnN0YWNrKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICBpbmZvKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGlzc3VlcjogYW55ID0gdW5kZWZpbmVkLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlcG9ydChtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLklORk8sIGlzc3VlciwgLi4uYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgYWxsKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGlzc3VlcjogYW55ID0gdW5kZWZpbmVkLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlcG9ydChtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLkFMTCwgaXNzdWVyLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICBkZWJ1ZyhtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBpc3N1ZXI6IGFueSA9IHVuZGVmaW5lZCwgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXBvcnQobWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5ERUJVRywgaXNzdWVyLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICB3YXJuKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGlzc3VlcjogYW55ID0gdW5kZWZpbmVkLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlcG9ydChtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLldBUk4sIGlzc3VlciwgLi4uYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgZXJyb3IobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgaXNzdWVyOiBhbnkgPSB1bmRlZmluZWQsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVwb3J0KG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuRVJST1IsIGlzc3VlciwgLi4uYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgY3JpdGljYWwobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgaXNzdWVyOiBhbnkgPSB1bmRlZmluZWQsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVwb3J0KG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuQ1JJVElDQUwsIGlzc3VlciwgLi4uYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgc2V0TGV2ZWwobGV2ZWw6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLmRlYnVnKHN0cmluZ0Zvcm1hdChMT0dHSU5HX01TRy5MRVZFTF9DSEFOR0VELCB0aGlzLmxldmVsLnRvU3RyaW5nKCksIGxldmVsLnRvU3RyaW5nKCkpKTtcbiAgICAgICAgdGhpcy5sZXZlbCA9IGxldmVsO1xuICAgIH1cbn1cblxubGV0IGN1cnJlbnRMb2dnZXI6IExvZ2dlcjtcblxuLyoqXG4gKiBnZXRzIHRoZSBjdXJyZW50IExvZ2dlclxuICpcbiAqIEBmdW5jdGlvbiBnZXRMb2dnZXJcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2dnZXIoKXtcbiAgICBpZiAoIWN1cnJlbnRMb2dnZXIpXG4gICAgICAgIGN1cnJlbnRMb2dnZXIgPSBuZXcgTG9nZ2VySW1wKCk7XG4gICAgcmV0dXJuIGN1cnJlbnRMb2dnZXI7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgbG9nZ2VyXG4gKlxuICogQHBhcmFtIHtMb2dnZXJ9IGxvZ2dlclxuICpcbiAqIEBmdW5jdGlvbiBzZXRMb2dnZXJcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRMb2dnZXIobG9nZ2VyOiBMb2dnZXIpe1xuICAgIGN1cnJlbnRMb2dnZXIgPSBsb2dnZXI7XG4gICAgZ2V0TG9nZ2VyKCkuZGVidWcoTE9HR0lOR19NU0cuTE9HR0VSX0NIQU5HRUQpO1xufVxuXG4vKipcbiAqIFJlcG9ydHMgYSBtZXNzYWdlIHRvIHRoZSBsb2dnZXIgdW5kZXIgdGhlIGxldmVsIHtAbGluayBMT0dHRVJfTEVWRUxTLklORk99XG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAqXG4gKiBAZnVuY3Rpb24gaW5mb1xuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IGluZm8gPSBmdW5jdGlvbih0aGlzOiBhbnksIG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgZ2V0TG9nZ2VyKCkuaW5mbyhtZXNzYWdlLCB0aGlzLCAuLi5hcmdzKTtcbn1cbi8qKlxuICogUmVwb3J0cyBhIG1lc3NhZ2UgdG8gdGhlIGxvZ2dlciB1bmRlciB0aGUgbGV2ZWwge0BsaW5rIExPR0dFUl9MRVZFTFMuQUxMfVxuICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gKiBAcGFyYW0ge2FueVtdfSBhcmdzXG4gKlxuICogQGZ1bmN0aW9uIGFsbFxuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IGFsbCA9IGZ1bmN0aW9uKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pIHtcbiAgICBnZXRMb2dnZXIoKS5hbGwobWVzc2FnZSwgdGhpcywgLi4uYXJncyk7XG59XG4vKipcbiAqIFJlcG9ydHMgYSBtZXNzYWdlIHRvIHRoZSBsb2dnZXIgdW5kZXIgdGhlIGxldmVsIHtAbGluayBMT0dHRVJfTEVWRUxTLkRFQlVHfVxuICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gKiBAcGFyYW0ge2FueVtdfSBhcmdzXG4gKlxuICogQGZ1bmN0aW9uIGRlYnVnXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMubG9nZ2luZ1xuICovXG5leHBvcnQgY29uc3QgZGVidWcgPSBmdW5jdGlvbih0aGlzOiBhbnksIG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgZ2V0TG9nZ2VyKCkuZGVidWcobWVzc2FnZSwgdGhpcywgLi4uYXJncyk7XG59XG4vKipcbiAqIFJlcG9ydHMgYSBtZXNzYWdlIHRvIHRoZSBsb2dnZXIgdW5kZXIgdGhlIGxldmVsIHtAbGluayBMT0dHRVJfTEVWRUxTLldBUk59XG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAqXG4gKiBAZnVuY3Rpb24gd2FyblxuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IHdhcm4gPSBmdW5jdGlvbih0aGlzOiBhbnksIG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgZ2V0TG9nZ2VyKCkud2FybihtZXNzYWdlLCB0aGlzLCAuLi5hcmdzKTtcbn1cbi8qKlxuICogUmVwb3J0cyBhIG1lc3NhZ2UgdG8gdGhlIGxvZ2dlciB1bmRlciB0aGUgbGV2ZWwge0BsaW5rIExPR0dFUl9MRVZFTFMuRVJST1J9XG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAqXG4gKiBAZnVuY3Rpb24gZXJyb3JcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBjb25zdCBlcnJvciA9IGZ1bmN0aW9uKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pIHtcbiAgICBnZXRMb2dnZXIoKS5lcnJvcihtZXNzYWdlLCB0aGlzLCAuLi5hcmdzKTtcbn1cbi8qKlxuICogUmVwb3J0cyBhIG1lc3NhZ2UgdG8gdGhlIGxvZ2dlciB1bmRlciB0aGUgbGV2ZWwge0BsaW5rIExPR0dFUl9MRVZFTFMuQ1JJVElDQUx9XG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAqXG4gKiBAZnVuY3Rpb24gY3JpdGljYWxcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBjb25zdCBjcml0aWNhbCA9IGZ1bmN0aW9uKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pIHtcbiAgICBnZXRMb2dnZXIoKS5jcml0aWNhbChtZXNzYWdlLCB0aGlzLCAuLi5hcmdzKTtcbn0iXX0=
