"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(t,r,e,o){void 0===o&&(o=e),Object.defineProperty(t,o,{enumerable:!0,get:function(){return r[e]}})}:function(t,r,e,o){t[o=void 0===o?e:o]=r[e]}),__exportStar=this&&this.__exportStar||function(t,r){for(var e in t)"default"===e||Object.prototype.hasOwnProperty.call(r,e)||__createBinding(r,t,e)},__extends=(Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(require("./errors"),exports),__exportStar(require("./logging"),exports),this&&this.__extends||function(){var o=function(t,r){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=t}o(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}()),logging_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.CriticalError=exports.LoggedError=exports.criticalCallback=exports.errorCallback=exports.warningCallback=exports.infoCallback=exports.debugCallback=exports.allCallback=exports.loggedCallback=void 0,require("../logging"));function loggedCallback(t,r,e){e||(e=r,r=logging_1.LOGGER_LEVELS.INFO),(0,logging_1.getLogger)().report(t instanceof Error?t:new LoggedError(t),r,this&&"loggedCallback"!==this.name?this:void 0),e(t)}function allCallback(t,r){loggedCallback.call(this,t,logging_1.LOGGER_LEVELS.ALL,r)}function debugCallback(t,r){loggedCallback.call(this,t,logging_1.LOGGER_LEVELS.DEBUG,r)}function infoCallback(t,r){loggedCallback.call(this,t,logging_1.LOGGER_LEVELS.INFO,r)}function warningCallback(t,r){loggedCallback.call(this,t,logging_1.LOGGER_LEVELS.WARN,r)}function errorCallback(t,r){loggedCallback.call(this,t,logging_1.LOGGER_LEVELS.ERROR,r)}function criticalCallback(t,r){loggedCallback.call(this,t,logging_1.LOGGER_LEVELS.CRITICAL,r)}exports.loggedCallback=loggedCallback,exports.allCallback=allCallback,exports.debugCallback=debugCallback,exports.infoCallback=infoCallback,exports.warningCallback=warningCallback,exports.errorCallback=errorCallback,exports.criticalCallback=criticalCallback;var LoggedError=function(o){function n(t,r){void 0===r&&(r=logging_1.LOGGER_LEVELS.ERROR);var e=o.call(this,t instanceof Error?t.message:t)||this;return e.logged=!1,e.logged=t instanceof n&&t.logged,e.logged||(0,logging_1.getLogger)().report(t,r),e}return __extends(n,o),n}(Error),CriticalError=function(r){function t(t){return r.call(this,t,logging_1.LOGGER_LEVELS.CRITICAL)||this}return __extends(t,r),t}(exports.LoggedError=LoggedError),__createBinding=(exports.CriticalError=CriticalError,this&&this.__createBinding||(Object.create?function(t,r,e,o){void 0===o&&(o=e),Object.defineProperty(t,o,{enumerable:!0,get:function(){return r[e]}})}:function(t,r,e,o){t[o=void 0===o?e:o]=r[e]})),__exportStar=this&&this.__exportStar||function(t,r){for(var e in t)"default"===e||Object.prototype.hasOwnProperty.call(r,e)||__createBinding(r,t,e)},__spreadArray=(Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(require("./errors"),exports),Object.defineProperty(exports,"__esModule",{value:!0}),exports.DAYS_OF_WEEK_NAMES=exports.MONTH_NAMES=exports.DEFAULT_TIMESTAMP_FORMAT=exports.LOGGING_MSG=exports.LOGGER_LEVELS=void 0,exports.LOGGER_LEVELS={ALL:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,CRITICAL:5},exports.LOGGING_MSG={LEVEL_CHANGED:"Logger Level changed from {0} to {1}",LOGGER_CHANGED:"Logger changed"},exports.DEFAULT_TIMESTAMP_FORMAT="dd/MM/yyyy HH:mm:ss:S",exports.MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"],exports.DAYS_OF_WEEK_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this&&this.__spreadArray||function(t,r,e){if(e||2===arguments.length)for(var o,n=0,a=r.length;n<a;n++)!o&&n in r||((o=o||Array.prototype.slice.call(r,0,n))[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))}),errors_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSync=exports.logAsync=exports.StopWatch=void 0,require("../errors")),logging_1=require("./logging"),constants_1=require("./constants"),StopWatch=function(){function t(){}return t.prototype.start=function(){this.startTime=Date.now()},t.prototype.check=function(){if(!this.startTime)throw new Error("StopWatch didnt start");return Date.now()-this.startTime},t.prototype.stop=function(){var t=this.check();return this.startTime=void 0,t},t}();function logAsync(s,g){return void 0===s&&(s=constants_1.LOGGER_LEVELS.DEBUG),g||"boolean"!=typeof s||(g=s,s=constants_1.LOGGER_LEVELS.DEBUG),function(t,i,r){var e=r.value;r.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=t.pop();if(!o||"function"!=typeof o)throw new errors_1.CriticalError("Missing Callback");var n,a=this.name&&"Function"!==this.name?this.name:this.constructor&&this.constructor.name||this;(0,logging_1.getLogger)().report("[{0}] - Entering Method {1} with args: {2}",s,a,i,t.map(function(t){return t.toString()}).join(" | "));g&&(n=new StopWatch).start(),e.call.apply(e,__spreadArray(__spreadArray([this.__originalObject||this],t,!1),[function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];if(n&&(0,logging_1.getLogger)().report("[{0}][BENCHMARK] - Leaving Method {1} after {2}ms",s,a,i,n.stop()),t)return(0,logging_1.getLogger)().report("[{0}][ERROR] - Leaving Method {1} with error {2}",s,a,i,t),o(t);(0,logging_1.getLogger)().report("[{0}] - Leaving Method {1} with results: {2}",s,a,i,r?r.map(function(t){return t.toString()}).join(" | "):"void"),o.apply(void 0,__spreadArray([void 0],r,!1))}],!1))}}}function logSync(s,g){return void 0===s&&(s=constants_1.LOGGER_LEVELS.DEBUG),g||"boolean"!=typeof s||(g=s,s=constants_1.LOGGER_LEVELS.DEBUG),function(t,a,r){var i=r.value;r.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e,o=this.name&&"Function"!==this.name?this.name:this.constructor&&this.constructor.name||this,n=((0,logging_1.getLogger)().report("[{0}] - Entering Method {1} with args: {2}",s,o,a,t.map(function(t){return t.toString()}).join(" | ")),void 0);g&&(n=new StopWatch).start();try{e=i.call.apply(i,__spreadArray([this.__originalObject||this],t,!1))}catch(t){throw n&&(0,logging_1.getLogger)().report("[{0}][BENCHMARK] - Leaving Method {1} after {2}ms",s,o,a,n.stop()),(0,logging_1.getLogger)().report("[{0}][ERROR] - Leaving Method {1} with error {2}",s,o,a,t),t}return n&&(0,logging_1.getLogger)().report("[{0}][BENCHMARK] - Leaving Method {1} after {2}ms",s,o,a,n.stop()),(0,logging_1.getLogger)().report("[{0}] - Leaving Method {1} with results: {2}",s,o,a,e||"void"),e}}}exports.StopWatch=StopWatch,exports.logAsync=logAsync,exports.logSync=logSync;var currentLogger,__createBinding=this&&this.__createBinding||(Object.create?function(t,r,e,o){void 0===o&&(o=e),Object.defineProperty(t,o,{enumerable:!0,get:function(){return r[e]}})}:function(t,r,e,o){t[o=void 0===o?e:o]=r[e]}),__exportStar=this&&this.__exportStar||function(t,r){for(var e in t)"default"===e||Object.prototype.hasOwnProperty.call(r,e)||__createBinding(r,t,e)},__spreadArray=(Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(require("./constants"),exports),__exportStar(require("./logging"),exports),__exportStar(require("./decorators"),exports),__exportStar(require("./utils"),exports),this&&this.__spreadArray||function(t,r,e){if(e||2===arguments.length)for(var o,n=0,a=r.length;n<a;n++)!o&&n in r||((o=o||Array.prototype.slice.call(r,0,n))[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))}),constants_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.critical=exports.error=exports.warn=exports.debug=exports.all=exports.info=exports.setLogger=exports.getLogger=exports.LoggerImp=void 0,require("./constants")),errors_1=require("../errors"),utils_1=require("./utils"),LoggerImp=function(){function t(t,r,e,o,n){void 0===t&&(t=constants_1.LOGGER_LEVELS.INFO),void 0===r&&(r=!0),void 0===e&&(e=!0),void 0===o&&(o=!1),void 0===n&&(n=constants_1.DEFAULT_TIMESTAMP_FORMAT),this.level=t,this.useTimestamp=r,this.logLevel=e,this.logStackTrace=o,this.timestampFormat=n}return t.prototype.buildMessage=function(t,r,e){void 0===e&&(e=void 0);for(var o=[],n=3;n<arguments.length;n++)o[n-3]=arguments[n];return t instanceof Error&&(t.stack,t=t.message),this.logLevel&&(t="[".concat(Object.keys(constants_1.LOGGER_LEVELS)[r],"] - ").concat(t)),e&&(t="[".concat(e.toString(),"]").concat(t)),this.useTimestamp&&(t="[".concat((0,utils_1.formatDate)(new Date,this.timestampFormat),"]").concat(t)),utils_1.stringFormat.apply(void 0,__spreadArray([t],o,!1))},t.prototype.report=function(t,r){void 0===r&&(r=constants_1.LOGGER_LEVELS.INFO);for(var e,o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];if(!(r<this.level||t instanceof errors_1.LoggedError&&t.logged)){switch(r){case constants_1.LOGGER_LEVELS.WARN:e=console.warn;break;case constants_1.LOGGER_LEVELS.ERROR:case constants_1.LOGGER_LEVELS.CRITICAL:e=console.error;break;case constants_1.LOGGER_LEVELS.INFO:case constants_1.LOGGER_LEVELS.DEBUG:case constants_1.LOGGER_LEVELS.ALL:default:e=console.log}e(this.buildMessage.apply(this,__spreadArray([t,r,void 0],o,!1))),t instanceof Error&&t.stack&&this.logStackTrace&&(console.log(t),e(this.buildMessage("\n-- StackStrace:\n".concat(t.stack),r))),t instanceof errors_1.LoggedError&&(t.logged=!0)}},t.prototype.info=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];this.report.apply(this,__spreadArray([t,constants_1.LOGGER_LEVELS.INFO],r,!1))},t.prototype.all=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];this.report.apply(this,__spreadArray([t,constants_1.LOGGER_LEVELS.ALL],r,!1))},t.prototype.debug=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];this.report.apply(this,__spreadArray([t,constants_1.LOGGER_LEVELS.DEBUG],r,!1))},t.prototype.warn=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];this.report.apply(this,__spreadArray([t,constants_1.LOGGER_LEVELS.WARN],r,!1))},t.prototype.error=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];this.report.apply(this,__spreadArray([t,constants_1.LOGGER_LEVELS.ERROR],r,!1))},t.prototype.critical=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];this.report.apply(this,__spreadArray([t,constants_1.LOGGER_LEVELS.CRITICAL],r,!1))},t.prototype.setLevel=function(t){this.debug((0,utils_1.stringFormat)(constants_1.LOGGING_MSG.LEVEL_CHANGED,this.level.toString(),t.toString())),this.level=t},t}();function getLogger(){return currentLogger=currentLogger||new LoggerImp}function setLogger(t){currentLogger=t,getLogger().debug(constants_1.LOGGING_MSG.LOGGER_CHANGED)}exports.LoggerImp=LoggerImp,exports.getLogger=getLogger,exports.setLogger=setLogger;var info=function(t){for(var r,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];return(r=getLogger()).info.apply(r,__spreadArray([t],e,!1))},all=(exports.info=info,function(t){for(var r,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];return(r=getLogger()).all.apply(r,__spreadArray([t],e,!1))}),debug=(exports.all=all,function(t){for(var r,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];return(r=getLogger()).debug.apply(r,__spreadArray([t],e,!1))}),warn=(exports.debug=debug,function(t){for(var r,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];return(r=getLogger()).warn.apply(r,__spreadArray([t],e,!1))}),error=(exports.warn=warn,function(t){for(var r,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];return(r=getLogger()).error.apply(r,__spreadArray([t],e,!1))}),critical=(exports.error=error,function(t){for(var r,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];return(r=getLogger()).critical.apply(r,__spreadArray([t],e,!1))}),constants_1=(exports.critical=critical,Object.defineProperty(exports,"__esModule",{value:!0}),exports.twoDigitPad=exports.formatDate=exports.stringFormat=void 0,require("./constants"));function stringFormat(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return t.replace(/{(\d+)}/g,function(t,r){return void 0!==e[r]?e[r]:t})}function formatDate(t,r){void 0===r&&(r="yyyy/MM/dd");var e=t.getDate(),o=t.getMonth(),n=t.getFullYear(),a=t.getHours(),i=t.getMinutes(),s=t.getSeconds(),l=t.getMilliseconds(),g=a%12,p=twoDigitPad(g),_=twoDigitPad(a),u=twoDigitPad(i),d=twoDigitPad(s),L=a<12?"AM":"PM",t=constants_1.DAYS_OF_WEEK_NAMES[t.getDay()],E=t.substr(0,3),f=twoDigitPad(e),c=o+1,h=twoDigitPad(c),o=constants_1.MONTH_NAMES[o],y=o.substr(0,3),n=n+"",v=n.substr(2,2);return r=-1<(r=r.replace("hh",p).replace("h",g.toString()).replace("HH",_).replace("H",a.toString()).replace("mm",u).replace("m",i.toString()).replace("ss",d).replace("s",s.toString()).replace("S",l.toString()).replace("dd",f).replace("d",e.toString()).replace("EEEE",t).replace("EEE",E).replace("yyyy",n).replace("yy",v).replace("aaa",L)).indexOf("MMM")?r.replace("MMMM",o).replace("MMM",y):r.replace("MM",h).replace("M",c.toString())}function twoDigitPad(t){return t<10?"0"+t:t.toString()}exports.stringFormat=stringFormat,exports.formatDate=formatDate,exports.twoDigitPad=twoDigitPad;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiZXJyb3JzL2Vycm9ycy5qcyIsImluZGV4LnRzIiwiZXJyb3JzL2Vycm9ycy50cyIsImVycm9ycy9pbmRleC5qcyIsImxvZ2dpbmcvZGVjb3JhdG9ycy5qcyIsImVycm9ycy9pbmRleC50cyIsImxvZ2dpbmcvY29uc3RhbnRzLmpzIiwibG9nZ2luZy9jb25zdGFudHMudHMiLCJsb2dnaW5nL2RlY29yYXRvcnMudHMiLCJsb2dnaW5nL2luZGV4LmpzIiwibG9nZ2luZy9sb2dnaW5nLnRzIiwibG9nZ2luZy9sb2dnaW5nLmpzIiwibG9nZ2luZy9pbmRleC50cyIsImxvZ2dpbmcvdXRpbHMudHMiLCJsb2dnaW5nL3V0aWxzLmpzIl0sIm5hbWVzIjpbIl9fY3JlYXRlQmluZGluZyIsInRoaXMiLCJPYmplY3QiLCJjcmVhdGUiLCJvIiwibSIsImsiLCJrMiIsInVuZGVmaW5lZCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIl9fZXhwb3J0U3RhciIsImV4cG9ydHMiLCJwIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiX19leHRlbmRzIiwidmFsdWUiLCJyZXF1aXJlIiwiZXh0ZW5kU3RhdGljcyIsImQiLCJiIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsIlR5cGVFcnJvciIsIlN0cmluZyIsIl9fIiwiY29uc3RydWN0b3IiLCJsb2dnaW5nXzEiLCJDcml0aWNhbEVycm9yIiwiTG9nZ2VkRXJyb3IiLCJjcml0aWNhbENhbGxiYWNrIiwiZXJyb3JDYWxsYmFjayIsIndhcm5pbmdDYWxsYmFjayIsImluZm9DYWxsYmFjayIsImRlYnVnQ2FsbGJhY2siLCJhbGxDYWxsYmFjayIsImxvZ2dlZENhbGxiYWNrIiwibWVzc2FnZSIsImxldmVsIiwiY2FsbGJhY2siLCJMT0dHRVJfTEVWRUxTIiwiSU5GTyIsImdldExvZ2dlciIsInJlcG9ydCIsIkVycm9yIiwibmFtZSIsIkFMTCIsIkRFQlVHIiwiV0FSTiIsIkVSUk9SIiwiQ1JJVElDQUwiLCJfc3VwZXIiLCJlcnJvciIsIl90aGlzIiwibG9nZ2VkIiwiX19zcHJlYWRBcnJheSIsIkRBWVNfT0ZfV0VFS19OQU1FUyIsIk1PTlRIX05BTUVTIiwiREVGQVVMVF9USU1FU1RBTVBfRk9STUFUIiwiTE9HR0lOR19NU0ciLCJMRVZFTF9DSEFOR0VEIiwiTE9HR0VSX0NIQU5HRUQiLCJ0byIsImZyb20iLCJwYWNrIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiYXIiLCJpIiwibCIsInNsaWNlIiwiY29uY2F0IiwiZXJyb3JzXzEiLCJsb2dTeW5jIiwibG9nQXN5bmMiLCJTdG9wV2F0Y2giLCJjb25zdGFudHNfMSIsInN0YXJ0Iiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsImNoZWNrIiwic3RvcCIsInJlc3VsdCIsImJlbmNobWFyayIsInRhcmdldCIsInByb3BlcnR5S2V5IiwiZGVzY3JpcHRvciIsIm9yaWdpbmFsTWV0aG9kIiwiYXJncyIsIl9pIiwicG9wIiwic3RvcFdhdGNoIiwibWFwIiwiYSIsInRvU3RyaW5nIiwiam9pbiIsImFwcGx5IiwiX19vcmlnaW5hbE9iamVjdCIsImVyciIsInJlc3VsdHMiLCJlIiwiY3VycmVudExvZ2dlciIsImNyaXRpY2FsIiwid2FybiIsImRlYnVnIiwiYWxsIiwiaW5mbyIsInNldExvZ2dlciIsIkxvZ2dlckltcCIsInV0aWxzXzEiLCJkZWZhdWx0TGV2ZWwiLCJ1c2VUaW1lc3RhbXAiLCJsb2dMZXZlbCIsImxvZ1N0YWNrVHJhY2UiLCJ0aW1lc3RhbXBGb3JtYXQiLCJidWlsZE1lc3NhZ2UiLCJpc3N1ZXIiLCJzdGFjayIsImtleXMiLCJmb3JtYXREYXRlIiwic3RyaW5nRm9ybWF0IiwicmVwb3J0TWV0aG9kIiwiY29uc29sZSIsImxvZyIsInNldExldmVsIiwibG9nZ2VyIiwiX2EiLCJ0d29EaWdpdFBhZCIsInN0cmluZyIsInJlcGxhY2UiLCJtYXRjaCIsIm51bWJlciIsImRhdGUiLCJwYXR0ZXJuU3RyIiwiZGF5IiwiZ2V0RGF0ZSIsIm1vbnRoIiwiZ2V0TW9udGgiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJob3VyIiwiZ2V0SG91cnMiLCJtaW51dGUiLCJnZXRNaW51dGVzIiwic2Vjb25kIiwiZ2V0U2Vjb25kcyIsIm1pbGlzZWNvbmRzIiwiZ2V0TWlsbGlzZWNvbmRzIiwiaCIsImhoIiwiSEgiLCJtbSIsInNzIiwiYWFhIiwiRUVFRSIsImdldERheSIsIkVFRSIsInN1YnN0ciIsImRkIiwiTSIsIk1NIiwiTU1NTSIsIk1NTSIsInl5eXkiLCJ5eSIsImluZGV4T2YiLCJudW0iXSwibWFwcGluZ3MiOiJhQUNBLElBQUlBLGdCQUFtQkMsTUFBUUEsS0FBS0Qsa0JBQXFCRSxPQUFPQyxPQUFVLFNBQVNDLEVBQUdDLEVBQUdDLEVBQUdDLFFBQzdFQyxJQUFQRCxJQUFrQkEsRUFBS0QsR0FDM0JKLE9BQU9PLGVBQWVMLEVBQUdHLEVBQUksQ0FBRUcsWUFBWSxFQUFNQyxJQUFLLFdBQWEsT0FBT04sRUFBRUMsT0FDMUUsU0FBU0YsRUFBR0MsRUFBR0MsRUFBR0MsR0FFcEJILEVBRHNCRyxPQUFYQyxJQUFQRCxFQUF1QkQsRUFDekJDLEdBQU1GLEVBQUVDLEtBRVZNLGFBQWdCWCxNQUFRQSxLQUFLVyxjQUFpQixTQUFTUCxFQUFHUSxHQUMxRCxJQUFLLElBQUlDLEtBQUtULEVBQWEsWUFBTlMsR0FBb0JaLE9BQU9hLFVBQVVDLGVBQWVDLEtBQUtKLEVBQVNDLElBQUlkLGdCQUFnQmEsRUFBU1IsRUFBR1MsSUNSdkhJLFdEVUpoQixPQUFPTyxlQUFlSSxRQUFTLGFBQWMsQ0FBRU0sT0FBTyxJRVB0RFAsYUFBQVEsUUFBQSxZQUFBUCxTQUNBRCxhQUFBUSxRQUFBLGFBQUFQLFNESmlCWixNQUFRQSxLQUFLaUIsV0FBZSxXQUN6QyxJQUFJRyxFQUFnQixTQUFVQyxFQUFHQyxHQUk3QixPQUhBRixFQUFnQm5CLE9BQU9zQixnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSixFQUFHQyxHQUFLRCxFQUFF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ImZpbGUiOiJpbmRleC5idW5kbGUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fZXhwb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19leHBvcnRTdGFyKSB8fCBmdW5jdGlvbihtLCBleHBvcnRzKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChleHBvcnRzLCBwKSkgX19jcmVhdGVCaW5kaW5nKGV4cG9ydHMsIG0sIHApO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9lcnJvcnNcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2xvZ2dpbmdcIiksIGV4cG9ydHMpOyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ3JpdGljYWxFcnJvciA9IGV4cG9ydHMuTG9nZ2VkRXJyb3IgPSBleHBvcnRzLmNyaXRpY2FsQ2FsbGJhY2sgPSBleHBvcnRzLmVycm9yQ2FsbGJhY2sgPSBleHBvcnRzLndhcm5pbmdDYWxsYmFjayA9IGV4cG9ydHMuaW5mb0NhbGxiYWNrID0gZXhwb3J0cy5kZWJ1Z0NhbGxiYWNrID0gZXhwb3J0cy5hbGxDYWxsYmFjayA9IGV4cG9ydHMubG9nZ2VkQ2FsbGJhY2sgPSB2b2lkIDA7XG52YXIgbG9nZ2luZ18xID0gcmVxdWlyZShcIi4uL2xvZ2dpbmdcIik7XG5mdW5jdGlvbiBsb2dnZWRDYWxsYmFjayhtZXNzYWdlLCBsZXZlbCwgY2FsbGJhY2spIHtcbiAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbGV2ZWw7XG4gICAgICAgIGxldmVsID0gbG9nZ2luZ18xLkxPR0dFUl9MRVZFTFMuSU5GTztcbiAgICB9XG4gICAgKDAsIGxvZ2dpbmdfMS5nZXRMb2dnZXIpKCkucmVwb3J0KG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvciA/IG1lc3NhZ2UgOiBuZXcgTG9nZ2VkRXJyb3IobWVzc2FnZSksIGxldmVsLCB0aGlzICYmIHRoaXMubmFtZSAhPT0gXCJsb2dnZWRDYWxsYmFja1wiID8gdGhpcyA6IHVuZGVmaW5lZCk7XG4gICAgY2FsbGJhY2sobWVzc2FnZSk7XG59XG5leHBvcnRzLmxvZ2dlZENhbGxiYWNrID0gbG9nZ2VkQ2FsbGJhY2s7XG5mdW5jdGlvbiBhbGxDYWxsYmFjayhtZXNzYWdlLCBjYWxsYmFjaykge1xuICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwodGhpcywgbWVzc2FnZSwgbG9nZ2luZ18xLkxPR0dFUl9MRVZFTFMuQUxMLCBjYWxsYmFjayk7XG59XG5leHBvcnRzLmFsbENhbGxiYWNrID0gYWxsQ2FsbGJhY2s7XG5mdW5jdGlvbiBkZWJ1Z0NhbGxiYWNrKG1lc3NhZ2UsIGNhbGxiYWNrKSB7XG4gICAgbG9nZ2VkQ2FsbGJhY2suY2FsbCh0aGlzLCBtZXNzYWdlLCBsb2dnaW5nXzEuTE9HR0VSX0xFVkVMUy5ERUJVRywgY2FsbGJhY2spO1xufVxuZXhwb3J0cy5kZWJ1Z0NhbGxiYWNrID0gZGVidWdDYWxsYmFjaztcbmZ1bmN0aW9uIGluZm9DYWxsYmFjayhtZXNzYWdlLCBjYWxsYmFjaykge1xuICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwodGhpcywgbWVzc2FnZSwgbG9nZ2luZ18xLkxPR0dFUl9MRVZFTFMuSU5GTywgY2FsbGJhY2spO1xufVxuZXhwb3J0cy5pbmZvQ2FsbGJhY2sgPSBpbmZvQ2FsbGJhY2s7XG5mdW5jdGlvbiB3YXJuaW5nQ2FsbGJhY2sobWVzc2FnZSwgY2FsbGJhY2spIHtcbiAgICBsb2dnZWRDYWxsYmFjay5jYWxsKHRoaXMsIG1lc3NhZ2UsIGxvZ2dpbmdfMS5MT0dHRVJfTEVWRUxTLldBUk4sIGNhbGxiYWNrKTtcbn1cbmV4cG9ydHMud2FybmluZ0NhbGxiYWNrID0gd2FybmluZ0NhbGxiYWNrO1xuZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhtZXNzYWdlLCBjYWxsYmFjaykge1xuICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwodGhpcywgbWVzc2FnZSwgbG9nZ2luZ18xLkxPR0dFUl9MRVZFTFMuRVJST1IsIGNhbGxiYWNrKTtcbn1cbmV4cG9ydHMuZXJyb3JDYWxsYmFjayA9IGVycm9yQ2FsbGJhY2s7XG5mdW5jdGlvbiBjcml0aWNhbENhbGxiYWNrKG1lc3NhZ2UsIGNhbGxiYWNrKSB7XG4gICAgbG9nZ2VkQ2FsbGJhY2suY2FsbCh0aGlzLCBtZXNzYWdlLCBsb2dnaW5nXzEuTE9HR0VSX0xFVkVMUy5DUklUSUNBTCwgY2FsbGJhY2spO1xufVxuZXhwb3J0cy5jcml0aWNhbENhbGxiYWNrID0gY3JpdGljYWxDYWxsYmFjaztcbnZhciBMb2dnZWRFcnJvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExvZ2dlZEVycm9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIExvZ2dlZEVycm9yKGVycm9yLCBsZXZlbCkge1xuICAgICAgICBpZiAobGV2ZWwgPT09IHZvaWQgMCkgeyBsZXZlbCA9IGxvZ2dpbmdfMS5MT0dHRVJfTEVWRUxTLkVSUk9SOyB9XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogZXJyb3IpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmxvZ2dlZCA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5sb2dnZWQgPSBlcnJvciBpbnN0YW5jZW9mIExvZ2dlZEVycm9yICYmIGVycm9yLmxvZ2dlZDtcbiAgICAgICAgaWYgKCFfdGhpcy5sb2dnZWQpXG4gICAgICAgICAgICAoMCwgbG9nZ2luZ18xLmdldExvZ2dlcikoKS5yZXBvcnQoZXJyb3IsIGxldmVsKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gTG9nZ2VkRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnRzLkxvZ2dlZEVycm9yID0gTG9nZ2VkRXJyb3I7XG52YXIgQ3JpdGljYWxFcnJvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENyaXRpY2FsRXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ3JpdGljYWxFcnJvcihlcnJvcikge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgZXJyb3IsIGxvZ2dpbmdfMS5MT0dHRVJfTEVWRUxTLkNSSVRJQ0FMKSB8fCB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gQ3JpdGljYWxFcnJvcjtcbn0oTG9nZ2VkRXJyb3IpKTtcbmV4cG9ydHMuQ3JpdGljYWxFcnJvciA9IENyaXRpY2FsRXJyb3I7IiwiLyoqXG4gKiBAbW9kdWxlIGxvZ2dpbmdcbiAqL1xuXG5leHBvcnQgKiBmcm9tICcuL2Vycm9ycyc7XG5leHBvcnQgKiBmcm9tICcuL2xvZ2dpbmcnOyIsImltcG9ydCB7Q2FsbGJhY2ssIGdldExvZ2dlciwgTE9HR0VSX0xFVkVMUywgTG9nZ2VyTWVzc2FnZX0gZnJvbSBcIi4uL2xvZ2dpbmdcIjtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7bnVtYmVyfSBsZXZlbFxuICogQHBhcmFtIHtDYWxsYmFja30gY2FsbGJhY2tcbiAqXG4gKiBAZnVuY3Rpb24gbG9nZ2VkQ2FsbGJhY2tcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5lcnJvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvZ2dlZENhbGxiYWNrKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgbGV2ZWw6IG51bWJlciB8IENhbGxiYWNrLCBjYWxsYmFjazogQ2FsbGJhY2spe1xuICAgIGlmICghY2FsbGJhY2spe1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNhbGxiYWNrID0gbGV2ZWw7XG4gICAgICAgIGxldmVsID0gTE9HR0VSX0xFVkVMUy5JTkZPO1xuICAgIH1cblxuICAgIGdldExvZ2dlcigpLnJlcG9ydChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IgPyBtZXNzYWdlIDogbmV3IExvZ2dlZEVycm9yKG1lc3NhZ2UpLCBsZXZlbCBhcyBudW1iZXIsdGhpcyAmJiB0aGlzLm5hbWUgIT09IFwibG9nZ2VkQ2FsbGJhY2tcIiA/IHRoaXMgOiB1bmRlZmluZWQpO1xuICAgIGNhbGxiYWNrKG1lc3NhZ2UpO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKlxuICogQGZ1bmN0aW9uIGFsbENhbGxiYWNrXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMuZXJyb3JzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhbGxDYWxsYmFjayh0aGlzOiBhbnksIG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGNhbGxiYWNrOiBDYWxsYmFjayl7XG4gICAgbG9nZ2VkQ2FsbGJhY2suY2FsbCh0aGlzLCBtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLkFMTCwgY2FsbGJhY2spO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKlxuICogQGZ1bmN0aW9uIGRlYnVnQ2FsbGJhY2tcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5lcnJvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlYnVnQ2FsbGJhY2sodGhpczogYW55LCBtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBjYWxsYmFjazogQ2FsbGJhY2spe1xuICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwodGhpcywgbWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5ERUJVRywgY2FsbGJhY2spO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKlxuICogQGZ1bmN0aW9uIGluZm9DYWxsYmFja1xuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmVycm9yc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mb0NhbGxiYWNrKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgY2FsbGJhY2s6IENhbGxiYWNrKXtcbiAgICBsb2dnZWRDYWxsYmFjay5jYWxsKHRoaXMsIG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuSU5GTywgY2FsbGJhY2spO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKlxuICogQGZ1bmN0aW9uIHdhcm5pbmdDYWxsYmFja1xuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmVycm9yc1xuICovXG5leHBvcnQgZnVuY3Rpb24gd2FybmluZ0NhbGxiYWNrKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgY2FsbGJhY2s6IENhbGxiYWNrKXtcbiAgICBsb2dnZWRDYWxsYmFjay5jYWxsKHRoaXMsIG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuV0FSTiwgY2FsbGJhY2spO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKlxuICogQGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2tcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5lcnJvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2sodGhpczogYW55LCBtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBjYWxsYmFjazogQ2FsbGJhY2spe1xuICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwodGhpcywgbWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5FUlJPUiwgY2FsbGJhY2spO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKlxuICogQGZ1bmN0aW9uIGNyaXRpY2FsQ2FsbGJhY2tcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5lcnJvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyaXRpY2FsQ2FsbGJhY2sodGhpczogYW55LCBtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBjYWxsYmFjazogQ2FsbGJhY2spe1xuICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwodGhpcywgbWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5DUklUSUNBTCwgY2FsbGJhY2spO1xufVxuXG4vKipcbiAqIFdyYXBwZXIgQ2xhc3MgZm9yIExvZ2dlZCBFcnJvcnNcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IGVycm9yXG4gKiBAcGFyYW0ge251bWJlcn0gbGV2ZWwgZGVmYXVsdHMgdG8ge0BsaW5rIExPR0dFUl9MRVZFTFMuRVJST1J9XG4gKlxuICogQGNsYXNzIExvZ2dlZEVycm9yXG4gKiBAZXh0ZW5kcyBFcnJvclxuICpcbiAqL1xuZXhwb3J0IGNsYXNzIExvZ2dlZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIC8qKlxuICAgICAqIEBwcm9wZXJ0eSBsb2dnZWRcbiAgICAgKi9cbiAgICBsb2dnZWQgPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKGVycm9yOiBMb2dnZXJNZXNzYWdlLCBsZXZlbDogbnVtYmVyID0gTE9HR0VSX0xFVkVMUy5FUlJPUikge1xuICAgICAgICBzdXBlcihlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IGVycm9yKTtcbiAgICAgICAgdGhpcy5sb2dnZWQgPSBlcnJvciBpbnN0YW5jZW9mIExvZ2dlZEVycm9yICYmIGVycm9yLmxvZ2dlZDtcbiAgICAgICAgaWYgKCF0aGlzLmxvZ2dlZClcbiAgICAgICAgICAgIGdldExvZ2dlcigpLnJlcG9ydChlcnJvciwgbGV2ZWwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBXcmFwcGVyIENsYXNzIGZvciBDcml0aWNhbCBFcnJvcnNcbiAqXG4gKiBAY2xhc3MgQ3JpdGljYWxFcnJvclxuICogQGV4dGVuZHMgTG9nZ2VkRXJyb3JcbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBDcml0aWNhbEVycm9yIGV4dGVuZHMgTG9nZ2VkRXJyb3J7XG4gICAgY29uc3RydWN0b3IoZXJyb3I6IExvZ2dlck1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIoZXJyb3IsIExPR0dFUl9MRVZFTFMuQ1JJVElDQUwpO1xuICAgIH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19leHBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2V4cG9ydFN0YXIpIHx8IGZ1bmN0aW9uKG0sIGV4cG9ydHMpIHtcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGV4cG9ydHMsIHApKSBfX2NyZWF0ZUJpbmRpbmcoZXhwb3J0cywgbSwgcCk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2Vycm9yc1wiKSwgZXhwb3J0cyk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmxvZ1N5bmMgPSBleHBvcnRzLmxvZ0FzeW5jID0gZXhwb3J0cy5TdG9wV2F0Y2ggPSB2b2lkIDA7XG52YXIgZXJyb3JzXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JzXCIpO1xudmFyIGxvZ2dpbmdfMSA9IHJlcXVpcmUoXCIuL2xvZ2dpbmdcIik7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG52YXIgU3RvcFdhdGNoID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdG9wV2F0Y2goKSB7XG4gICAgfVxuICAgIFN0b3BXYXRjaC5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB9O1xuICAgIFN0b3BXYXRjaC5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGFydFRpbWUpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0b3BXYXRjaCBkaWRudCBzdGFydCcpO1xuICAgICAgICByZXR1cm4gRGF0ZS5ub3coKSAtIHRoaXMuc3RhcnRUaW1lO1xuICAgIH07XG4gICAgU3RvcFdhdGNoLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5jaGVjaygpO1xuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIHJldHVybiBTdG9wV2F0Y2g7XG59KCkpO1xuZXhwb3J0cy5TdG9wV2F0Y2ggPSBTdG9wV2F0Y2g7XG5mdW5jdGlvbiBsb2dBc3luYyhsZXZlbCwgYmVuY2htYXJrKSB7XG4gICAgaWYgKGxldmVsID09PSB2b2lkIDApIHsgbGV2ZWwgPSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkRFQlVHOyB9XG4gICAgaWYgKCFiZW5jaG1hcmsgJiYgdHlwZW9mIGxldmVsID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgYmVuY2htYXJrID0gbGV2ZWw7XG4gICAgICAgIGxldmVsID0gY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5ERUJVRztcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIHByb3BlcnR5S2V5LCBkZXNjcmlwdG9yKSB7XG4gICAgICAgIHZhciBvcmlnaW5hbE1ldGhvZCA9IGRlc2NyaXB0b3IudmFsdWU7XG4gICAgICAgIHZhciBtZXRob2RXcmFwcGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gYXJncy5wb3AoKTtcbiAgICAgICAgICAgIGlmICghY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcnNfMS5Dcml0aWNhbEVycm9yKFwiTWlzc2luZyBDYWxsYmFja1wiKTtcbiAgICAgICAgICAgIHZhciBuYW1lID0gdGhpcy5uYW1lICYmIHRoaXMubmFtZSAhPT0gJ0Z1bmN0aW9uJyA/IHRoaXMubmFtZSA6IHRoaXMuY29uc3RydWN0b3IgJiYgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lIHx8IHRoaXM7XG4gICAgICAgICAgICAoMCwgbG9nZ2luZ18xLmdldExvZ2dlcikoKS5yZXBvcnQoXCJbezB9XSAtIEVudGVyaW5nIE1ldGhvZCB7MX0gd2l0aCBhcmdzOiB7Mn1cIiwgbGV2ZWwsIG5hbWUsIHByb3BlcnR5S2V5LCBhcmdzLm1hcChmdW5jdGlvbiAoYSkgeyByZXR1cm4gYS50b1N0cmluZygpOyB9KS5qb2luKCcgfCAnKSk7XG4gICAgICAgICAgICB2YXIgc3RvcFdhdGNoO1xuICAgICAgICAgICAgdmFyIGNiID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN0b3BXYXRjaClcbiAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ2dpbmdfMS5nZXRMb2dnZXIpKCkucmVwb3J0KFwiW3swfV1bQkVOQ0hNQVJLXSAtIExlYXZpbmcgTWV0aG9kIHsxfSBhZnRlciB7Mn1tc1wiLCBsZXZlbCwgbmFtZSwgcHJvcGVydHlLZXksIHN0b3BXYXRjaC5zdG9wKCkpO1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ2dpbmdfMS5nZXRMb2dnZXIpKCkucmVwb3J0KFwiW3swfV1bRVJST1JdIC0gTGVhdmluZyBNZXRob2QgezF9IHdpdGggZXJyb3IgezJ9XCIsIGxldmVsLCBuYW1lLCBwcm9wZXJ0eUtleSwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChcIlt7MH1dIC0gTGVhdmluZyBNZXRob2QgezF9IHdpdGggcmVzdWx0czogezJ9XCIsIGxldmVsLCBuYW1lLCBwcm9wZXJ0eUtleSwgcmVzdWx0cyA/IHJlc3VsdHMubWFwKGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLnRvU3RyaW5nKCk7IH0pLmpvaW4oJyB8ICcpIDogXCJ2b2lkXCIpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbdW5kZWZpbmVkXSwgcmVzdWx0cywgZmFsc2UpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoYmVuY2htYXJrKSB7XG4gICAgICAgICAgICAgICAgc3RvcFdhdGNoID0gbmV3IFN0b3BXYXRjaCgpO1xuICAgICAgICAgICAgICAgIHN0b3BXYXRjaC5zdGFydCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3JpZ2luYWxNZXRob2QuY2FsbC5hcHBseShvcmlnaW5hbE1ldGhvZCwgX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFt0aGlzLl9fb3JpZ2luYWxPYmplY3QgfHwgdGhpc10sIGFyZ3MsIGZhbHNlKSwgW2NiXSwgZmFsc2UpKTtcbiAgICAgICAgfTtcbiAgICAgICAgZGVzY3JpcHRvci52YWx1ZSA9IG1ldGhvZFdyYXBwZXI7XG4gICAgfTtcbn1cbmV4cG9ydHMubG9nQXN5bmMgPSBsb2dBc3luYztcbmZ1bmN0aW9uIGxvZ1N5bmMobGV2ZWwsIGJlbmNobWFyaykge1xuICAgIGlmIChsZXZlbCA9PT0gdm9pZCAwKSB7IGxldmVsID0gY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5ERUJVRzsgfVxuICAgIGlmICghYmVuY2htYXJrICYmIHR5cGVvZiBsZXZlbCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGJlbmNobWFyayA9IGxldmVsO1xuICAgICAgICBsZXZlbCA9IGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuREVCVUc7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSwgZGVzY3JpcHRvcikge1xuICAgICAgICB2YXIgb3JpZ2luYWxNZXRob2QgPSBkZXNjcmlwdG9yLnZhbHVlO1xuICAgICAgICB2YXIgbWV0aG9kV3JhcHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBuYW1lID0gdGhpcy5uYW1lICYmIHRoaXMubmFtZSAhPT0gJ0Z1bmN0aW9uJyA/IHRoaXMubmFtZSA6IHRoaXMuY29uc3RydWN0b3IgJiYgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lIHx8IHRoaXM7XG4gICAgICAgICAgICAoMCwgbG9nZ2luZ18xLmdldExvZ2dlcikoKS5yZXBvcnQoXCJbezB9XSAtIEVudGVyaW5nIE1ldGhvZCB7MX0gd2l0aCBhcmdzOiB7Mn1cIiwgbGV2ZWwsIG5hbWUsIHByb3BlcnR5S2V5LCBhcmdzLm1hcChmdW5jdGlvbiAoYSkgeyByZXR1cm4gYS50b1N0cmluZygpOyB9KS5qb2luKCcgfCAnKSk7XG4gICAgICAgICAgICB2YXIgc3RvcFdhdGNoID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICAgIGlmIChiZW5jaG1hcmspIHtcbiAgICAgICAgICAgICAgICBzdG9wV2F0Y2ggPSBuZXcgU3RvcFdhdGNoKCk7XG4gICAgICAgICAgICAgICAgc3RvcFdhdGNoLnN0YXJ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IG9yaWdpbmFsTWV0aG9kLmNhbGwuYXBwbHkob3JpZ2luYWxNZXRob2QsIF9fc3ByZWFkQXJyYXkoW3RoaXMuX19vcmlnaW5hbE9iamVjdCB8fCB0aGlzXSwgYXJncywgZmFsc2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0b3BXYXRjaClcbiAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ2dpbmdfMS5nZXRMb2dnZXIpKCkucmVwb3J0KFwiW3swfV1bQkVOQ0hNQVJLXSAtIExlYXZpbmcgTWV0aG9kIHsxfSBhZnRlciB7Mn1tc1wiLCBsZXZlbCwgbmFtZSwgcHJvcGVydHlLZXksIHN0b3BXYXRjaC5zdG9wKCkpO1xuICAgICAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChcIlt7MH1dW0VSUk9SXSAtIExlYXZpbmcgTWV0aG9kIHsxfSB3aXRoIGVycm9yIHsyfVwiLCBsZXZlbCwgbmFtZSwgcHJvcGVydHlLZXksIGUpO1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RvcFdhdGNoKVxuICAgICAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChcIlt7MH1dW0JFTkNITUFSS10gLSBMZWF2aW5nIE1ldGhvZCB7MX0gYWZ0ZXIgezJ9bXNcIiwgbGV2ZWwsIG5hbWUsIHByb3BlcnR5S2V5LCBzdG9wV2F0Y2guc3RvcCgpKTtcbiAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChcIlt7MH1dIC0gTGVhdmluZyBNZXRob2QgezF9IHdpdGggcmVzdWx0czogezJ9XCIsIGxldmVsLCBuYW1lLCBwcm9wZXJ0eUtleSwgcmVzdWx0ID8gcmVzdWx0IDogXCJ2b2lkXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgZGVzY3JpcHRvci52YWx1ZSA9IG1ldGhvZFdyYXBwZXI7XG4gICAgfTtcbn1cbmV4cG9ydHMubG9nU3luYyA9IGxvZ1N5bmM7IiwiLyoqXG4gKiBAbmFtZXNwYWNlIGRiLWRlY29yYXRvcnMuZXJyb3JzXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9yc1xuICovXG5cbmV4cG9ydCAqIGZyb20gJy4vZXJyb3JzJzsiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuREFZU19PRl9XRUVLX05BTUVTID0gZXhwb3J0cy5NT05USF9OQU1FUyA9IGV4cG9ydHMuREVGQVVMVF9USU1FU1RBTVBfRk9STUFUID0gZXhwb3J0cy5MT0dHSU5HX01TRyA9IGV4cG9ydHMuTE9HR0VSX0xFVkVMUyA9IHZvaWQgMDtcbmV4cG9ydHMuTE9HR0VSX0xFVkVMUyA9IHtcbiAgICBBTEw6IDAsXG4gICAgREVCVUc6IDEsXG4gICAgSU5GTzogMixcbiAgICBXQVJOOiAzLFxuICAgIEVSUk9SOiA0LFxuICAgIENSSVRJQ0FMOiA1XG59O1xuZXhwb3J0cy5MT0dHSU5HX01TRyA9IHtcbiAgICBMRVZFTF9DSEFOR0VEOiBcIkxvZ2dlciBMZXZlbCBjaGFuZ2VkIGZyb20gezB9IHRvIHsxfVwiLFxuICAgIExPR0dFUl9DSEFOR0VEOiBcIkxvZ2dlciBjaGFuZ2VkXCJcbn07XG5leHBvcnRzLkRFRkFVTFRfVElNRVNUQU1QX0ZPUk1BVCA9IFwiZGQvTU0veXl5eSBISDptbTpzczpTXCI7XG5leHBvcnRzLk1PTlRIX05BTUVTID0gW1xuICAgIFwiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCIsXG4gICAgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXG5dO1xuZXhwb3J0cy5EQVlTX09GX1dFRUtfTkFNRVMgPSBbXG4gICAgXCJTdW5kYXlcIiwgXCJNb25kYXlcIiwgXCJUdWVzZGF5XCIsXG4gICAgXCJXZWRuZXNkYXlcIiwgXCJUaHVyc2RheVwiLCBcIkZyaWRheVwiLCBcIlNhdHVyZGF5XCJcbl07IiwiLyoqXG4gKiBAZW51bSBMT0dHRVJfTEVWRUxTXG4gKlxuICogQGNhdGVnb3J5IENvbnN0YW50c1xuICovXG5leHBvcnQgY29uc3QgTE9HR0VSX0xFVkVMUyA9IHtcbiAgICBBTEw6IDAsXG4gICAgREVCVUc6IDEsXG4gICAgSU5GTzogMixcbiAgICBXQVJOOiAzLFxuICAgIEVSUk9SOiA0LFxuICAgIENSSVRJQ0FMOiA1XG59XG5cbi8qKlxuICogRGVmYXVsdCBtZXNzYWdlc1xuICpcbiAqIGNvbnN0YW50IExPR0dJTkdfTVNHXG4gKlxuICogQG1lbWJlck9mIGxvZ2dpbmcubG9nZ2luZ1xuICovXG5leHBvcnQgY29uc3QgTE9HR0lOR19NU0cgPSB7XG4gICAgTEVWRUxfQ0hBTkdFRDogXCJMb2dnZXIgTGV2ZWwgY2hhbmdlZCBmcm9tIHswfSB0byB7MX1cIixcbiAgICBMT0dHRVJfQ0hBTkdFRDogXCJMb2dnZXIgY2hhbmdlZFwiXG59XG5cbi8qKlxuICogQHR5cGVkZWYgRXJyXG4gKiBAbWVtYmVyT2YgbG9nZ2luZy5sb2dnaW5nXG4gKiAqL1xuZXhwb3J0IHR5cGUgRXJyID0gRXJyb3IgfCBzdHJpbmcgfCB1bmRlZmluZWQ7XG4vKipcbiAqIEB0eXBlZGVmIENhbGxiYWNrXG4gKiBAbWVtYmVyT2YgbG9nZ2luZy5sb2dnaW5nXG4gKiAqL1xuZXhwb3J0IHR5cGUgQ2FsbGJhY2sgPSAoZXJyPzogRXJyLCAuLi5hcmdzOiBhbnlbXSkgPT4gdm9pZDtcblxuLyoqXG4gKiBAY29uc3RhbnQgREVGQVVMVF9USU1FU1RBTVBfRk9STUFUXG4gKiBAY2F0ZWdvcnkgQ29uc3RhbnRzXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX1RJTUVTVEFNUF9GT1JNQVQgPSBcImRkL01NL3l5eXkgSEg6bW06c3M6U1wiO1xuXG4vKipcbiAqIENhbiBiZSBjaGFuZ2VkIGZvciBsb2NhbGl6YXRpb24gcHVycG9zZXNcbiAqXG4gKiBAY29uc3RhbnQgTU9OVEhfTkFNRVNcbiAqL1xuZXhwb3J0IGNvbnN0IE1PTlRIX05BTUVTID0gW1xuICAgIFwiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCIsXG4gICAgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXG5dO1xuXG4vKipcbiAqIENhbiBiZSBjaGFuZ2VkIGZvciBsb2NhbGl6YXRpb24gcHVycG9zZXNcbiAqXG4gKiBAY29uc3RhbnQgREFZU19PRl9XRUVLX05BTUVTXG4gKi9cbmV4cG9ydCBjb25zdCBEQVlTX09GX1dFRUtfTkFNRVMgPSBbXG4gICAgXCJTdW5kYXlcIiwgXCJNb25kYXlcIiwgXCJUdWVzZGF5XCIsXG4gICAgXCJXZWRuZXNkYXlcIiwgXCJUaHVyc2RheVwiLCBcIkZyaWRheVwiLCBcIlNhdHVyZGF5XCJcbl07IiwiaW1wb3J0IHtDcml0aWNhbEVycm9yfSBmcm9tIFwiLi4vZXJyb3JzXCI7XG5pbXBvcnQge2dldExvZ2dlcn0gZnJvbSBcIi4vbG9nZ2luZ1wiO1xuaW1wb3J0IHtDYWxsYmFjaywgRXJyLCBMT0dHRVJfTEVWRUxTfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcblxuLyoqXG4gKiBVdGlsIGNsYXNzIHRvIG1lYXN1cmUgdGltZSBiZXR3ZWVuIHR3byBwb2ludHMgaW4gdGltZTtcbiAqXG4gKiBAY2xhc3MgU3RvcFdhdGNoXG4gKlxuICovXG5leHBvcnQgY2xhc3MgU3RvcFdhdGNoe1xuICAgIHByaXZhdGUgc3RhcnRUaW1lPzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBzdGFydCB0aW1lXG4gICAgICovXG4gICAgc3RhcnQoKXtcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBub3cgYW5kIHRoZSBzdGFydCB0aW1lXG4gICAgICovXG4gICAgY2hlY2soKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXJ0VGltZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU3RvcFdhdGNoIGRpZG50IHN0YXJ0Jyk7XG4gICAgICAgIHJldHVybiBEYXRlLm5vdygpIC0gdGhpcy5zdGFydFRpbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIG5vdyBhbmQgdGhlIHN0YXJ0IHRpbWVcbiAgICAgKiBzdG9wcyB0aGUgVGltZVdhdGNoXG4gICAgICovXG4gICAgc3RvcCgpOiBudW1iZXIge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmNoZWNrKCk7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBBc3luYyBNZXRob2QgZGVjb3JhdG9yIHRvIGxvZyB0aGUgaW5wdXQgYW5kIG91dHB1dCBvZiB0aGF0IG1ldGhvZFxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbGV2ZWxdIExvZ2dpbmcgTGV2ZWwgYXMgaW4ge0BsaW5rIExPR0dFUl9MRVZFTFN9IGRlZmF1bHRzIHRvIHtAbGluayBMT0dHRVJfTEVWRUxTLkRFQlVHfVxuICogQHBhcmFtIHtib29sZWFufSBbYmVuY2htYXJrXSBkZXRlcm1pbmVzIGlmIHRoZSBsb2dnaW5nIGluY2x1ZGVzIHRoZSBkdXJhdGlvbiBpbiBtcy4gZGVmYXVsdHMgdG8gZmFsc2VcbiAqXG4gKiBAZGVjb3JhdG9yIGxvZ0FzeW5jXG4gKlxuICogQGNhdGVnb3J5IERlY29yYXRvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvZ0FzeW5jKGxldmVsOiBudW1iZXIgfCBib29sZWFuID0gTE9HR0VSX0xFVkVMUy5ERUJVRywgYmVuY2htYXJrPzogYm9vbGVhbikge1xuXG4gICAgaWYgKCFiZW5jaG1hcmsgJiYgdHlwZW9mIGxldmVsID09PSAnYm9vbGVhbicpe1xuICAgICAgICBiZW5jaG1hcmsgPSBsZXZlbDtcbiAgICAgICAgbGV2ZWwgPSBMT0dHRVJfTEVWRUxTLkRFQlVHO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0OiBhbnksIHByb3BlcnR5S2V5OiBzdHJpbmcsIGRlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvcikge1xuXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsTWV0aG9kID0gZGVzY3JpcHRvci52YWx1ZTtcblxuICAgICAgICBjb25zdCBtZXRob2RXcmFwcGVyID0gZnVuY3Rpb24odGhpczogYW55LCAuLi5hcmdzOiBhbnlbXSl7XG4gICAgICAgICAgICBsZXQgY2FsbGJhY2s6IENhbGxiYWNrID0gYXJncy5wb3AoKTtcbiAgICAgICAgICAgIGlmICghY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBDcml0aWNhbEVycm9yKGBNaXNzaW5nIENhbGxiYWNrYCk7XG5cbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLm5hbWUgJiYgdGhpcy5uYW1lICE9PSAnRnVuY3Rpb24nID8gdGhpcy5uYW1lIDogdGhpcy5jb25zdHJ1Y3RvciAmJiB0aGlzLmNvbnN0cnVjdG9yLm5hbWUgfHwgdGhpcztcbiAgICAgICAgICAgIGdldExvZ2dlcigpLnJlcG9ydChgW3swfV0gLSBFbnRlcmluZyBNZXRob2QgezF9IHdpdGggYXJnczogezJ9YCwgbGV2ZWwgYXMgbnVtYmVyLCBuYW1lLCBwcm9wZXJ0eUtleSwgYXJncy5tYXAoYSA9PiBhLnRvU3RyaW5nKCkpLmpvaW4oJyB8ICcpKTtcblxuICAgICAgICAgICAgbGV0IHN0b3BXYXRjaDogU3RvcFdhdGNoO1xuXG4gICAgICAgICAgICBjb25zdCBjYiA9IChlcnI6IEVyciwgLi4ucmVzdWx0czogYW55W10pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc3RvcFdhdGNoKVxuICAgICAgICAgICAgICAgICAgICBnZXRMb2dnZXIoKS5yZXBvcnQoYFt7MH1dW0JFTkNITUFSS10gLSBMZWF2aW5nIE1ldGhvZCB7MX0gYWZ0ZXIgezJ9bXNgLCBsZXZlbCBhcyBudW1iZXIsIG5hbWUsIHByb3BlcnR5S2V5LCBzdG9wV2F0Y2guc3RvcCgpKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKXtcbiAgICAgICAgICAgICAgICAgICAgZ2V0TG9nZ2VyKCkucmVwb3J0KGBbezB9XVtFUlJPUl0gLSBMZWF2aW5nIE1ldGhvZCB7MX0gd2l0aCBlcnJvciB7Mn1gLCBsZXZlbCBhcyBudW1iZXIsIG5hbWUsIHByb3BlcnR5S2V5LCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBnZXRMb2dnZXIoKS5yZXBvcnQoYFt7MH1dIC0gTGVhdmluZyBNZXRob2QgezF9IHdpdGggcmVzdWx0czogezJ9YCwgbGV2ZWwgYXMgbnVtYmVyLCBuYW1lLCBwcm9wZXJ0eUtleSwgcmVzdWx0cyA/IHJlc3VsdHMubWFwKGEgPT4gYS50b1N0cmluZygpKS5qb2luKCcgfCAnKSA6IFwidm9pZFwiKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIC4uLnJlc3VsdHMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYmVuY2htYXJrKXtcbiAgICAgICAgICAgICAgICBzdG9wV2F0Y2ggPSBuZXcgU3RvcFdhdGNoKCk7XG4gICAgICAgICAgICAgICAgc3RvcFdhdGNoLnN0YXJ0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG9yaWdpbmFsTWV0aG9kLmNhbGwodGhpcy5fX29yaWdpbmFsT2JqZWN0IHx8IHRoaXMsIC4uLmFyZ3MsIGNiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlc2NyaXB0b3IudmFsdWUgPSBtZXRob2RXcmFwcGVyO1xuICAgIH1cbn1cblxuLyoqXG4gKiBTeW5jIE1ldGhvZCBkZWNvcmF0b3IgdG8gbG9nIHRoZSBpbnB1dCBhbmQgb3V0cHV0IG9mIHRoYXQgbWV0aG9kXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtsZXZlbF0gTG9nZ2luZyBMZXZlbCBhcyBpbiB7QGxpbmsgTE9HR0VSX0xFVkVMU30gZGVmYXVsdHMgdG8ge0BsaW5rIExPR0dFUl9MRVZFTFMuREVCVUd9XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtiZW5jaG1hcmtdIGRldGVybWluZXMgaWYgdGhlIGxvZ2dpbmcgaW5jbHVkZXMgdGhlIGR1cmF0aW9uIGluIG1zLiBkZWZhdWx0cyB0byBmYWxzZVxuICpcbiAqIEBkZWNvcmF0b3IgbG9nU3luY1xuICpcbiAqIEBjYXRlZ29yeSBEZWNvcmF0b3JzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2dTeW5jKGxldmVsOiBudW1iZXIgfCBib29sZWFuID0gTE9HR0VSX0xFVkVMUy5ERUJVRywgYmVuY2htYXJrPzogYm9vbGVhbikge1xuXG4gICAgaWYgKCFiZW5jaG1hcmsgJiYgdHlwZW9mIGxldmVsID09PSAnYm9vbGVhbicpe1xuICAgICAgICBiZW5jaG1hcmsgPSBsZXZlbDtcbiAgICAgICAgbGV2ZWwgPSBMT0dHRVJfTEVWRUxTLkRFQlVHO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0OiBhbnksIHByb3BlcnR5S2V5OiBzdHJpbmcsIGRlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvcikge1xuXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsTWV0aG9kID0gZGVzY3JpcHRvci52YWx1ZTtcblxuICAgICAgICBjb25zdCBtZXRob2RXcmFwcGVyID0gZnVuY3Rpb24odGhpczogYW55LCAuLi5hcmdzOiBhbnlbXSl7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5uYW1lICYmIHRoaXMubmFtZSAhPT0gJ0Z1bmN0aW9uJyA/IHRoaXMubmFtZSA6IHRoaXMuY29uc3RydWN0b3IgJiYgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lIHx8IHRoaXM7XG5cbiAgICAgICAgICAgIGdldExvZ2dlcigpLnJlcG9ydChgW3swfV0gLSBFbnRlcmluZyBNZXRob2QgezF9IHdpdGggYXJnczogezJ9YCwgbGV2ZWwgYXMgbnVtYmVyLCBuYW1lLCBwcm9wZXJ0eUtleSwgYXJncy5tYXAoYSA9PiBhLnRvU3RyaW5nKCkpLmpvaW4oJyB8ICcpKTtcbiAgICAgICAgICAgIGxldCBzdG9wV2F0Y2g6IFN0b3BXYXRjaCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgICAgIGlmIChiZW5jaG1hcmspe1xuICAgICAgICAgICAgICAgIHN0b3BXYXRjaCA9IG5ldyBTdG9wV2F0Y2goKTtcbiAgICAgICAgICAgICAgICBzdG9wV2F0Y2guc3RhcnQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBvcmlnaW5hbE1ldGhvZC5jYWxsKHRoaXMuX19vcmlnaW5hbE9iamVjdCB8fCB0aGlzLCAuLi5hcmdzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RvcFdhdGNoKVxuICAgICAgICAgICAgICAgICAgICBnZXRMb2dnZXIoKS5yZXBvcnQoYFt7MH1dW0JFTkNITUFSS10gLSBMZWF2aW5nIE1ldGhvZCB7MX0gYWZ0ZXIgezJ9bXNgLCBsZXZlbCBhcyBudW1iZXIsIG5hbWUsIHByb3BlcnR5S2V5LCBzdG9wV2F0Y2guc3RvcCgpKTtcbiAgICAgICAgICAgICAgICBnZXRMb2dnZXIoKS5yZXBvcnQoYFt7MH1dW0VSUk9SXSAtIExlYXZpbmcgTWV0aG9kIHsxfSB3aXRoIGVycm9yIHsyfWAsIGxldmVsIGFzIG51bWJlciwgbmFtZSwgcHJvcGVydHlLZXksIGUpO1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RvcFdhdGNoKVxuICAgICAgICAgICAgICAgIGdldExvZ2dlcigpLnJlcG9ydChgW3swfV1bQkVOQ0hNQVJLXSAtIExlYXZpbmcgTWV0aG9kIHsxfSBhZnRlciB7Mn1tc2AsIGxldmVsIGFzIG51bWJlciwgbmFtZSwgcHJvcGVydHlLZXksIHN0b3BXYXRjaC5zdG9wKCkpO1xuICAgICAgICAgICAgZ2V0TG9nZ2VyKCkucmVwb3J0KGBbezB9XSAtIExlYXZpbmcgTWV0aG9kIHsxfSB3aXRoIHJlc3VsdHM6IHsyfWAsIGxldmVsIGFzIG51bWJlciwgbmFtZSwgcHJvcGVydHlLZXksIHJlc3VsdCA/IHJlc3VsdCA6IFwidm9pZFwiKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cblxuICAgICAgICBkZXNjcmlwdG9yLnZhbHVlID0gbWV0aG9kV3JhcHBlcjtcbiAgICB9XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19leHBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2V4cG9ydFN0YXIpIHx8IGZ1bmN0aW9uKG0sIGV4cG9ydHMpIHtcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGV4cG9ydHMsIHApKSBfX2NyZWF0ZUJpbmRpbmcoZXhwb3J0cywgbSwgcCk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vbG9nZ2luZ1wiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZGVjb3JhdG9yc1wiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vdXRpbHNcIiksIGV4cG9ydHMpOyIsImltcG9ydCB7REVGQVVMVF9USU1FU1RBTVBfRk9STUFULCBMT0dHRVJfTEVWRUxTLCBMT0dHSU5HX01TR30gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQge0xvZ2dlZEVycm9yfSBmcm9tIFwiLi4vZXJyb3JzXCI7XG5pbXBvcnQge2Zvcm1hdERhdGUsIHN0cmluZ0Zvcm1hdH0gZnJvbSBcIi4vdXRpbHNcIjtcblxuLyoqXG4gKiBAdHlwZWRlZiBMb2dnZXJNZXNzYWdlXG4gKiBAbWVtYmVyT2YgbG9nZ2luZy5sb2dnaW5nXG4gKi9cbmV4cG9ydCB0eXBlIExvZ2dlck1lc3NhZ2UgPSBFcnJvciB8IHN0cmluZztcblxuLyoqXG4gKiBAaW50ZXJmYWNlIExvZ2dlclxuICogQG1lbWJlck9mIGxvZ2dpbmcubG9nZ2luZ1xuICovXG5leHBvcnQgaW50ZXJmYWNlIExvZ2dlciB7XG4gICAgLyoqXG4gICAgICogUmVwb3J0cyBhIG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGV2ZWxcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBMb2dnZXJcbiAgICAgKi9cbiAgICByZXBvcnQobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgbGV2ZWw6IG51bWJlciwgLi4uYXJnczogYW55W10pOiB2b2lkO1xuICAgIC8qKlxuICAgICAqIHtAbGluayBMb2dnZXIjcmVwb3J0fXMgYSBtZXNzYWdlIHVuZGVyIHtAbGluayBMT0dHRVJfTEVWRUxTLkFMTH1cbiAgICAgKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBMb2dnZXJcbiAgICAgKi9cbiAgICBhbGwobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pOiB2b2lkO1xuICAgIC8qKlxuICAgICAqIHtAbGluayBMb2dnZXIjcmVwb3J0fXMgYSBtZXNzYWdlIHVuZGVyIHtAbGluayBMT0dHRVJfTEVWRUxTLklORk99XG4gICAgICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHthbnlbXX0gW2FyZ3NdXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgTG9nZ2VyXG4gICAgICovXG4gICAgaW5mbyhtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG4gICAgLyoqXG4gICAgICoge0BsaW5rIExvZ2dlciNyZXBvcnR9cyBhIG1lc3NhZ2UgdW5kZXIge0BsaW5rIExPR0dFUl9MRVZFTFMuREVCVUd9XG4gICAgICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHthbnlbXX0gW2FyZ3NdXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgTG9nZ2VyXG4gICAgICovXG4gICAgZGVidWcobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pOiB2b2lkO1xuICAgIC8qKlxuICAgICAqIHtAbGluayBMb2dnZXIjcmVwb3J0fXMgYSBtZXNzYWdlIHVuZGVyIHtAbGluayBMT0dHRVJfTEVWRUxTLldBUk59XG4gICAgICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHthbnlbXX0gW2FyZ3NdXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgTG9nZ2VyXG4gICAgICovXG4gICAgd2FybihtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG4gICAgLyoqXG4gICAgICoge0BsaW5rIExvZ2dlciNyZXBvcnR9cyBhIG1lc3NhZ2UgdW5kZXIge0BsaW5rIExPR0dFUl9MRVZFTFMuRVJST1J9XG4gICAgICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHthbnlbXX0gW2FyZ3NdXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgTG9nZ2VyXG4gICAgICovXG4gICAgZXJyb3IobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pOiB2b2lkO1xuICAgIC8qKlxuICAgICAqIHtAbGluayBMb2dnZXIjcmVwb3J0fXMgYSBtZXNzYWdlIHVuZGVyIHtAbGluayBMT0dHRVJfTEVWRUxTLkNSSVRJQ0FMfVxuICAgICAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICAgICAqXG4gICAgICogQG1lbWJlck9mIExvZ2dlclxuICAgICAqL1xuICAgIGNyaXRpY2FsKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKTogdm9pZDtcbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIHRoZSBMb2dnZXIgbGV2ZWxcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZXZlbFxuICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBMb2dnZXJcbiAgICAgKi9cbiAgICBzZXRMZXZlbChsZXZlbDogbnVtYmVyLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG59XG5cbi8qKlxuICogRGVmYXVsdCBMb2dnZXIgSW1wbGVtZW50YXRpb25cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gZGVmYXVsdExldmVsIGRlZmF1bHRzIHRvIHtAbGluayBMT0dHRVJfTEVWRUxTLklORk99XG4gKiBAcGFyYW0ge2Jvb2xlYW59IHVzZVRpbWVzdGFtcCBkZWZhdWx0cyB0byB0cnVlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGxvZ0xldmVsXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGxvZ1N0YWNrVHJhY2VcbiAqIEBwYXJhbSB7c3RyaW5nfSB0aW1lc3RhbXBGb3JtYXRcbiAqXG4gKiBAY2xhc3MgTG9nZ2VySW1wXG4gKiBAaW1wbGVtZW50cyBMb2dnZXJcbiAqL1xuZXhwb3J0IGNsYXNzIExvZ2dlckltcCBpbXBsZW1lbnRzIExvZ2dlciB7XG4gICAgcHJpdmF0ZSBsZXZlbDogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSB1c2VUaW1lc3RhbXA6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSByZWFkb25seSBsb2dMZXZlbDogYm9vbGVhbjtcbiAgICBwcml2YXRlIHJlYWRvbmx5IHRpbWVzdGFtcEZvcm1hdDogc3RyaW5nO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgbG9nU3RhY2tUcmFjZTogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKGRlZmF1bHRMZXZlbDogbnVtYmVyID0gTE9HR0VSX0xFVkVMUy5JTkZPLCB1c2VUaW1lc3RhbXAgPSB0cnVlLCBsb2dMZXZlbDogYm9vbGVhbiA9IHRydWUsIGxvZ1N0YWNrVHJhY2U6IGJvb2xlYW4gPSBmYWxzZSwgdGltZXN0YW1wRm9ybWF0ID0gREVGQVVMVF9USU1FU1RBTVBfRk9STUFUKXtcbiAgICAgICAgdGhpcy5sZXZlbCA9IGRlZmF1bHRMZXZlbDtcbiAgICAgICAgdGhpcy51c2VUaW1lc3RhbXAgPSB1c2VUaW1lc3RhbXA7XG4gICAgICAgIHRoaXMubG9nTGV2ZWwgPSBsb2dMZXZlbDtcbiAgICAgICAgdGhpcy5sb2dTdGFja1RyYWNlID0gbG9nU3RhY2tUcmFjZTtcbiAgICAgICAgdGhpcy50aW1lc3RhbXBGb3JtYXQgPSB0aW1lc3RhbXBGb3JtYXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQnVpbHRzIHRoZSBhY3R1YWwgbG9nZ2luZyBtZXNzYWdlXG4gICAgICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxvZ0xldmVsIGlmIHRoZSBsZXZlbCBpcyB0byBiZSBsb2dnZWRcbiAgICAgKiBAcGFyYW0ge2FueX0gaXNzdWVyIHdobyBpcyBsb2dnaW5nIHRoZSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgYnVpbGRNZXNzYWdlKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGxvZ0xldmVsOiBudW1iZXIsIGlzc3VlcjogYW55ID0gdW5kZWZpbmVkLCAuLi5hcmdzOiBhbnlbXSl7XG4gICAgICAgIGxldCBzdGFja3NUcmFjZTogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEVycm9yKXtcbiAgICAgICAgICAgIHN0YWNrc1RyYWNlID0gbWVzc2FnZS5zdGFjaztcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlLm1lc3NhZ2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5sb2dMZXZlbClcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgWyR7T2JqZWN0LmtleXMoTE9HR0VSX0xFVkVMUylbbG9nTGV2ZWxdfV0gLSAke21lc3NhZ2V9YDtcbiAgICAgICAgaWYgKGlzc3VlcilcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgWyR7aXNzdWVyLnRvU3RyaW5nKCl9XSR7bWVzc2FnZX1gO1xuICAgICAgICBpZiAodGhpcy51c2VUaW1lc3RhbXApXG4gICAgICAgICAgICBtZXNzYWdlID0gYFske2Zvcm1hdERhdGUobmV3IERhdGUoKSwgdGhpcy50aW1lc3RhbXBGb3JtYXQpfV0ke21lc3NhZ2V9YDtcbiAgICAgICAgcmV0dXJuIHN0cmluZ0Zvcm1hdChtZXNzYWdlLCAuLi5hcmdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZXZlbCBkZWZhdWx0cyB0byB7QGxpbmsgTE9HR0VSX0xFVkVMUy5JTkZPfVxuICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAgICAgKi9cbiAgICByZXBvcnQobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgbGV2ZWw6IG51bWJlciA9IExPR0dFUl9MRVZFTFMuSU5GTywgLi4uYXJnczogYW55W10pIDogdm9pZCB7XG4gICAgICAgIGlmIChsZXZlbCA8IHRoaXMubGV2ZWwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgTG9nZ2VkRXJyb3IgJiYgbWVzc2FnZS5sb2dnZWQpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgbGV0IHJlcG9ydE1ldGhvZDogRnVuY3Rpb247XG4gICAgICAgIHN3aXRjaCAobGV2ZWwpe1xuICAgICAgICAgICAgY2FzZSBMT0dHRVJfTEVWRUxTLldBUk46XG4gICAgICAgICAgICAgICAgcmVwb3J0TWV0aG9kID0gY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBMT0dHRVJfTEVWRUxTLkVSUk9SOlxuICAgICAgICAgICAgY2FzZSBMT0dHRVJfTEVWRUxTLkNSSVRJQ0FMOlxuICAgICAgICAgICAgICAgIHJlcG9ydE1ldGhvZCA9IGNvbnNvbGUuZXJyb3I7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIExPR0dFUl9MRVZFTFMuSU5GTzpcbiAgICAgICAgICAgIGNhc2UgTE9HR0VSX0xFVkVMUy5ERUJVRzpcbiAgICAgICAgICAgIGNhc2UgTE9HR0VSX0xFVkVMUy5BTEw6XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJlcG9ydE1ldGhvZCA9IGNvbnNvbGUubG9nO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGZpbmFsTWVzc2FnZSA9IHRoaXMuYnVpbGRNZXNzYWdlKG1lc3NhZ2UsIGxldmVsLCB1bmRlZmluZWQsIC4uLmFyZ3MpO1xuICAgICAgICByZXBvcnRNZXRob2QoZmluYWxNZXNzYWdlKTtcblxuICAgICAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEVycm9yICYmIG1lc3NhZ2Uuc3RhY2sgJiYgdGhpcy5sb2dTdGFja1RyYWNlKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgICAgICAgICAgcmVwb3J0TWV0aG9kKHRoaXMuYnVpbGRNZXNzYWdlKGBcXG4tLSBTdGFja1N0cmFjZTpcXG4ke21lc3NhZ2Uuc3RhY2t9YCwgbGV2ZWwpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgTG9nZ2VkRXJyb3IpXG4gICAgICAgICAgICBtZXNzYWdlLmxvZ2dlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICBpbmZvKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVwb3J0KG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuSU5GTywgLi4uYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgYWxsKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVwb3J0KG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuQUxMLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICBkZWJ1ZyhtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlcG9ydChtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLkRFQlVHLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICB3YXJuKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVwb3J0KG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuV0FSTiwgLi4uYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgZXJyb3IobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXBvcnQobWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5FUlJPUiwgLi4uYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgY3JpdGljYWwobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXBvcnQobWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5DUklUSUNBTCwgLi4uYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgc2V0TGV2ZWwobGV2ZWw6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLmRlYnVnKHN0cmluZ0Zvcm1hdChMT0dHSU5HX01TRy5MRVZFTF9DSEFOR0VELCB0aGlzLmxldmVsLnRvU3RyaW5nKCksIGxldmVsLnRvU3RyaW5nKCkpKTtcbiAgICAgICAgdGhpcy5sZXZlbCA9IGxldmVsO1xuICAgIH1cbn1cblxubGV0IGN1cnJlbnRMb2dnZXI6IExvZ2dlcjtcblxuLyoqXG4gKiBnZXRzIHRoZSBjdXJyZW50IExvZ2dlclxuICpcbiAqIEBmdW5jdGlvbiBnZXRMb2dnZXJcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2dnZXIoKXtcbiAgICBpZiAoIWN1cnJlbnRMb2dnZXIpXG4gICAgICAgIGN1cnJlbnRMb2dnZXIgPSBuZXcgTG9nZ2VySW1wKCk7XG4gICAgcmV0dXJuIGN1cnJlbnRMb2dnZXI7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgbG9nZ2VyXG4gKlxuICogQHBhcmFtIHtMb2dnZXJ9IGxvZ2dlclxuICpcbiAqIEBmdW5jdGlvbiBzZXRMb2dnZXJcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRMb2dnZXIobG9nZ2VyOiBMb2dnZXIpe1xuICAgIGN1cnJlbnRMb2dnZXIgPSBsb2dnZXI7XG4gICAgZ2V0TG9nZ2VyKCkuZGVidWcoTE9HR0lOR19NU0cuTE9HR0VSX0NIQU5HRUQpO1xufVxuXG4vKipcbiAqIFJlcG9ydHMgYSBtZXNzYWdlIHRvIHRoZSBsb2dnZXIgdW5kZXIgdGhlIGxldmVsIHtAbGluayBMT0dHRVJfTEVWRUxTLklORk99XG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAqXG4gKiBAZnVuY3Rpb24gaW5mb1xuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IGluZm8gPSAobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pID0+IGdldExvZ2dlcigpLmluZm8obWVzc2FnZSwgLi4uYXJncyk7XG4vKipcbiAqIFJlcG9ydHMgYSBtZXNzYWdlIHRvIHRoZSBsb2dnZXIgdW5kZXIgdGhlIGxldmVsIHtAbGluayBMT0dHRVJfTEVWRUxTLkFMTH1cbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICpcbiAqIEBmdW5jdGlvbiBhbGxcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBjb25zdCBhbGwgPSAobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pID0+IGdldExvZ2dlcigpLmFsbChtZXNzYWdlLCAuLi5hcmdzKTtcbi8qKlxuICogUmVwb3J0cyBhIG1lc3NhZ2UgdG8gdGhlIGxvZ2dlciB1bmRlciB0aGUgbGV2ZWwge0BsaW5rIExPR0dFUl9MRVZFTFMuREVCVUd9XG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAqXG4gKiBAZnVuY3Rpb24gZGVidWdcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBjb25zdCBkZWJ1ZyA9IChtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSkgPT4gZ2V0TG9nZ2VyKCkuZGVidWcobWVzc2FnZSwgLi4uYXJncyk7XG4vKipcbiAqIFJlcG9ydHMgYSBtZXNzYWdlIHRvIHRoZSBsb2dnZXIgdW5kZXIgdGhlIGxldmVsIHtAbGluayBMT0dHRVJfTEVWRUxTLldBUk59XG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAqXG4gKiBAZnVuY3Rpb24gd2FyblxuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IHdhcm4gPSAobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pID0+IGdldExvZ2dlcigpLndhcm4obWVzc2FnZSwgLi4uYXJncyk7XG4vKipcbiAqIFJlcG9ydHMgYSBtZXNzYWdlIHRvIHRoZSBsb2dnZXIgdW5kZXIgdGhlIGxldmVsIHtAbGluayBMT0dHRVJfTEVWRUxTLkVSUk9SfVxuICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gKiBAcGFyYW0ge2FueVtdfSBhcmdzXG4gKlxuICogQGZ1bmN0aW9uIGVycm9yXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMubG9nZ2luZ1xuICovXG5leHBvcnQgY29uc3QgZXJyb3IgPSAobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pID0+IGdldExvZ2dlcigpLmVycm9yKG1lc3NhZ2UsIC4uLmFyZ3MpO1xuLyoqXG4gKiBSZXBvcnRzIGEgbWVzc2FnZSB0byB0aGUgbG9nZ2VyIHVuZGVyIHRoZSBsZXZlbCB7QGxpbmsgTE9HR0VSX0xFVkVMUy5DUklUSUNBTH1cbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICpcbiAqIEBmdW5jdGlvbiBjcml0aWNhbFxuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IGNyaXRpY2FsID0gKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKSA9PiBnZXRMb2dnZXIoKS5jcml0aWNhbChtZXNzYWdlLCAuLi5hcmdzKTsiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20sIHBhY2spIHtcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY3JpdGljYWwgPSBleHBvcnRzLmVycm9yID0gZXhwb3J0cy53YXJuID0gZXhwb3J0cy5kZWJ1ZyA9IGV4cG9ydHMuYWxsID0gZXhwb3J0cy5pbmZvID0gZXhwb3J0cy5zZXRMb2dnZXIgPSBleHBvcnRzLmdldExvZ2dlciA9IGV4cG9ydHMuTG9nZ2VySW1wID0gdm9pZCAwO1xudmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4vY29uc3RhbnRzXCIpO1xudmFyIGVycm9yc18xID0gcmVxdWlyZShcIi4uL2Vycm9yc1wiKTtcbnZhciB1dGlsc18xID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG52YXIgTG9nZ2VySW1wID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBMb2dnZXJJbXAoZGVmYXVsdExldmVsLCB1c2VUaW1lc3RhbXAsIGxvZ0xldmVsLCBsb2dTdGFja1RyYWNlLCB0aW1lc3RhbXBGb3JtYXQpIHtcbiAgICAgICAgaWYgKGRlZmF1bHRMZXZlbCA9PT0gdm9pZCAwKSB7IGRlZmF1bHRMZXZlbCA9IGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuSU5GTzsgfVxuICAgICAgICBpZiAodXNlVGltZXN0YW1wID09PSB2b2lkIDApIHsgdXNlVGltZXN0YW1wID0gdHJ1ZTsgfVxuICAgICAgICBpZiAobG9nTGV2ZWwgPT09IHZvaWQgMCkgeyBsb2dMZXZlbCA9IHRydWU7IH1cbiAgICAgICAgaWYgKGxvZ1N0YWNrVHJhY2UgPT09IHZvaWQgMCkgeyBsb2dTdGFja1RyYWNlID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKHRpbWVzdGFtcEZvcm1hdCA9PT0gdm9pZCAwKSB7IHRpbWVzdGFtcEZvcm1hdCA9IGNvbnN0YW50c18xLkRFRkFVTFRfVElNRVNUQU1QX0ZPUk1BVDsgfVxuICAgICAgICB0aGlzLmxldmVsID0gZGVmYXVsdExldmVsO1xuICAgICAgICB0aGlzLnVzZVRpbWVzdGFtcCA9IHVzZVRpbWVzdGFtcDtcbiAgICAgICAgdGhpcy5sb2dMZXZlbCA9IGxvZ0xldmVsO1xuICAgICAgICB0aGlzLmxvZ1N0YWNrVHJhY2UgPSBsb2dTdGFja1RyYWNlO1xuICAgICAgICB0aGlzLnRpbWVzdGFtcEZvcm1hdCA9IHRpbWVzdGFtcEZvcm1hdDtcbiAgICB9XG4gICAgTG9nZ2VySW1wLnByb3RvdHlwZS5idWlsZE1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSwgbG9nTGV2ZWwsIGlzc3Vlcikge1xuICAgICAgICBpZiAoaXNzdWVyID09PSB2b2lkIDApIHsgaXNzdWVyID0gdW5kZWZpbmVkOyB9XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMzsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdGFja3NUcmFjZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgc3RhY2tzVHJhY2UgPSBtZXNzYWdlLnN0YWNrO1xuICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UubWVzc2FnZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5sb2dMZXZlbClcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBcIltcIi5jb25jYXQoT2JqZWN0LmtleXMoY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUylbbG9nTGV2ZWxdLCBcIl0gLSBcIikuY29uY2F0KG1lc3NhZ2UpO1xuICAgICAgICBpZiAoaXNzdWVyKVxuICAgICAgICAgICAgbWVzc2FnZSA9IFwiW1wiLmNvbmNhdChpc3N1ZXIudG9TdHJpbmcoKSwgXCJdXCIpLmNvbmNhdChtZXNzYWdlKTtcbiAgICAgICAgaWYgKHRoaXMudXNlVGltZXN0YW1wKVxuICAgICAgICAgICAgbWVzc2FnZSA9IFwiW1wiLmNvbmNhdCgoMCwgdXRpbHNfMS5mb3JtYXREYXRlKShuZXcgRGF0ZSgpLCB0aGlzLnRpbWVzdGFtcEZvcm1hdCksIFwiXVwiKS5jb25jYXQobWVzc2FnZSk7XG4gICAgICAgIHJldHVybiB1dGlsc18xLnN0cmluZ0Zvcm1hdC5hcHBseSh2b2lkIDAsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2VdLCBhcmdzLCBmYWxzZSkpO1xuICAgIH07XG4gICAgTG9nZ2VySW1wLnByb3RvdHlwZS5yZXBvcnQgPSBmdW5jdGlvbiAobWVzc2FnZSwgbGV2ZWwpIHtcbiAgICAgICAgaWYgKGxldmVsID09PSB2b2lkIDApIHsgbGV2ZWwgPSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLklORk87IH1cbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxldmVsIDwgdGhpcy5sZXZlbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBlcnJvcnNfMS5Mb2dnZWRFcnJvciAmJiBtZXNzYWdlLmxvZ2dlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIHJlcG9ydE1ldGhvZDtcbiAgICAgICAgc3dpdGNoIChsZXZlbCkge1xuICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLldBUk46XG4gICAgICAgICAgICAgICAgcmVwb3J0TWV0aG9kID0gY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkVSUk9SOlxuICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkNSSVRJQ0FMOlxuICAgICAgICAgICAgICAgIHJlcG9ydE1ldGhvZCA9IGNvbnNvbGUuZXJyb3I7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuSU5GTzpcbiAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5ERUJVRzpcbiAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5BTEw6XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJlcG9ydE1ldGhvZCA9IGNvbnNvbGUubG9nO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmaW5hbE1lc3NhZ2UgPSB0aGlzLmJ1aWxkTWVzc2FnZS5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCBsZXZlbCwgdW5kZWZpbmVkXSwgYXJncywgZmFsc2UpKTtcbiAgICAgICAgcmVwb3J0TWV0aG9kKGZpbmFsTWVzc2FnZSk7XG4gICAgICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IgJiYgbWVzc2FnZS5zdGFjayAmJiB0aGlzLmxvZ1N0YWNrVHJhY2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgICAgICAgICAgcmVwb3J0TWV0aG9kKHRoaXMuYnVpbGRNZXNzYWdlKFwiXFxuLS0gU3RhY2tTdHJhY2U6XFxuXCIuY29uY2F0KG1lc3NhZ2Uuc3RhY2spLCBsZXZlbCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgZXJyb3JzXzEuTG9nZ2VkRXJyb3IpXG4gICAgICAgICAgICBtZXNzYWdlLmxvZ2dlZCA9IHRydWU7XG4gICAgfTtcbiAgICBMb2dnZXJJbXAucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcG9ydC5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLklORk9dLCBhcmdzLCBmYWxzZSkpO1xuICAgIH07XG4gICAgTG9nZ2VySW1wLnByb3RvdHlwZS5hbGwgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcG9ydC5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkFMTF0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgfTtcbiAgICBMb2dnZXJJbXAucHJvdG90eXBlLmRlYnVnID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXBvcnQuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheShbbWVzc2FnZSwgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5ERUJVR10sIGFyZ3MsIGZhbHNlKSk7XG4gICAgfTtcbiAgICBMb2dnZXJJbXAucHJvdG90eXBlLndhcm4gPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcG9ydC5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLldBUk5dLCBhcmdzLCBmYWxzZSkpO1xuICAgIH07XG4gICAgTG9nZ2VySW1wLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVwb3J0LmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuRVJST1JdLCBhcmdzLCBmYWxzZSkpO1xuICAgIH07XG4gICAgTG9nZ2VySW1wLnByb3RvdHlwZS5jcml0aWNhbCA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVwb3J0LmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuQ1JJVElDQUxdLCBhcmdzLCBmYWxzZSkpO1xuICAgIH07XG4gICAgTG9nZ2VySW1wLnByb3RvdHlwZS5zZXRMZXZlbCA9IGZ1bmN0aW9uIChsZXZlbCkge1xuICAgICAgICB0aGlzLmRlYnVnKCgwLCB1dGlsc18xLnN0cmluZ0Zvcm1hdCkoY29uc3RhbnRzXzEuTE9HR0lOR19NU0cuTEVWRUxfQ0hBTkdFRCwgdGhpcy5sZXZlbC50b1N0cmluZygpLCBsZXZlbC50b1N0cmluZygpKSk7XG4gICAgICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcbiAgICB9O1xuICAgIHJldHVybiBMb2dnZXJJbXA7XG59KCkpO1xuZXhwb3J0cy5Mb2dnZXJJbXAgPSBMb2dnZXJJbXA7XG52YXIgY3VycmVudExvZ2dlcjtcbmZ1bmN0aW9uIGdldExvZ2dlcigpIHtcbiAgICBpZiAoIWN1cnJlbnRMb2dnZXIpXG4gICAgICAgIGN1cnJlbnRMb2dnZXIgPSBuZXcgTG9nZ2VySW1wKCk7XG4gICAgcmV0dXJuIGN1cnJlbnRMb2dnZXI7XG59XG5leHBvcnRzLmdldExvZ2dlciA9IGdldExvZ2dlcjtcbmZ1bmN0aW9uIHNldExvZ2dlcihsb2dnZXIpIHtcbiAgICBjdXJyZW50TG9nZ2VyID0gbG9nZ2VyO1xuICAgIGdldExvZ2dlcigpLmRlYnVnKGNvbnN0YW50c18xLkxPR0dJTkdfTVNHLkxPR0dFUl9DSEFOR0VEKTtcbn1cbmV4cG9ydHMuc2V0TG9nZ2VyID0gc2V0TG9nZ2VyO1xudmFyIGluZm8gPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHZhciBfYTtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiAoX2EgPSBnZXRMb2dnZXIoKSkuaW5mby5hcHBseShfYSwgX19zcHJlYWRBcnJheShbbWVzc2FnZV0sIGFyZ3MsIGZhbHNlKSk7XG59O1xuZXhwb3J0cy5pbmZvID0gaW5mbztcbnZhciBhbGwgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHZhciBfYTtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiAoX2EgPSBnZXRMb2dnZXIoKSkuYWxsLmFwcGx5KF9hLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlXSwgYXJncywgZmFsc2UpKTtcbn07XG5leHBvcnRzLmFsbCA9IGFsbDtcbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgdmFyIF9hO1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIChfYSA9IGdldExvZ2dlcigpKS5kZWJ1Zy5hcHBseShfYSwgX19zcHJlYWRBcnJheShbbWVzc2FnZV0sIGFyZ3MsIGZhbHNlKSk7XG59O1xuZXhwb3J0cy5kZWJ1ZyA9IGRlYnVnO1xudmFyIHdhcm4gPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHZhciBfYTtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiAoX2EgPSBnZXRMb2dnZXIoKSkud2Fybi5hcHBseShfYSwgX19zcHJlYWRBcnJheShbbWVzc2FnZV0sIGFyZ3MsIGZhbHNlKSk7XG59O1xuZXhwb3J0cy53YXJuID0gd2FybjtcbnZhciBlcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgdmFyIF9hO1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIChfYSA9IGdldExvZ2dlcigpKS5lcnJvci5hcHBseShfYSwgX19zcHJlYWRBcnJheShbbWVzc2FnZV0sIGFyZ3MsIGZhbHNlKSk7XG59O1xuZXhwb3J0cy5lcnJvciA9IGVycm9yO1xudmFyIGNyaXRpY2FsID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICB2YXIgX2E7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gKF9hID0gZ2V0TG9nZ2VyKCkpLmNyaXRpY2FsLmFwcGx5KF9hLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlXSwgYXJncywgZmFsc2UpKTtcbn07XG5leHBvcnRzLmNyaXRpY2FsID0gY3JpdGljYWw7IiwiLyoqXG4gKiBAbmFtZXNwYWNlIGxvZ2dpbmcubG9nZ2luZ1xuICogQG1lbWJlck9mIGxvZ2dpbmdcbiAqL1xuXG5leHBvcnQgKiBmcm9tICcuL2NvbnN0YW50cyc7XG5leHBvcnQgKiBmcm9tICcuL2xvZ2dpbmcnO1xuZXhwb3J0ICogZnJvbSAnLi9kZWNvcmF0b3JzJztcbmV4cG9ydCAqIGZyb20gJy4vdXRpbHMnOyIsIi8qKlxuICogVXRpbCBmdW5jdGlvbiB0byBwcm92aWRlIHN0cmluZyBmb3JtYXQgZnVuY3Rpb25hbGl0eSBzaW1pbGFyIHRvIEMjJ3Mgc3RyaW5nLmZvcm1hdFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBhcmdzIHJlcGxhY2VtZW50cyBtYWRlIGJ5IG9yZGVyIG9mIGFwcGVhcmFuY2UgKHJlcGxhY2VtZW50MCB3aWwgcmVwbGFjZSB7MH0gYW5kIHNvIG9uKVxuICogQHJldHVybiB7c3RyaW5nfSBmb3JtYXR0ZWQgc3RyaW5nXG4gKlxuICogQGZ1bmN0aW9uIHN0cmluZ0Zvcm1hdFxuICpcbiAqIEBtZW1iZXJPZiBsb2dnaW5nLmxvZ2dpbmdcbiAqL1xuaW1wb3J0IHtEQVlTX09GX1dFRUtfTkFNRVMsIE1PTlRIX05BTUVTfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ0Zvcm1hdChzdHJpbmc6IHN0cmluZywgLi4uYXJnczogc3RyaW5nW10pe1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgveyhcXGQrKX0vZywgZnVuY3Rpb24obWF0Y2gsIG51bWJlcikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGFyZ3NbbnVtYmVyXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgID8gYXJnc1tudW1iZXJdXG4gICAgICAgICAgICA6IG1hdGNoO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIERhdGUgRm9ybWF0IEhhbmRsaW5nXG4gKiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zNTUyNDYxL2hvdy10by1mb3JtYXQtYS1qYXZhc2NyaXB0LWRhdGVcbiAqXG4gKiA8cHJlPlxuICogICAgICBVc2luZyBzaW1pbGFyIGZvcm1hdHRpbmcgYXMgTW9tZW50LmpzLCBDbGFzcyBEYXRlVGltZUZvcm1hdHRlciAoSmF2YSksIGFuZCBDbGFzcyBTaW1wbGVEYXRlRm9ybWF0IChKYXZhKSxcbiAqICAgICAgSSBpbXBsZW1lbnRlZCBhIGNvbXByZWhlbnNpdmUgc29sdXRpb24gZm9ybWF0RGF0ZShkYXRlLCBwYXR0ZXJuU3RyKSB3aGVyZSB0aGUgY29kZSBpcyBlYXN5IHRvIHJlYWQgYW5kIG1vZGlmeS5cbiAqICAgICAgWW91IGNhbiBkaXNwbGF5IGRhdGUsIHRpbWUsIEFNL1BNLCBldGMuXG4gKlxuICogICAgICBEYXRlIGFuZCBUaW1lIFBhdHRlcm5zXG4gKiAgICAgIHl5ID0gMi1kaWdpdCB5ZWFyOyB5eXl5ID0gZnVsbCB5ZWFyXG4gKiAgICAgIE0gPSBkaWdpdCBtb250aDsgTU0gPSAyLWRpZ2l0IG1vbnRoOyBNTU0gPSBzaG9ydCBtb250aCBuYW1lOyBNTU1NID0gZnVsbCBtb250aCBuYW1lXG4gKiAgICAgIEVFRUUgPSBmdWxsIHdlZWtkYXkgbmFtZTsgRUVFID0gc2hvcnQgd2Vla2RheSBuYW1lXG4gKiAgICAgIGQgPSBkaWdpdCBkYXk7IGRkID0gMi1kaWdpdCBkYXlcbiAqICAgICAgaCA9IGhvdXJzIGFtL3BtOyBoaCA9IDItZGlnaXQgaG91cnMgYW0vcG07IEggPSBob3VyczsgSEggPSAyLWRpZ2l0IGhvdXJzXG4gKiAgICAgIG0gPSBtaW51dGVzOyBtbSA9IDItZGlnaXQgbWludXRlczsgYWFhID0gQU0vUE1cbiAqICAgICAgcyA9IHNlY29uZHM7IHNzID0gMi1kaWdpdCBzZWNvbmRzXG4gKiAgICAgIFMgPSBtaWxpc2Vjb25kc1xuICogPC9wcmU+XG4gKlxuICogQHBhcmFtIHtEYXRlfSBkYXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gW3BhdHRlcm5TdHJdIGRlZmF1bHRzIHRvICd5eXl5L01NL2RkJ1xuICogQHJldHVybiB7c3RyaW5nfSB0aGUgZm9ybWF0dGVkIGRhdGVcbiAqXG4gKiBAZnVuY3Rpb24gZm9ybWF0RGF0ZVxuICpcbiAqIEBtZW1iZXJPZiBsb2dnaW5nLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSwgcGF0dGVyblN0cjogc3RyaW5nID0gJ3l5eXkvTU0vZGQnKXtcbiAgICBjb25zdCBkYXk6IG51bWJlciA9IGRhdGUuZ2V0RGF0ZSgpLFxuICAgICAgICBtb250aDogbnVtYmVyID0gZGF0ZS5nZXRNb250aCgpLFxuICAgICAgICB5ZWFyOiBudW1iZXIgPSBkYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICAgIGhvdXI6IG51bWJlciA9IGRhdGUuZ2V0SG91cnMoKSxcbiAgICAgICAgbWludXRlOiBudW1iZXIgPSBkYXRlLmdldE1pbnV0ZXMoKSxcbiAgICAgICAgc2Vjb25kOiBudW1iZXIgPSBkYXRlLmdldFNlY29uZHMoKSxcbiAgICAgICAgbWlsaXNlY29uZHM6IG51bWJlciA9IGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCksXG4gICAgICAgIGg6IG51bWJlciA9IGhvdXIgJSAxMixcbiAgICAgICAgaGg6IHN0cmluZyA9IHR3b0RpZ2l0UGFkKGgpLFxuICAgICAgICBISDogc3RyaW5nID0gdHdvRGlnaXRQYWQoaG91ciksXG4gICAgICAgIG1tOiBzdHJpbmcgPSB0d29EaWdpdFBhZChtaW51dGUpLFxuICAgICAgICBzczogc3RyaW5nID0gdHdvRGlnaXRQYWQoc2Vjb25kKSxcbiAgICAgICAgYWFhOiBzdHJpbmcgPSBob3VyIDwgMTIgPyAnQU0nIDogJ1BNJyxcbiAgICAgICAgRUVFRTogc3RyaW5nID0gREFZU19PRl9XRUVLX05BTUVTW2RhdGUuZ2V0RGF5KCldLFxuICAgICAgICBFRUU6IHN0cmluZyA9IEVFRUUuc3Vic3RyKDAsIDMpLFxuICAgICAgICBkZDogc3RyaW5nID0gdHdvRGlnaXRQYWQoZGF5KSxcbiAgICAgICAgTTogbnVtYmVyID0gbW9udGggKyAxLFxuICAgICAgICBNTTogc3RyaW5nID0gdHdvRGlnaXRQYWQoTSksXG4gICAgICAgIE1NTU06IHN0cmluZyA9IE1PTlRIX05BTUVTW21vbnRoXSxcbiAgICAgICAgTU1NIDogc3RyaW5nPSBNTU1NLnN1YnN0cigwLCAzKSxcbiAgICAgICAgeXl5eTogc3RyaW5nID0geWVhciArIFwiXCIsXG4gICAgICAgIHl5OiBzdHJpbmcgPSB5eXl5LnN1YnN0cigyLCAyKVxuICAgIDtcbiAgICAvLyBjaGVja3MgdG8gc2VlIGlmIG1vbnRoIG5hbWUgd2lsbCBiZSB1c2VkXG4gICAgcGF0dGVyblN0ciA9IHBhdHRlcm5TdHJcbiAgICAgICAgLnJlcGxhY2UoJ2hoJywgaGgpLnJlcGxhY2UoJ2gnLCBoLnRvU3RyaW5nKCkpXG4gICAgICAgIC5yZXBsYWNlKCdISCcsIEhIKS5yZXBsYWNlKCdIJywgaG91ci50b1N0cmluZygpKVxuICAgICAgICAucmVwbGFjZSgnbW0nLCBtbSkucmVwbGFjZSgnbScsIG1pbnV0ZS50b1N0cmluZygpKVxuICAgICAgICAucmVwbGFjZSgnc3MnLCBzcykucmVwbGFjZSgncycsIHNlY29uZC50b1N0cmluZygpKVxuICAgICAgICAucmVwbGFjZSgnUycsIG1pbGlzZWNvbmRzLnRvU3RyaW5nKCkpXG4gICAgICAgIC5yZXBsYWNlKCdkZCcsIGRkKS5yZXBsYWNlKCdkJywgZGF5LnRvU3RyaW5nKCkpXG5cbiAgICAgICAgLnJlcGxhY2UoJ0VFRUUnLCBFRUVFKS5yZXBsYWNlKCdFRUUnLCBFRUUpXG4gICAgICAgIC5yZXBsYWNlKCd5eXl5JywgeXl5eSlcbiAgICAgICAgLnJlcGxhY2UoJ3l5JywgeXkpXG4gICAgICAgIC5yZXBsYWNlKCdhYWEnLCBhYWEpO1xuICAgIGlmIChwYXR0ZXJuU3RyLmluZGV4T2YoJ01NTScpID4gLTEpIHtcbiAgICAgICAgcGF0dGVyblN0ciA9IHBhdHRlcm5TdHJcbiAgICAgICAgICAgIC5yZXBsYWNlKCdNTU1NJywgTU1NTSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCdNTU0nLCBNTU0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcGF0dGVyblN0ciA9IHBhdHRlcm5TdHJcbiAgICAgICAgICAgIC5yZXBsYWNlKCdNTScsIE1NKVxuICAgICAgICAgICAgLnJlcGxhY2UoJ00nLCBNLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICByZXR1cm4gcGF0dGVyblN0cjtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IG51bVxuICpcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqXG4gKiBAZnVuY3Rpb24gdHdvRGlnaXRQYWRcbiAqXG4gKiBAbWVtYmVyT2YgbG9nZ2luZy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0d29EaWdpdFBhZChudW06IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIG51bSA8IDEwID8gXCIwXCIgKyBudW0gOiBudW0udG9TdHJpbmcoKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMudHdvRGlnaXRQYWQgPSBleHBvcnRzLmZvcm1hdERhdGUgPSBleHBvcnRzLnN0cmluZ0Zvcm1hdCA9IHZvaWQgMDtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbmZ1bmN0aW9uIHN0cmluZ0Zvcm1hdChzdHJpbmcpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgveyhcXGQrKX0vZywgZnVuY3Rpb24gKG1hdGNoLCBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBhcmdzW251bWJlcl0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICA/IGFyZ3NbbnVtYmVyXVxuICAgICAgICAgICAgOiBtYXRjaDtcbiAgICB9KTtcbn1cbmV4cG9ydHMuc3RyaW5nRm9ybWF0ID0gc3RyaW5nRm9ybWF0O1xuZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlLCBwYXR0ZXJuU3RyKSB7XG4gICAgaWYgKHBhdHRlcm5TdHIgPT09IHZvaWQgMCkgeyBwYXR0ZXJuU3RyID0gJ3l5eXkvTU0vZGQnOyB9XG4gICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF0ZSgpLCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSwgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKSwgaG91ciA9IGRhdGUuZ2V0SG91cnMoKSwgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCksIHNlY29uZCA9IGRhdGUuZ2V0U2Vjb25kcygpLCBtaWxpc2Vjb25kcyA9IGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCksIGggPSBob3VyICUgMTIsIGhoID0gdHdvRGlnaXRQYWQoaCksIEhIID0gdHdvRGlnaXRQYWQoaG91ciksIG1tID0gdHdvRGlnaXRQYWQobWludXRlKSwgc3MgPSB0d29EaWdpdFBhZChzZWNvbmQpLCBhYWEgPSBob3VyIDwgMTIgPyAnQU0nIDogJ1BNJywgRUVFRSA9IGNvbnN0YW50c18xLkRBWVNfT0ZfV0VFS19OQU1FU1tkYXRlLmdldERheSgpXSwgRUVFID0gRUVFRS5zdWJzdHIoMCwgMyksIGRkID0gdHdvRGlnaXRQYWQoZGF5KSwgTSA9IG1vbnRoICsgMSwgTU0gPSB0d29EaWdpdFBhZChNKSwgTU1NTSA9IGNvbnN0YW50c18xLk1PTlRIX05BTUVTW21vbnRoXSwgTU1NID0gTU1NTS5zdWJzdHIoMCwgMyksIHl5eXkgPSB5ZWFyICsgXCJcIiwgeXkgPSB5eXl5LnN1YnN0cigyLCAyKTtcbiAgICBwYXR0ZXJuU3RyID0gcGF0dGVyblN0clxuICAgICAgICAucmVwbGFjZSgnaGgnLCBoaCkucmVwbGFjZSgnaCcsIGgudG9TdHJpbmcoKSlcbiAgICAgICAgLnJlcGxhY2UoJ0hIJywgSEgpLnJlcGxhY2UoJ0gnLCBob3VyLnRvU3RyaW5nKCkpXG4gICAgICAgIC5yZXBsYWNlKCdtbScsIG1tKS5yZXBsYWNlKCdtJywgbWludXRlLnRvU3RyaW5nKCkpXG4gICAgICAgIC5yZXBsYWNlKCdzcycsIHNzKS5yZXBsYWNlKCdzJywgc2Vjb25kLnRvU3RyaW5nKCkpXG4gICAgICAgIC5yZXBsYWNlKCdTJywgbWlsaXNlY29uZHMudG9TdHJpbmcoKSlcbiAgICAgICAgLnJlcGxhY2UoJ2RkJywgZGQpLnJlcGxhY2UoJ2QnLCBkYXkudG9TdHJpbmcoKSlcbiAgICAgICAgLnJlcGxhY2UoJ0VFRUUnLCBFRUVFKS5yZXBsYWNlKCdFRUUnLCBFRUUpXG4gICAgICAgIC5yZXBsYWNlKCd5eXl5JywgeXl5eSlcbiAgICAgICAgLnJlcGxhY2UoJ3l5JywgeXkpXG4gICAgICAgIC5yZXBsYWNlKCdhYWEnLCBhYWEpO1xuICAgIGlmIChwYXR0ZXJuU3RyLmluZGV4T2YoJ01NTScpID4gLTEpIHtcbiAgICAgICAgcGF0dGVyblN0ciA9IHBhdHRlcm5TdHJcbiAgICAgICAgICAgIC5yZXBsYWNlKCdNTU1NJywgTU1NTSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCdNTU0nLCBNTU0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcGF0dGVyblN0ciA9IHBhdHRlcm5TdHJcbiAgICAgICAgICAgIC5yZXBsYWNlKCdNTScsIE1NKVxuICAgICAgICAgICAgLnJlcGxhY2UoJ00nLCBNLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICByZXR1cm4gcGF0dGVyblN0cjtcbn1cbmV4cG9ydHMuZm9ybWF0RGF0ZSA9IGZvcm1hdERhdGU7XG5mdW5jdGlvbiB0d29EaWdpdFBhZChudW0pIHtcbiAgICByZXR1cm4gbnVtIDwgMTAgPyBcIjBcIiArIG51bSA6IG51bS50b1N0cmluZygpO1xufVxuZXhwb3J0cy50d29EaWdpdFBhZCA9IHR3b0RpZ2l0UGFkOyJdfQ==
