"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(r,t,e,o){void 0===o&&(o=e),Object.defineProperty(r,o,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,o){r[o=void 0===o?e:o]=t[e]}),__exportStar=this&&this.__exportStar||function(r,t){for(var e in r)"default"===e||Object.prototype.hasOwnProperty.call(t,e)||__createBinding(t,r,e)},__extends=(Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(require("./errors"),exports),__exportStar(require("./logging"),exports),this&&this.__extends||function(){var o=function(r,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])})(r,t)};return function(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}o(r,t),r.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}()),__spreadArray=this&&this.__spreadArray||function(r,t,e){if(e||2===arguments.length)for(var o,a=0,n=t.length;a<n;a++)!o&&a in t||((o=o||Array.prototype.slice.call(t,0,a))[a]=t[a]);return r.concat(o||Array.prototype.slice.call(t))},logging_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.CriticalError=exports.LoggedError=exports.criticalCallback=exports.errorCallback=exports.warningCallback=exports.infoCallback=exports.debugCallback=exports.allCallback=exports.loggedCallback=void 0,require("../logging"));function loggedCallback(r,t,e){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];e(new(LoggedError.bind.apply(LoggedError,__spreadArray([void 0,r,this&&"loggedCallback"!==this.name?this:void 0,t],o,!1))))}function allCallback(r,t){for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];loggedCallback.call.apply(loggedCallback,__spreadArray([this,r,logging_1.LOGGER_LEVELS.ALL,t],e,!1))}function debugCallback(r,t){for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];loggedCallback.call.apply(loggedCallback,__spreadArray([this,r,logging_1.LOGGER_LEVELS.DEBUG,t],e,!1))}function infoCallback(r,t){for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];loggedCallback.call.apply(loggedCallback,__spreadArray([this,r,logging_1.LOGGER_LEVELS.INFO,t],e,!1))}function warningCallback(r,t){for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];loggedCallback.call.apply(loggedCallback,__spreadArray([this,r,logging_1.LOGGER_LEVELS.WARN,t],e,!1))}function errorCallback(r,t){for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];loggedCallback.call.apply(loggedCallback,__spreadArray([this,r,logging_1.LOGGER_LEVELS.ERROR,t],e,!1))}function criticalCallback(r,t){for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];loggedCallback.call.apply(loggedCallback,__spreadArray([this,r,logging_1.LOGGER_LEVELS.CRITICAL,t],e,!1))}exports.loggedCallback=loggedCallback,exports.allCallback=allCallback,exports.debugCallback=debugCallback,exports.infoCallback=infoCallback,exports.warningCallback=warningCallback,exports.errorCallback=errorCallback,exports.criticalCallback=criticalCallback;var LoggedError=function(i){function r(r,t,e){void 0===t&&(t=void 0),void 0===e&&(e=logging_1.LOGGER_LEVELS.ALL);for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var n=i.call(this,r instanceof Error?r.message:r)||this;return n.name="LoggedError",n.loggedAt=r instanceof Error&&"LoggedError"===r.name?r.loggedAt:void 0,n.issuer=t,(void 0===r.loggedAt||r.loggedAt<e)&&((r=(0,logging_1.getLogger)()).report.apply(r,__spreadArray([n,e,t],o,!1)),n.loggedAt=e),n}return __extends(r,i),r}(Error),CriticalError=function(a){function r(r,t){void 0===t&&(t=void 0);for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];return a.apply(this,__spreadArray([r,t,logging_1.LOGGER_LEVELS.CRITICAL],e,!1))||this}return __extends(r,a),r}(exports.LoggedError=LoggedError),__createBinding=(exports.CriticalError=CriticalError,this&&this.__createBinding||(Object.create?function(r,t,e,o){void 0===o&&(o=e),Object.defineProperty(r,o,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,o){r[o=void 0===o?e:o]=t[e]})),__exportStar=this&&this.__exportStar||function(r,t){for(var e in r)"default"===e||Object.prototype.hasOwnProperty.call(t,e)||__createBinding(t,r,e)},__spreadArray=(Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(require("./errors"),exports),Object.defineProperty(exports,"__esModule",{value:!0}),exports.DAYS_OF_WEEK_NAMES=exports.MONTH_NAMES=exports.DEFAULT_TIMESTAMP_FORMAT=exports.LOGGING_MSG=exports.LOGGER_LEVELS=void 0,exports.LOGGER_LEVELS={ALL:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,CRITICAL:5},exports.LOGGING_MSG={LEVEL_CHANGED:"Logger Level changed from {0} to {1}",LOGGER_CHANGED:"Logger changed"},exports.DEFAULT_TIMESTAMP_FORMAT="dd/MM/yyyy HH:mm:ss:S",exports.MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"],exports.DAYS_OF_WEEK_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this&&this.__spreadArray||function(r,t,e){if(e||2===arguments.length)for(var o,a=0,n=t.length;a<n;a++)!o&&a in t||((o=o||Array.prototype.slice.call(t,0,a))[a]=t[a]);return r.concat(o||Array.prototype.slice.call(t))}),errors_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSync=exports.logAsync=exports.StopWatch=void 0,require("../errors")),logging_1=require("./logging"),constants_1=require("./constants"),StopWatch=function(){function r(){}return r.prototype.start=function(){this.startTime=Date.now()},r.prototype.check=function(){if(!this.startTime)throw new Error("StopWatch didnt start");return Date.now()-this.startTime},r.prototype.stop=function(){var r=this.check();return this.startTime=void 0,r},r}();function logAsync(s,l){return void 0===s&&(s=constants_1.LOGGER_LEVELS.DEBUG),l||"boolean"!=typeof s||(l=s,s=constants_1.LOGGER_LEVELS.DEBUG),function(r,i,t){var e=t.value;t.value=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var o=r.pop();if(!o||"function"!=typeof o)throw new errors_1.CriticalError("Missing Callback");var a,n=this.name&&"Function"!==this.name?this.name:this.constructor&&this.constructor.name||this;(0,logging_1.getLogger)().report("[{0}] - Entering Method {1} with args: {2}",s,n,i,r.map(function(r){return r.toString()}).join(" | "));l&&(a=new StopWatch).start(),e.call.apply(e,__spreadArray(__spreadArray([this.__originalObject||this],r,!1),[function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(a&&(0,logging_1.getLogger)().report("[{0}][BENCHMARK] - Leaving Method {1} after {2}ms",s,n,i,a.stop()),r)return(0,logging_1.getLogger)().report("[{0}][ERROR] - Leaving Method {1} with error {2}",s,n,i,r),o(r);(0,logging_1.getLogger)().report("[{0}] - Leaving Method {1} with results: {2}",s,n,i,t?t.map(function(r){return r.toString()}).join(" | "):"void"),o.apply(void 0,__spreadArray([void 0],t,!1))}],!1))}}}function logSync(s,l){return void 0===s&&(s=constants_1.LOGGER_LEVELS.DEBUG),l||"boolean"!=typeof s||(l=s,s=constants_1.LOGGER_LEVELS.DEBUG),function(r,n,t){var i=t.value;t.value=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e,o=this.name&&"Function"!==this.name?this.name:this.constructor&&this.constructor.name||this,a=((0,logging_1.getLogger)().report("[{0}] - Entering Method {1} with args: {2}",s,o,n,r.map(function(r){return r.toString()}).join(" | ")),void 0);l&&(a=new StopWatch).start();try{e=i.call.apply(i,__spreadArray([this.__originalObject||this],r,!1))}catch(r){throw a&&(0,logging_1.getLogger)().report("[{0}][BENCHMARK] - Leaving Method {1} after {2}ms",s,o,n,a.stop()),(0,logging_1.getLogger)().report("[{0}][ERROR] - Leaving Method {1} with error {2}",s,o,n,r),r}return a&&(0,logging_1.getLogger)().report("[{0}][BENCHMARK] - Leaving Method {1} after {2}ms",s,o,n,a.stop()),(0,logging_1.getLogger)().report("[{0}] - Leaving Method {1} with results: {2}",s,o,n,e||"void"),e}}}exports.StopWatch=StopWatch,exports.logAsync=logAsync,exports.logSync=logSync;var currentLogger,__createBinding=this&&this.__createBinding||(Object.create?function(r,t,e,o){void 0===o&&(o=e),Object.defineProperty(r,o,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,o){r[o=void 0===o?e:o]=t[e]}),__exportStar=this&&this.__exportStar||function(r,t){for(var e in r)"default"===e||Object.prototype.hasOwnProperty.call(t,e)||__createBinding(t,r,e)},__spreadArray=(Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(require("./constants"),exports),__exportStar(require("./logging"),exports),__exportStar(require("./decorators"),exports),__exportStar(require("./utils"),exports),this&&this.__spreadArray||function(r,t,e){if(e||2===arguments.length)for(var o,a=0,n=t.length;a<n;a++)!o&&a in t||((o=o||Array.prototype.slice.call(t,0,a))[a]=t[a]);return r.concat(o||Array.prototype.slice.call(t))}),constants_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.critical=exports.error=exports.warn=exports.debug=exports.all=exports.info=exports.setLogger=exports.getLogger=exports.LoggerImp=void 0,require("./constants")),utils_1=require("./utils"),LoggerImp=function(){function r(r,t,e,o,a){void 0===r&&(r=constants_1.LOGGER_LEVELS.INFO),void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===o&&(o=!1),void 0===a&&(a=constants_1.DEFAULT_TIMESTAMP_FORMAT),this.level=r,this.useTimestamp=t,this.logLevel=e,this.logStackTrace=o,this.timestampFormat=a}return r.prototype.buildMessage=function(r,t,e){void 0===e&&(e=void 0);for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return r instanceof Error&&(r=r.message),e&&(r="[".concat(e.toString(),"]").concat(r)),this.logLevel&&(r="[".concat(Object.keys(constants_1.LOGGER_LEVELS)[t],"] - ").concat(r)),this.useTimestamp&&(r="[".concat((0,utils_1.formatDate)(new Date,this.timestampFormat),"]").concat(r)),utils_1.stringFormat.apply(void 0,__spreadArray([r],o,!1))},r.prototype.report=function(r,t,e){void 0===t&&(t=constants_1.LOGGER_LEVELS.INFO),void 0===e&&(e=void 0);for(var o,a=[],n=3;n<arguments.length;n++)a[n-3]=arguments[n];if(!(t<this.level)){switch(t){case constants_1.LOGGER_LEVELS.WARN:o=console.warn;break;case constants_1.LOGGER_LEVELS.ERROR:case constants_1.LOGGER_LEVELS.CRITICAL:o=console.error;break;case constants_1.LOGGER_LEVELS.INFO:case constants_1.LOGGER_LEVELS.DEBUG:case constants_1.LOGGER_LEVELS.ALL:default:o=console.log}o(this.buildMessage.apply(this,__spreadArray([r,t,e],a,!1))),r instanceof Error&&r.stack&&this.logStackTrace&&o(this.buildMessage("\n-- StackStrace:\n{0}",t,e,r.stack))}},r.prototype.info=function(r,t){void 0===t&&(t=void 0);for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];this.report.apply(this,__spreadArray([r,constants_1.LOGGER_LEVELS.INFO,t],e,!1))},r.prototype.all=function(r,t){void 0===t&&(t=void 0);for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];this.report.apply(this,__spreadArray([r,constants_1.LOGGER_LEVELS.ALL,t],e,!1))},r.prototype.debug=function(r,t){void 0===t&&(t=void 0);for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];this.report.apply(this,__spreadArray([r,constants_1.LOGGER_LEVELS.DEBUG,t],e,!1))},r.prototype.warn=function(r,t){void 0===t&&(t=void 0);for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];this.report.apply(this,__spreadArray([r,constants_1.LOGGER_LEVELS.WARN,t],e,!1))},r.prototype.error=function(r,t){void 0===t&&(t=void 0);for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];this.report.apply(this,__spreadArray([r,constants_1.LOGGER_LEVELS.ERROR,t],e,!1))},r.prototype.critical=function(r,t){void 0===t&&(t=void 0);for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];this.report.apply(this,__spreadArray([r,constants_1.LOGGER_LEVELS.CRITICAL,t],e,!1))},r.prototype.setLevel=function(r){this.debug((0,utils_1.stringFormat)(constants_1.LOGGING_MSG.LEVEL_CHANGED,this.level.toString(),r.toString())),this.level=r},r}();function getLogger(){return currentLogger=currentLogger||new LoggerImp}function setLogger(r){currentLogger=r,getLogger().debug(constants_1.LOGGING_MSG.LOGGER_CHANGED)}exports.LoggerImp=LoggerImp,exports.getLogger=getLogger,exports.setLogger=setLogger;var info=function(r){for(var t,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];(t=getLogger()).info.apply(t,__spreadArray([r,this],e,!1))},all=(exports.info=info,function(r){for(var t,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];(t=getLogger()).all.apply(t,__spreadArray([r,this],e,!1))}),debug=(exports.all=all,function(r){for(var t,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];(t=getLogger()).debug.apply(t,__spreadArray([r,this],e,!1))}),warn=(exports.debug=debug,function(r){for(var t,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];(t=getLogger()).warn.apply(t,__spreadArray([r,this],e,!1))}),error=(exports.warn=warn,function(r){for(var t,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];(t=getLogger()).error.apply(t,__spreadArray([r,this],e,!1))}),critical=(exports.error=error,function(r){for(var t,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];(t=getLogger()).critical.apply(t,__spreadArray([r,this],e,!1))}),constants_1=(exports.critical=critical,Object.defineProperty(exports,"__esModule",{value:!0}),exports.twoDigitPad=exports.formatDate=exports.stringFormat=void 0,require("./constants"));function stringFormat(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return r.replace(/{(\d+)}/g,function(r,t){return void 0!==e[t]?e[t]:r})}function formatDate(r,t){void 0===t&&(t="yyyy/MM/dd");var e=r.getDate(),o=r.getMonth(),a=r.getFullYear(),n=r.getHours(),i=r.getMinutes(),s=r.getSeconds(),c=r.getMilliseconds(),l=n%12,p=twoDigitPad(l),_=twoDigitPad(n),d=twoDigitPad(i),u=twoDigitPad(s),L=n<12?"AM":"PM",r=constants_1.DAYS_OF_WEEK_NAMES[r.getDay()],h=r.substr(0,3),E=twoDigitPad(e),g=o+1,f=twoDigitPad(g),o=constants_1.MONTH_NAMES[o],y=o.substr(0,3),a=a+"",v=a.substr(2,2);return t=-1<(t=t.replace("hh",p).replace("h",l.toString()).replace("HH",_).replace("H",n.toString()).replace("mm",d).replace("m",i.toString()).replace("ss",u).replace("s",s.toString()).replace("S",c.toString()).replace("dd",E).replace("d",e.toString()).replace("EEEE",r).replace("EEE",h).replace("yyyy",a).replace("yy",v).replace("aaa",L)).indexOf("MMM")?t.replace("MMMM",o).replace("MMM",y):t.replace("MM",f).replace("M",g.toString())}function twoDigitPad(r){return r<10?"0"+r:r.toString()}exports.stringFormat=stringFormat,exports.formatDate=formatDate,exports.twoDigitPad=twoDigitPad;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiZXJyb3JzL2Vycm9ycy5qcyIsImluZGV4LnRzIiwiZXJyb3JzL2Vycm9ycy50cyIsImVycm9ycy9pbmRleC5qcyIsImxvZ2dpbmcvZGVjb3JhdG9ycy5qcyIsImVycm9ycy9pbmRleC50cyIsImxvZ2dpbmcvY29uc3RhbnRzLmpzIiwibG9nZ2luZy9jb25zdGFudHMudHMiLCJsb2dnaW5nL2RlY29yYXRvcnMudHMiLCJsb2dnaW5nL2luZGV4LmpzIiwibG9nZ2luZy9sb2dnaW5nLnRzIiwibG9nZ2luZy9sb2dnaW5nLmpzIiwibG9nZ2luZy9pbmRleC50cyIsImxvZ2dpbmcvdXRpbHMudHMiLCJsb2dnaW5nL3V0aWxzLmpzIl0sIm5hbWVzIjpbIl9fY3JlYXRlQmluZGluZyIsInRoaXMiLCJPYmplY3QiLCJjcmVhdGUiLCJvIiwibSIsImsiLCJrMiIsInVuZGVmaW5lZCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIl9fZXhwb3J0U3RhciIsImV4cG9ydHMiLCJwIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiX19leHRlbmRzIiwidmFsdWUiLCJyZXF1aXJlIiwiZXh0ZW5kU3RhdGljcyIsImQiLCJiIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsIlR5cGVFcnJvciIsIlN0cmluZyIsIl9fIiwiY29uc3RydWN0b3IiLCJfX3NwcmVhZEFycmF5IiwidG8iLCJmcm9tIiwicGFjayIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFyIiwiaSIsImwiLCJzbGljZSIsImNvbmNhdCIsImxvZ2dpbmdfMSIsIkNyaXRpY2FsRXJyb3IiLCJMb2dnZWRFcnJvciIsImNyaXRpY2FsQ2FsbGJhY2siLCJlcnJvckNhbGxiYWNrIiwid2FybmluZ0NhbGxiYWNrIiwiaW5mb0NhbGxiYWNrIiwiZGVidWdDYWxsYmFjayIsImFsbENhbGxiYWNrIiwibG9nZ2VkQ2FsbGJhY2siLCJtZXNzYWdlIiwibGV2ZWwiLCJjYWxsYmFjayIsImFyZ3MiLCJfaSIsImJpbmQiLCJhcHBseSIsIm5hbWUiLCJMT0dHRVJfTEVWRUxTIiwiQUxMIiwiREVCVUciLCJJTkZPIiwiV0FSTiIsIkVSUk9SIiwiQ1JJVElDQUwiLCJfc3VwZXIiLCJlcnJvciIsImlzc3VlciIsIl90aGlzIiwiRXJyb3IiLCJsb2dnZWRBdCIsIl9hIiwiZ2V0TG9nZ2VyIiwicmVwb3J0IiwiREFZU19PRl9XRUVLX05BTUVTIiwiTU9OVEhfTkFNRVMiLCJERUZBVUxUX1RJTUVTVEFNUF9GT1JNQVQiLCJMT0dHSU5HX01TRyIsIkxFVkVMX0NIQU5HRUQiLCJMT0dHRVJfQ0hBTkdFRCIsImVycm9yc18xIiwibG9nU3luYyIsImxvZ0FzeW5jIiwiU3RvcFdhdGNoIiwiY29uc3RhbnRzXzEiLCJzdGFydCIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJjaGVjayIsInN0b3AiLCJyZXN1bHQiLCJiZW5jaG1hcmsiLCJ0YXJnZXQiLCJwcm9wZXJ0eUtleSIsImRlc2NyaXB0b3IiLCJvcmlnaW5hbE1ldGhvZCIsInBvcCIsInN0b3BXYXRjaCIsIm1hcCIsImEiLCJ0b1N0cmluZyIsImpvaW4iLCJfX29yaWdpbmFsT2JqZWN0IiwiZXJyIiwicmVzdWx0cyIsImUiLCJjdXJyZW50TG9nZ2VyIiwiY3JpdGljYWwiLCJ3YXJuIiwiZGVidWciLCJhbGwiLCJpbmZvIiwic2V0TG9nZ2VyIiwiTG9nZ2VySW1wIiwidXRpbHNfMSIsImRlZmF1bHRMZXZlbCIsInVzZVRpbWVzdGFtcCIsImxvZ0xldmVsIiwibG9nU3RhY2tUcmFjZSIsInRpbWVzdGFtcEZvcm1hdCIsImJ1aWxkTWVzc2FnZSIsImtleXMiLCJmb3JtYXREYXRlIiwic3RyaW5nRm9ybWF0IiwicmVwb3J0TWV0aG9kIiwiY29uc29sZSIsImxvZyIsInN0YWNrIiwic2V0TGV2ZWwiLCJsb2dnZXIiLCJ0d29EaWdpdFBhZCIsInN0cmluZyIsInJlcGxhY2UiLCJtYXRjaCIsIm51bWJlciIsImRhdGUiLCJwYXR0ZXJuU3RyIiwiZGF5IiwiZ2V0RGF0ZSIsIm1vbnRoIiwiZ2V0TW9udGgiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJob3VyIiwiZ2V0SG91cnMiLCJtaW51dGUiLCJnZXRNaW51dGVzIiwic2Vjb25kIiwiZ2V0U2Vjb25kcyIsIm1pbGlzZWNvbmRzIiwiZ2V0TWlsbGlzZWNvbmRzIiwiaCIsImhoIiwiSEgiLCJtbSIsInNzIiwiYWFhIiwiRUVFRSIsImdldERheSIsIkVFRSIsInN1YnN0ciIsImRkIiwiTSIsIk1NIiwiTU1NTSIsIk1NTSIsInl5eXkiLCJ5eSIsImluZGV4T2YiLCJudW0iXSwibWFwcGluZ3MiOiJhQUNBLElBQUlBLGdCQUFtQkMsTUFBUUEsS0FBS0Qsa0JBQXFCRSxPQUFPQyxPQUFVLFNBQVNDLEVBQUdDLEVBQUdDLEVBQUdDLFFBQzdFQyxJQUFQRCxJQUFrQkEsRUFBS0QsR0FDM0JKLE9BQU9PLGVBQWVMLEVBQUdHLEVBQUksQ0FBRUcsWUFBWSxFQUFNQyxJQUFLLFdBQWEsT0FBT04sRUFBRUMsT0FDMUUsU0FBU0YsRUFBR0MsRUFBR0MsRUFBR0MsR0FFcEJILEVBRHNCRyxPQUFYQyxJQUFQRCxFQUF1QkQsRUFDekJDLEdBQU1GLEVBQUVDLEtBRVZNLGFBQWdCWCxNQUFRQSxLQUFLVyxjQUFpQixTQUFTUCxFQUFHUSxHQUMxRCxJQUFLLElBQUlDLEtBQUtULEVBQWEsWUFBTlMsR0FBb0JaLE9BQU9hLFVBQVVDLGVBQWVDLEtBQUtKLEVBQVNDLElBQUlkLGdCQUFnQmEsRUFBU1IsRUFBR1MsSUNSdkhJLFdEVUpoQixPQUFPTyxlQUFlSSxRQUFTLGFBQWMsQ0FBRU0sT0FBTyxJRVB0RFAsYUFBQVEsUUFBQSxZQUFBUCxTQUNBRCxhQUFBUSxRQUFBLGFBQUFQLFNESmlCWixNQUFRQSxLQUFLaUIsV0FBZSxXQUN6QyxJQUFJRyxFQUFnQixTQUFVQyxFQUFHQyxHQUk3QixPQUhBRixFQUFnQm5CLE9BQU9zQixnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSixFQUFHQyxH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YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fZXhwb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19leHBvcnRTdGFyKSB8fCBmdW5jdGlvbihtLCBleHBvcnRzKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChleHBvcnRzLCBwKSkgX19jcmVhdGVCaW5kaW5nKGV4cG9ydHMsIG0sIHApO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9lcnJvcnNcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2xvZ2dpbmdcIiksIGV4cG9ydHMpOyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20sIHBhY2spIHtcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ3JpdGljYWxFcnJvciA9IGV4cG9ydHMuTG9nZ2VkRXJyb3IgPSBleHBvcnRzLmNyaXRpY2FsQ2FsbGJhY2sgPSBleHBvcnRzLmVycm9yQ2FsbGJhY2sgPSBleHBvcnRzLndhcm5pbmdDYWxsYmFjayA9IGV4cG9ydHMuaW5mb0NhbGxiYWNrID0gZXhwb3J0cy5kZWJ1Z0NhbGxiYWNrID0gZXhwb3J0cy5hbGxDYWxsYmFjayA9IGV4cG9ydHMubG9nZ2VkQ2FsbGJhY2sgPSB2b2lkIDA7XG52YXIgbG9nZ2luZ18xID0gcmVxdWlyZShcIi4uL2xvZ2dpbmdcIik7XG5mdW5jdGlvbiBsb2dnZWRDYWxsYmFjayhtZXNzYWdlLCBsZXZlbCwgY2FsbGJhY2spIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMzsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAzXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHZhciBlcnJvciA9IG5ldyAoTG9nZ2VkRXJyb3IuYmluZC5hcHBseShMb2dnZWRFcnJvciwgX19zcHJlYWRBcnJheShbdm9pZCAwLCBtZXNzYWdlLCB0aGlzICYmIHRoaXMubmFtZSAhPT0gXCJsb2dnZWRDYWxsYmFja1wiID8gdGhpcyA6IHVuZGVmaW5lZCwgbGV2ZWxdLCBhcmdzLCBmYWxzZSkpKSgpO1xuICAgIGNhbGxiYWNrKGVycm9yKTtcbn1cbmV4cG9ydHMubG9nZ2VkQ2FsbGJhY2sgPSBsb2dnZWRDYWxsYmFjaztcbmZ1bmN0aW9uIGFsbENhbGxiYWNrKG1lc3NhZ2UsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBsb2dnZWRDYWxsYmFjay5jYWxsLmFwcGx5KGxvZ2dlZENhbGxiYWNrLCBfX3NwcmVhZEFycmF5KFt0aGlzLCBtZXNzYWdlLCBsb2dnaW5nXzEuTE9HR0VSX0xFVkVMUy5BTEwsIGNhbGxiYWNrXSwgYXJncywgZmFsc2UpKTtcbn1cbmV4cG9ydHMuYWxsQ2FsbGJhY2sgPSBhbGxDYWxsYmFjaztcbmZ1bmN0aW9uIGRlYnVnQ2FsbGJhY2sobWVzc2FnZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwuYXBwbHkobG9nZ2VkQ2FsbGJhY2ssIF9fc3ByZWFkQXJyYXkoW3RoaXMsIG1lc3NhZ2UsIGxvZ2dpbmdfMS5MT0dHRVJfTEVWRUxTLkRFQlVHLCBjYWxsYmFja10sIGFyZ3MsIGZhbHNlKSk7XG59XG5leHBvcnRzLmRlYnVnQ2FsbGJhY2sgPSBkZWJ1Z0NhbGxiYWNrO1xuZnVuY3Rpb24gaW5mb0NhbGxiYWNrKG1lc3NhZ2UsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBsb2dnZWRDYWxsYmFjay5jYWxsLmFwcGx5KGxvZ2dlZENhbGxiYWNrLCBfX3NwcmVhZEFycmF5KFt0aGlzLCBtZXNzYWdlLCBsb2dnaW5nXzEuTE9HR0VSX0xFVkVMUy5JTkZPLCBjYWxsYmFja10sIGFyZ3MsIGZhbHNlKSk7XG59XG5leHBvcnRzLmluZm9DYWxsYmFjayA9IGluZm9DYWxsYmFjaztcbmZ1bmN0aW9uIHdhcm5pbmdDYWxsYmFjayhtZXNzYWdlLCBjYWxsYmFjaykge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgbG9nZ2VkQ2FsbGJhY2suY2FsbC5hcHBseShsb2dnZWRDYWxsYmFjaywgX19zcHJlYWRBcnJheShbdGhpcywgbWVzc2FnZSwgbG9nZ2luZ18xLkxPR0dFUl9MRVZFTFMuV0FSTiwgY2FsbGJhY2tdLCBhcmdzLCBmYWxzZSkpO1xufVxuZXhwb3J0cy53YXJuaW5nQ2FsbGJhY2sgPSB3YXJuaW5nQ2FsbGJhY2s7XG5mdW5jdGlvbiBlcnJvckNhbGxiYWNrKG1lc3NhZ2UsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBsb2dnZWRDYWxsYmFjay5jYWxsLmFwcGx5KGxvZ2dlZENhbGxiYWNrLCBfX3NwcmVhZEFycmF5KFt0aGlzLCBtZXNzYWdlLCBsb2dnaW5nXzEuTE9HR0VSX0xFVkVMUy5FUlJPUiwgY2FsbGJhY2tdLCBhcmdzLCBmYWxzZSkpO1xufVxuZXhwb3J0cy5lcnJvckNhbGxiYWNrID0gZXJyb3JDYWxsYmFjaztcbmZ1bmN0aW9uIGNyaXRpY2FsQ2FsbGJhY2sobWVzc2FnZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwuYXBwbHkobG9nZ2VkQ2FsbGJhY2ssIF9fc3ByZWFkQXJyYXkoW3RoaXMsIG1lc3NhZ2UsIGxvZ2dpbmdfMS5MT0dHRVJfTEVWRUxTLkNSSVRJQ0FMLCBjYWxsYmFja10sIGFyZ3MsIGZhbHNlKSk7XG59XG5leHBvcnRzLmNyaXRpY2FsQ2FsbGJhY2sgPSBjcml0aWNhbENhbGxiYWNrO1xudmFyIExvZ2dlZEVycm9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTG9nZ2VkRXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTG9nZ2VkRXJyb3IoZXJyb3IsIGlzc3VlciwgbGV2ZWwpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoaXNzdWVyID09PSB2b2lkIDApIHsgaXNzdWVyID0gdW5kZWZpbmVkOyB9XG4gICAgICAgIGlmIChsZXZlbCA9PT0gdm9pZCAwKSB7IGxldmVsID0gbG9nZ2luZ18xLkxPR0dFUl9MRVZFTFMuQUxMOyB9XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMzsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogZXJyb3IpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm5hbWUgPSBcIkxvZ2dlZEVycm9yXCI7XG4gICAgICAgIF90aGlzLmxvZ2dlZEF0ID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5uYW1lID09PSAnTG9nZ2VkRXJyb3InID8gZXJyb3IubG9nZ2VkQXQgOiB1bmRlZmluZWQ7XG4gICAgICAgIF90aGlzLmlzc3VlciA9IGlzc3VlcjtcbiAgICAgICAgaWYgKGVycm9yLmxvZ2dlZEF0ID09PSB1bmRlZmluZWQgfHwgZXJyb3IubG9nZ2VkQXQgPCBsZXZlbCkge1xuICAgICAgICAgICAgKF9hID0gKDAsIGxvZ2dpbmdfMS5nZXRMb2dnZXIpKCkpLnJlcG9ydC5hcHBseShfYSwgX19zcHJlYWRBcnJheShbX3RoaXMsIGxldmVsLCBpc3N1ZXJdLCBhcmdzLCBmYWxzZSkpO1xuICAgICAgICAgICAgX3RoaXMubG9nZ2VkQXQgPSBsZXZlbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBMb2dnZWRFcnJvcjtcbn0oRXJyb3IpKTtcbmV4cG9ydHMuTG9nZ2VkRXJyb3IgPSBMb2dnZWRFcnJvcjtcbnZhciBDcml0aWNhbEVycm9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ3JpdGljYWxFcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDcml0aWNhbEVycm9yKGVycm9yLCBpc3N1ZXIpIHtcbiAgICAgICAgaWYgKGlzc3VlciA9PT0gdm9pZCAwKSB7IGlzc3VlciA9IHVuZGVmaW5lZDsgfVxuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3N1cGVyLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW2Vycm9yLCBpc3N1ZXIsIGxvZ2dpbmdfMS5MT0dHRVJfTEVWRUxTLkNSSVRJQ0FMXSwgYXJncywgZmFsc2UpKSB8fCB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gQ3JpdGljYWxFcnJvcjtcbn0oTG9nZ2VkRXJyb3IpKTtcbmV4cG9ydHMuQ3JpdGljYWxFcnJvciA9IENyaXRpY2FsRXJyb3I7IiwiLyoqXG4gKiBAbW9kdWxlIGxvZ2dpbmdcbiAqL1xuXG5leHBvcnQgKiBmcm9tICcuL2Vycm9ycyc7XG5leHBvcnQgKiBmcm9tICcuL2xvZ2dpbmcnOyIsImltcG9ydCB7Q2FsbGJhY2ssIGdldExvZ2dlciwgTE9HR0VSX0xFVkVMUywgTG9nZ2VyTWVzc2FnZX0gZnJvbSBcIi4uL2xvZ2dpbmdcIjtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7bnVtYmVyfSBsZXZlbFxuICogQHBhcmFtIHtDYWxsYmFja30gY2FsbGJhY2tcbiAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICpcbiAqIEBmdW5jdGlvbiBsb2dnZWRDYWxsYmFja1xuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmVycm9yc1xuICovXG5leHBvcnQgZnVuY3Rpb24gbG9nZ2VkQ2FsbGJhY2sodGhpczogYW55LCBtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBsZXZlbDogbnVtYmVyLCBjYWxsYmFjazogQ2FsbGJhY2ssIC4uLmFyZ3M6IGFueVtdKXtcbiAgICBjb25zdCBlcnJvcjogTG9nZ2VkRXJyb3IgPSBuZXcgTG9nZ2VkRXJyb3IobWVzc2FnZSwgdGhpcyAmJiB0aGlzLm5hbWUgIT09IFwibG9nZ2VkQ2FsbGJhY2tcIiA/IHRoaXMgOiB1bmRlZmluZWQsIGxldmVsLCAuLi5hcmdzKTtcbiAgICBjYWxsYmFjayhlcnJvcik7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHtDYWxsYmFja30gY2FsbGJhY2tcbiAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICpcbiAqIEBmdW5jdGlvbiBhbGxDYWxsYmFja1xuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmVycm9yc1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWxsQ2FsbGJhY2sodGhpczogYW55LCBtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBjYWxsYmFjazogQ2FsbGJhY2ssIC4uLmFyZ3M6IGFueVtdKXtcbiAgICBsb2dnZWRDYWxsYmFjay5jYWxsKHRoaXMsIG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuQUxMLCBjYWxsYmFjaywgLi4uYXJncyk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHtDYWxsYmFja30gY2FsbGJhY2tcbiAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICpcbiAqIEBmdW5jdGlvbiBkZWJ1Z0NhbGxiYWNrXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMuZXJyb3JzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWJ1Z0NhbGxiYWNrKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgY2FsbGJhY2s6IENhbGxiYWNrLCAuLi5hcmdzOiBhbnlbXSl7XG4gICAgbG9nZ2VkQ2FsbGJhY2suY2FsbCh0aGlzLCBtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLkRFQlVHLCBjYWxsYmFjaywgLi4uYXJncyk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHtDYWxsYmFja30gY2FsbGJhY2tcbiAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICpcbiAqIEBmdW5jdGlvbiBpbmZvQ2FsbGJhY2tcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5lcnJvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluZm9DYWxsYmFjayh0aGlzOiBhbnksIG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGNhbGxiYWNrOiBDYWxsYmFjaywgLi4uYXJnczogYW55W10pe1xuICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwodGhpcywgbWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5JTkZPLCBjYWxsYmFjaywgLi4uYXJncyk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHtDYWxsYmFja30gY2FsbGJhY2tcbiAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICpcbiAqIEBmdW5jdGlvbiB3YXJuaW5nQ2FsbGJhY2tcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5lcnJvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdhcm5pbmdDYWxsYmFjayh0aGlzOiBhbnksIG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGNhbGxiYWNrOiBDYWxsYmFjaywgLi4uYXJnczogYW55W10pe1xuICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwodGhpcywgbWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5XQVJOLCBjYWxsYmFjaywgLi4uYXJncyk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHtDYWxsYmFja30gY2FsbGJhY2tcbiAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICpcbiAqIEBmdW5jdGlvbiBlcnJvckNhbGxiYWNrXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMuZXJyb3JzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgY2FsbGJhY2s6IENhbGxiYWNrLCAuLi5hcmdzOiBhbnlbXSl7XG4gICAgbG9nZ2VkQ2FsbGJhY2suY2FsbCh0aGlzLCBtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLkVSUk9SLCBjYWxsYmFjaywgLi4uYXJncyk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHtDYWxsYmFja30gY2FsbGJhY2tcbiAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICpcbiAqIEBmdW5jdGlvbiBjcml0aWNhbENhbGxiYWNrXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMuZXJyb3JzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcml0aWNhbENhbGxiYWNrKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgY2FsbGJhY2s6IENhbGxiYWNrLCAuLi5hcmdzOiBhbnlbXSl7XG4gICAgbG9nZ2VkQ2FsbGJhY2suY2FsbCh0aGlzLCBtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLkNSSVRJQ0FMLCBjYWxsYmFjaywgLi4uYXJncyk7XG59XG5cbi8qKlxuICogV3JhcHBlciBDbGFzcyBmb3IgTG9nZ2VkIEVycm9yc1xuICogV2lsbCB0cmlnZ2VyIGEgY2FsbCB0byB0aGUgbG9nZ2VyIGlmIGl0IGhhc24ndCBiZWVuIGxvZ2dlZCBiZWZvcmUgb28gaWYgaXQncyBiZWluZyBjYWxsZWQgYXQgYSBoaWdoZXIgbGV2ZWxcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IGVycm9yXG4gKiBAcGFyYW0ge2FueX0gW2lzc3Vlcl1cbiAqIEBwYXJhbSB7bnVtYmVyfSBsZXZlbCBkZWZhdWx0cyB0byB7QGxpbmsgTE9HR0VSX0xFVkVMUy5FUlJPUn1cbiAqIEBwYXJhbSB7YW55W119IFthcmdzXSBhcmd1bWVudHMgdG8gYmUgcGFzc2VkIGFzIHJlcGxhY2VtZW50cyB0byB0aGUgbG9nZ2VyXG4gKlxuICogQGNsYXNzIExvZ2dlZEVycm9yXG4gKiBAZXh0ZW5kcyBFcnJvclxuICpcbiAqL1xuZXhwb3J0IGNsYXNzIExvZ2dlZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIC8qKlxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsb2dnZWRcbiAgICAgKi9cbiAgICBsb2dnZWRBdD86IG51bWJlcjtcbiAgICBpc3N1ZXI/OiBhbnk7XG5cbiAgICBjb25zdHJ1Y3RvcihlcnJvcjogTG9nZ2VyTWVzc2FnZSwgaXNzdWVyOiBhbnkgPSB1bmRlZmluZWQsIGxldmVsOiBudW1iZXIgPSBMT0dHRVJfTEVWRUxTLkFMTCwgLi4uYXJnczogYW55W10pIHtcbiAgICAgICAgc3VwZXIoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBlcnJvcik7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiTG9nZ2VkRXJyb3JcIjtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB0aGlzLmxvZ2dlZEF0ID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5uYW1lID09PSAnTG9nZ2VkRXJyb3InID8gZXJyb3IubG9nZ2VkQXQgOiB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaXNzdWVyID0gaXNzdWVyO1xuXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKGVycm9yLmxvZ2dlZEF0ID09PSB1bmRlZmluZWQgfHwgZXJyb3IubG9nZ2VkQXQgPCBsZXZlbCl7XG4gICAgICAgICAgICBnZXRMb2dnZXIoKS5yZXBvcnQodGhpcywgbGV2ZWwsIGlzc3VlciwgLi4uYXJncyk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlZEF0ID0gbGV2ZWw7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogV3JhcHBlciBDbGFzcyBmb3IgQ3JpdGljYWwgRXJyb3JzXG4gKlxuICogQGNsYXNzIENyaXRpY2FsRXJyb3JcbiAqIEBleHRlbmRzIExvZ2dlZEVycm9yXG4gKlxuICovXG5leHBvcnQgY2xhc3MgQ3JpdGljYWxFcnJvciBleHRlbmRzIExvZ2dlZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihlcnJvcjogTG9nZ2VyTWVzc2FnZSwgaXNzdWVyOiBhbnkgPSB1bmRlZmluZWQsIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICAgIHN1cGVyKGVycm9yLCBpc3N1ZXIsIExPR0dFUl9MRVZFTFMuQ1JJVElDQUwsIC4uLmFyZ3MpO1xuICAgIH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19leHBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2V4cG9ydFN0YXIpIHx8IGZ1bmN0aW9uKG0sIGV4cG9ydHMpIHtcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGV4cG9ydHMsIHApKSBfX2NyZWF0ZUJpbmRpbmcoZXhwb3J0cywgbSwgcCk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2Vycm9yc1wiKSwgZXhwb3J0cyk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmxvZ1N5bmMgPSBleHBvcnRzLmxvZ0FzeW5jID0gZXhwb3J0cy5TdG9wV2F0Y2ggPSB2b2lkIDA7XG52YXIgZXJyb3JzXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JzXCIpO1xudmFyIGxvZ2dpbmdfMSA9IHJlcXVpcmUoXCIuL2xvZ2dpbmdcIik7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG52YXIgU3RvcFdhdGNoID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdG9wV2F0Y2goKSB7XG4gICAgfVxuICAgIFN0b3BXYXRjaC5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB9O1xuICAgIFN0b3BXYXRjaC5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGFydFRpbWUpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0b3BXYXRjaCBkaWRudCBzdGFydCcpO1xuICAgICAgICByZXR1cm4gRGF0ZS5ub3coKSAtIHRoaXMuc3RhcnRUaW1lO1xuICAgIH07XG4gICAgU3RvcFdhdGNoLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5jaGVjaygpO1xuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIHJldHVybiBTdG9wV2F0Y2g7XG59KCkpO1xuZXhwb3J0cy5TdG9wV2F0Y2ggPSBTdG9wV2F0Y2g7XG5mdW5jdGlvbiBsb2dBc3luYyhsZXZlbCwgYmVuY2htYXJrKSB7XG4gICAgaWYgKGxldmVsID09PSB2b2lkIDApIHsgbGV2ZWwgPSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkRFQlVHOyB9XG4gICAgaWYgKCFiZW5jaG1hcmsgJiYgdHlwZW9mIGxldmVsID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgYmVuY2htYXJrID0gbGV2ZWw7XG4gICAgICAgIGxldmVsID0gY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5ERUJVRztcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIHByb3BlcnR5S2V5LCBkZXNjcmlwdG9yKSB7XG4gICAgICAgIHZhciBvcmlnaW5hbE1ldGhvZCA9IGRlc2NyaXB0b3IudmFsdWU7XG4gICAgICAgIHZhciBtZXRob2RXcmFwcGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gYXJncy5wb3AoKTtcbiAgICAgICAgICAgIGlmICghY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcnNfMS5Dcml0aWNhbEVycm9yKFwiTWlzc2luZyBDYWxsYmFja1wiKTtcbiAgICAgICAgICAgIHZhciBuYW1lID0gdGhpcy5uYW1lICYmIHRoaXMubmFtZSAhPT0gJ0Z1bmN0aW9uJyA/IHRoaXMubmFtZSA6IHRoaXMuY29uc3RydWN0b3IgJiYgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lIHx8IHRoaXM7XG4gICAgICAgICAgICAoMCwgbG9nZ2luZ18xLmdldExvZ2dlcikoKS5yZXBvcnQoXCJbezB9XSAtIEVudGVyaW5nIE1ldGhvZCB7MX0gd2l0aCBhcmdzOiB7Mn1cIiwgbGV2ZWwsIG5hbWUsIHByb3BlcnR5S2V5LCBhcmdzLm1hcChmdW5jdGlvbiAoYSkgeyByZXR1cm4gYS50b1N0cmluZygpOyB9KS5qb2luKCcgfCAnKSk7XG4gICAgICAgICAgICB2YXIgc3RvcFdhdGNoO1xuICAgICAgICAgICAgdmFyIGNiID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN0b3BXYXRjaClcbiAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ2dpbmdfMS5nZXRMb2dnZXIpKCkucmVwb3J0KFwiW3swfV1bQkVOQ0hNQVJLXSAtIExlYXZpbmcgTWV0aG9kIHsxfSBhZnRlciB7Mn1tc1wiLCBsZXZlbCwgbmFtZSwgcHJvcGVydHlLZXksIHN0b3BXYXRjaC5zdG9wKCkpO1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ2dpbmdfMS5nZXRMb2dnZXIpKCkucmVwb3J0KFwiW3swfV1bRVJST1JdIC0gTGVhdmluZyBNZXRob2QgezF9IHdpdGggZXJyb3IgezJ9XCIsIGxldmVsLCBuYW1lLCBwcm9wZXJ0eUtleSwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChcIlt7MH1dIC0gTGVhdmluZyBNZXRob2QgezF9IHdpdGggcmVzdWx0czogezJ9XCIsIGxldmVsLCBuYW1lLCBwcm9wZXJ0eUtleSwgcmVzdWx0cyA/IHJlc3VsdHMubWFwKGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLnRvU3RyaW5nKCk7IH0pLmpvaW4oJyB8ICcpIDogXCJ2b2lkXCIpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbdW5kZWZpbmVkXSwgcmVzdWx0cywgZmFsc2UpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoYmVuY2htYXJrKSB7XG4gICAgICAgICAgICAgICAgc3RvcFdhdGNoID0gbmV3IFN0b3BXYXRjaCgpO1xuICAgICAgICAgICAgICAgIHN0b3BXYXRjaC5zdGFydCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3JpZ2luYWxNZXRob2QuY2FsbC5hcHBseShvcmlnaW5hbE1ldGhvZCwgX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFt0aGlzLl9fb3JpZ2luYWxPYmplY3QgfHwgdGhpc10sIGFyZ3MsIGZhbHNlKSwgW2NiXSwgZmFsc2UpKTtcbiAgICAgICAgfTtcbiAgICAgICAgZGVzY3JpcHRvci52YWx1ZSA9IG1ldGhvZFdyYXBwZXI7XG4gICAgfTtcbn1cbmV4cG9ydHMubG9nQXN5bmMgPSBsb2dBc3luYztcbmZ1bmN0aW9uIGxvZ1N5bmMobGV2ZWwsIGJlbmNobWFyaykge1xuICAgIGlmIChsZXZlbCA9PT0gdm9pZCAwKSB7IGxldmVsID0gY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5ERUJVRzsgfVxuICAgIGlmICghYmVuY2htYXJrICYmIHR5cGVvZiBsZXZlbCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGJlbmNobWFyayA9IGxldmVsO1xuICAgICAgICBsZXZlbCA9IGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuREVCVUc7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSwgZGVzY3JpcHRvcikge1xuICAgICAgICB2YXIgb3JpZ2luYWxNZXRob2QgPSBkZXNjcmlwdG9yLnZhbHVlO1xuICAgICAgICB2YXIgbWV0aG9kV3JhcHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBuYW1lID0gdGhpcy5uYW1lICYmIHRoaXMubmFtZSAhPT0gJ0Z1bmN0aW9uJyA/IHRoaXMubmFtZSA6IHRoaXMuY29uc3RydWN0b3IgJiYgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lIHx8IHRoaXM7XG4gICAgICAgICAgICAoMCwgbG9nZ2luZ18xLmdldExvZ2dlcikoKS5yZXBvcnQoXCJbezB9XSAtIEVudGVyaW5nIE1ldGhvZCB7MX0gd2l0aCBhcmdzOiB7Mn1cIiwgbGV2ZWwsIG5hbWUsIHByb3BlcnR5S2V5LCBhcmdzLm1hcChmdW5jdGlvbiAoYSkgeyByZXR1cm4gYS50b1N0cmluZygpOyB9KS5qb2luKCcgfCAnKSk7XG4gICAgICAgICAgICB2YXIgc3RvcFdhdGNoID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICAgIGlmIChiZW5jaG1hcmspIHtcbiAgICAgICAgICAgICAgICBzdG9wV2F0Y2ggPSBuZXcgU3RvcFdhdGNoKCk7XG4gICAgICAgICAgICAgICAgc3RvcFdhdGNoLnN0YXJ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IG9yaWdpbmFsTWV0aG9kLmNhbGwuYXBwbHkob3JpZ2luYWxNZXRob2QsIF9fc3ByZWFkQXJyYXkoW3RoaXMuX19vcmlnaW5hbE9iamVjdCB8fCB0aGlzXSwgYXJncywgZmFsc2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0b3BXYXRjaClcbiAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ2dpbmdfMS5nZXRMb2dnZXIpKCkucmVwb3J0KFwiW3swfV1bQkVOQ0hNQVJLXSAtIExlYXZpbmcgTWV0aG9kIHsxfSBhZnRlciB7Mn1tc1wiLCBsZXZlbCwgbmFtZSwgcHJvcGVydHlLZXksIHN0b3BXYXRjaC5zdG9wKCkpO1xuICAgICAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChcIlt7MH1dW0VSUk9SXSAtIExlYXZpbmcgTWV0aG9kIHsxfSB3aXRoIGVycm9yIHsyfVwiLCBsZXZlbCwgbmFtZSwgcHJvcGVydHlLZXksIGUpO1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RvcFdhdGNoKVxuICAgICAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChcIlt7MH1dW0JFTkNITUFSS10gLSBMZWF2aW5nIE1ldGhvZCB7MX0gYWZ0ZXIgezJ9bXNcIiwgbGV2ZWwsIG5hbWUsIHByb3BlcnR5S2V5LCBzdG9wV2F0Y2guc3RvcCgpKTtcbiAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChcIlt7MH1dIC0gTGVhdmluZyBNZXRob2QgezF9IHdpdGggcmVzdWx0czogezJ9XCIsIGxldmVsLCBuYW1lLCBwcm9wZXJ0eUtleSwgcmVzdWx0ID8gcmVzdWx0IDogXCJ2b2lkXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgZGVzY3JpcHRvci52YWx1ZSA9IG1ldGhvZFdyYXBwZXI7XG4gICAgfTtcbn1cbmV4cG9ydHMubG9nU3luYyA9IGxvZ1N5bmM7IiwiLyoqXG4gKiBAbmFtZXNwYWNlIGRiLWRlY29yYXRvcnMuZXJyb3JzXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9yc1xuICovXG5cbmV4cG9ydCAqIGZyb20gJy4vZXJyb3JzJzsiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuREFZU19PRl9XRUVLX05BTUVTID0gZXhwb3J0cy5NT05USF9OQU1FUyA9IGV4cG9ydHMuREVGQVVMVF9USU1FU1RBTVBfRk9STUFUID0gZXhwb3J0cy5MT0dHSU5HX01TRyA9IGV4cG9ydHMuTE9HR0VSX0xFVkVMUyA9IHZvaWQgMDtcbmV4cG9ydHMuTE9HR0VSX0xFVkVMUyA9IHtcbiAgICBBTEw6IDAsXG4gICAgREVCVUc6IDEsXG4gICAgSU5GTzogMixcbiAgICBXQVJOOiAzLFxuICAgIEVSUk9SOiA0LFxuICAgIENSSVRJQ0FMOiA1XG59O1xuZXhwb3J0cy5MT0dHSU5HX01TRyA9IHtcbiAgICBMRVZFTF9DSEFOR0VEOiBcIkxvZ2dlciBMZXZlbCBjaGFuZ2VkIGZyb20gezB9IHRvIHsxfVwiLFxuICAgIExPR0dFUl9DSEFOR0VEOiBcIkxvZ2dlciBjaGFuZ2VkXCJcbn07XG5leHBvcnRzLkRFRkFVTFRfVElNRVNUQU1QX0ZPUk1BVCA9IFwiZGQvTU0veXl5eSBISDptbTpzczpTXCI7XG5leHBvcnRzLk1PTlRIX05BTUVTID0gW1xuICAgIFwiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCIsXG4gICAgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXG5dO1xuZXhwb3J0cy5EQVlTX09GX1dFRUtfTkFNRVMgPSBbXG4gICAgXCJTdW5kYXlcIiwgXCJNb25kYXlcIiwgXCJUdWVzZGF5XCIsXG4gICAgXCJXZWRuZXNkYXlcIiwgXCJUaHVyc2RheVwiLCBcIkZyaWRheVwiLCBcIlNhdHVyZGF5XCJcbl07IiwiLyoqXG4gKiBAZW51bSBMT0dHRVJfTEVWRUxTXG4gKlxuICogQGNhdGVnb3J5IENvbnN0YW50c1xuICovXG5leHBvcnQgY29uc3QgTE9HR0VSX0xFVkVMUyA9IHtcbiAgICBBTEw6IDAsXG4gICAgREVCVUc6IDEsXG4gICAgSU5GTzogMixcbiAgICBXQVJOOiAzLFxuICAgIEVSUk9SOiA0LFxuICAgIENSSVRJQ0FMOiA1XG59XG5cbi8qKlxuICogRGVmYXVsdCBtZXNzYWdlc1xuICpcbiAqIGNvbnN0YW50IExPR0dJTkdfTVNHXG4gKlxuICogQG1lbWJlck9mIGxvZ2dpbmcubG9nZ2luZ1xuICovXG5leHBvcnQgY29uc3QgTE9HR0lOR19NU0cgPSB7XG4gICAgTEVWRUxfQ0hBTkdFRDogXCJMb2dnZXIgTGV2ZWwgY2hhbmdlZCBmcm9tIHswfSB0byB7MX1cIixcbiAgICBMT0dHRVJfQ0hBTkdFRDogXCJMb2dnZXIgY2hhbmdlZFwiXG59XG5cbi8qKlxuICogQHR5cGVkZWYgRXJyXG4gKiBAbWVtYmVyT2YgbG9nZ2luZy5sb2dnaW5nXG4gKiAqL1xuZXhwb3J0IHR5cGUgRXJyID0gRXJyb3IgfCBzdHJpbmcgfCB1bmRlZmluZWQ7XG4vKipcbiAqIEB0eXBlZGVmIENhbGxiYWNrXG4gKiBAbWVtYmVyT2YgbG9nZ2luZy5sb2dnaW5nXG4gKiAqL1xuZXhwb3J0IHR5cGUgQ2FsbGJhY2sgPSAoZXJyPzogRXJyLCAuLi5hcmdzOiBhbnlbXSkgPT4gdm9pZDtcblxuLyoqXG4gKiBAY29uc3RhbnQgREVGQVVMVF9USU1FU1RBTVBfRk9STUFUXG4gKiBAY2F0ZWdvcnkgQ29uc3RhbnRzXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX1RJTUVTVEFNUF9GT1JNQVQgPSBcImRkL01NL3l5eXkgSEg6bW06c3M6U1wiO1xuXG4vKipcbiAqIENhbiBiZSBjaGFuZ2VkIGZvciBsb2NhbGl6YXRpb24gcHVycG9zZXNcbiAqXG4gKiBAY29uc3RhbnQgTU9OVEhfTkFNRVNcbiAqL1xuZXhwb3J0IGNvbnN0IE1PTlRIX05BTUVTID0gW1xuICAgIFwiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCIsXG4gICAgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXG5dO1xuXG4vKipcbiAqIENhbiBiZSBjaGFuZ2VkIGZvciBsb2NhbGl6YXRpb24gcHVycG9zZXNcbiAqXG4gKiBAY29uc3RhbnQgREFZU19PRl9XRUVLX05BTUVTXG4gKi9cbmV4cG9ydCBjb25zdCBEQVlTX09GX1dFRUtfTkFNRVMgPSBbXG4gICAgXCJTdW5kYXlcIiwgXCJNb25kYXlcIiwgXCJUdWVzZGF5XCIsXG4gICAgXCJXZWRuZXNkYXlcIiwgXCJUaHVyc2RheVwiLCBcIkZyaWRheVwiLCBcIlNhdHVyZGF5XCJcbl07IiwiaW1wb3J0IHtDcml0aWNhbEVycm9yfSBmcm9tIFwiLi4vZXJyb3JzXCI7XG5pbXBvcnQge2dldExvZ2dlcn0gZnJvbSBcIi4vbG9nZ2luZ1wiO1xuaW1wb3J0IHtDYWxsYmFjaywgRXJyLCBMT0dHRVJfTEVWRUxTfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcblxuLyoqXG4gKiBVdGlsIGNsYXNzIHRvIG1lYXN1cmUgdGltZSBiZXR3ZWVuIHR3byBwb2ludHMgaW4gdGltZTtcbiAqXG4gKiBAY2xhc3MgU3RvcFdhdGNoXG4gKlxuICovXG5leHBvcnQgY2xhc3MgU3RvcFdhdGNoe1xuICAgIHByaXZhdGUgc3RhcnRUaW1lPzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBzdGFydCB0aW1lXG4gICAgICovXG4gICAgc3RhcnQoKXtcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBub3cgYW5kIHRoZSBzdGFydCB0aW1lXG4gICAgICovXG4gICAgY2hlY2soKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXJ0VGltZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU3RvcFdhdGNoIGRpZG50IHN0YXJ0Jyk7XG4gICAgICAgIHJldHVybiBEYXRlLm5vdygpIC0gdGhpcy5zdGFydFRpbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIG5vdyBhbmQgdGhlIHN0YXJ0IHRpbWVcbiAgICAgKiBzdG9wcyB0aGUgVGltZVdhdGNoXG4gICAgICovXG4gICAgc3RvcCgpOiBudW1iZXIge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmNoZWNrKCk7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBBc3luYyBNZXRob2QgZGVjb3JhdG9yIHRvIGxvZyB0aGUgaW5wdXQgYW5kIG91dHB1dCBvZiB0aGF0IG1ldGhvZFxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbGV2ZWxdIExvZ2dpbmcgTGV2ZWwgYXMgaW4ge0BsaW5rIExPR0dFUl9MRVZFTFN9IGRlZmF1bHRzIHRvIHtAbGluayBMT0dHRVJfTEVWRUxTLkRFQlVHfVxuICogQHBhcmFtIHtib29sZWFufSBbYmVuY2htYXJrXSBkZXRlcm1pbmVzIGlmIHRoZSBsb2dnaW5nIGluY2x1ZGVzIHRoZSBkdXJhdGlvbiBpbiBtcy4gZGVmYXVsdHMgdG8gZmFsc2VcbiAqXG4gKiBAZGVjb3JhdG9yIGxvZ0FzeW5jXG4gKlxuICogQGNhdGVnb3J5IERlY29yYXRvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvZ0FzeW5jKGxldmVsOiBudW1iZXIgfCBib29sZWFuID0gTE9HR0VSX0xFVkVMUy5ERUJVRywgYmVuY2htYXJrPzogYm9vbGVhbikge1xuXG4gICAgaWYgKCFiZW5jaG1hcmsgJiYgdHlwZW9mIGxldmVsID09PSAnYm9vbGVhbicpe1xuICAgICAgICBiZW5jaG1hcmsgPSBsZXZlbDtcbiAgICAgICAgbGV2ZWwgPSBMT0dHRVJfTEVWRUxTLkRFQlVHO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0OiBhbnksIHByb3BlcnR5S2V5OiBzdHJpbmcsIGRlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvcikge1xuXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsTWV0aG9kID0gZGVzY3JpcHRvci52YWx1ZTtcblxuICAgICAgICBjb25zdCBtZXRob2RXcmFwcGVyID0gZnVuY3Rpb24odGhpczogYW55LCAuLi5hcmdzOiBhbnlbXSl7XG4gICAgICAgICAgICBsZXQgY2FsbGJhY2s6IENhbGxiYWNrID0gYXJncy5wb3AoKTtcbiAgICAgICAgICAgIGlmICghY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBDcml0aWNhbEVycm9yKGBNaXNzaW5nIENhbGxiYWNrYCk7XG5cbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLm5hbWUgJiYgdGhpcy5uYW1lICE9PSAnRnVuY3Rpb24nID8gdGhpcy5uYW1lIDogdGhpcy5jb25zdHJ1Y3RvciAmJiB0aGlzLmNvbnN0cnVjdG9yLm5hbWUgfHwgdGhpcztcbiAgICAgICAgICAgIGdldExvZ2dlcigpLnJlcG9ydChgW3swfV0gLSBFbnRlcmluZyBNZXRob2QgezF9IHdpdGggYXJnczogezJ9YCwgbGV2ZWwgYXMgbnVtYmVyLCBuYW1lLCBwcm9wZXJ0eUtleSwgYXJncy5tYXAoYSA9PiBhLnRvU3RyaW5nKCkpLmpvaW4oJyB8ICcpKTtcblxuICAgICAgICAgICAgbGV0IHN0b3BXYXRjaDogU3RvcFdhdGNoO1xuXG4gICAgICAgICAgICBjb25zdCBjYiA9IChlcnI6IEVyciwgLi4ucmVzdWx0czogYW55W10pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc3RvcFdhdGNoKVxuICAgICAgICAgICAgICAgICAgICBnZXRMb2dnZXIoKS5yZXBvcnQoYFt7MH1dW0JFTkNITUFSS10gLSBMZWF2aW5nIE1ldGhvZCB7MX0gYWZ0ZXIgezJ9bXNgLCBsZXZlbCBhcyBudW1iZXIsIG5hbWUsIHByb3BlcnR5S2V5LCBzdG9wV2F0Y2guc3RvcCgpKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKXtcbiAgICAgICAgICAgICAgICAgICAgZ2V0TG9nZ2VyKCkucmVwb3J0KGBbezB9XVtFUlJPUl0gLSBMZWF2aW5nIE1ldGhvZCB7MX0gd2l0aCBlcnJvciB7Mn1gLCBsZXZlbCBhcyBudW1iZXIsIG5hbWUsIHByb3BlcnR5S2V5LCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBnZXRMb2dnZXIoKS5yZXBvcnQoYFt7MH1dIC0gTGVhdmluZyBNZXRob2QgezF9IHdpdGggcmVzdWx0czogezJ9YCwgbGV2ZWwgYXMgbnVtYmVyLCBuYW1lLCBwcm9wZXJ0eUtleSwgcmVzdWx0cyA/IHJlc3VsdHMubWFwKGEgPT4gYS50b1N0cmluZygpKS5qb2luKCcgfCAnKSA6IFwidm9pZFwiKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIC4uLnJlc3VsdHMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYmVuY2htYXJrKXtcbiAgICAgICAgICAgICAgICBzdG9wV2F0Y2ggPSBuZXcgU3RvcFdhdGNoKCk7XG4gICAgICAgICAgICAgICAgc3RvcFdhdGNoLnN0YXJ0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG9yaWdpbmFsTWV0aG9kLmNhbGwodGhpcy5fX29yaWdpbmFsT2JqZWN0IHx8IHRoaXMsIC4uLmFyZ3MsIGNiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlc2NyaXB0b3IudmFsdWUgPSBtZXRob2RXcmFwcGVyO1xuICAgIH1cbn1cblxuLyoqXG4gKiBTeW5jIE1ldGhvZCBkZWNvcmF0b3IgdG8gbG9nIHRoZSBpbnB1dCBhbmQgb3V0cHV0IG9mIHRoYXQgbWV0aG9kXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtsZXZlbF0gTG9nZ2luZyBMZXZlbCBhcyBpbiB7QGxpbmsgTE9HR0VSX0xFVkVMU30gZGVmYXVsdHMgdG8ge0BsaW5rIExPR0dFUl9MRVZFTFMuREVCVUd9XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtiZW5jaG1hcmtdIGRldGVybWluZXMgaWYgdGhlIGxvZ2dpbmcgaW5jbHVkZXMgdGhlIGR1cmF0aW9uIGluIG1zLiBkZWZhdWx0cyB0byBmYWxzZVxuICpcbiAqIEBkZWNvcmF0b3IgbG9nU3luY1xuICpcbiAqIEBjYXRlZ29yeSBEZWNvcmF0b3JzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2dTeW5jKGxldmVsOiBudW1iZXIgfCBib29sZWFuID0gTE9HR0VSX0xFVkVMUy5ERUJVRywgYmVuY2htYXJrPzogYm9vbGVhbikge1xuXG4gICAgaWYgKCFiZW5jaG1hcmsgJiYgdHlwZW9mIGxldmVsID09PSAnYm9vbGVhbicpe1xuICAgICAgICBiZW5jaG1hcmsgPSBsZXZlbDtcbiAgICAgICAgbGV2ZWwgPSBMT0dHRVJfTEVWRUxTLkRFQlVHO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0OiBhbnksIHByb3BlcnR5S2V5OiBzdHJpbmcsIGRlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvcikge1xuXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsTWV0aG9kID0gZGVzY3JpcHRvci52YWx1ZTtcblxuICAgICAgICBjb25zdCBtZXRob2RXcmFwcGVyID0gZnVuY3Rpb24odGhpczogYW55LCAuLi5hcmdzOiBhbnlbXSl7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5uYW1lICYmIHRoaXMubmFtZSAhPT0gJ0Z1bmN0aW9uJyA/IHRoaXMubmFtZSA6IHRoaXMuY29uc3RydWN0b3IgJiYgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lIHx8IHRoaXM7XG5cbiAgICAgICAgICAgIGdldExvZ2dlcigpLnJlcG9ydChgW3swfV0gLSBFbnRlcmluZyBNZXRob2QgezF9IHdpdGggYXJnczogezJ9YCwgbGV2ZWwgYXMgbnVtYmVyLCBuYW1lLCBwcm9wZXJ0eUtleSwgYXJncy5tYXAoYSA9PiBhLnRvU3RyaW5nKCkpLmpvaW4oJyB8ICcpKTtcbiAgICAgICAgICAgIGxldCBzdG9wV2F0Y2g6IFN0b3BXYXRjaCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgICAgIGlmIChiZW5jaG1hcmspe1xuICAgICAgICAgICAgICAgIHN0b3BXYXRjaCA9IG5ldyBTdG9wV2F0Y2goKTtcbiAgICAgICAgICAgICAgICBzdG9wV2F0Y2guc3RhcnQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBvcmlnaW5hbE1ldGhvZC5jYWxsKHRoaXMuX19vcmlnaW5hbE9iamVjdCB8fCB0aGlzLCAuLi5hcmdzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RvcFdhdGNoKVxuICAgICAgICAgICAgICAgICAgICBnZXRMb2dnZXIoKS5yZXBvcnQoYFt7MH1dW0JFTkNITUFSS10gLSBMZWF2aW5nIE1ldGhvZCB7MX0gYWZ0ZXIgezJ9bXNgLCBsZXZlbCBhcyBudW1iZXIsIG5hbWUsIHByb3BlcnR5S2V5LCBzdG9wV2F0Y2guc3RvcCgpKTtcbiAgICAgICAgICAgICAgICBnZXRMb2dnZXIoKS5yZXBvcnQoYFt7MH1dW0VSUk9SXSAtIExlYXZpbmcgTWV0aG9kIHsxfSB3aXRoIGVycm9yIHsyfWAsIGxldmVsIGFzIG51bWJlciwgbmFtZSwgcHJvcGVydHlLZXksIGUpO1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RvcFdhdGNoKVxuICAgICAgICAgICAgICAgIGdldExvZ2dlcigpLnJlcG9ydChgW3swfV1bQkVOQ0hNQVJLXSAtIExlYXZpbmcgTWV0aG9kIHsxfSBhZnRlciB7Mn1tc2AsIGxldmVsIGFzIG51bWJlciwgbmFtZSwgcHJvcGVydHlLZXksIHN0b3BXYXRjaC5zdG9wKCkpO1xuICAgICAgICAgICAgZ2V0TG9nZ2VyKCkucmVwb3J0KGBbezB9XSAtIExlYXZpbmcgTWV0aG9kIHsxfSB3aXRoIHJlc3VsdHM6IHsyfWAsIGxldmVsIGFzIG51bWJlciwgbmFtZSwgcHJvcGVydHlLZXksIHJlc3VsdCA/IHJlc3VsdCA6IFwidm9pZFwiKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cblxuICAgICAgICBkZXNjcmlwdG9yLnZhbHVlID0gbWV0aG9kV3JhcHBlcjtcbiAgICB9XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19leHBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2V4cG9ydFN0YXIpIHx8IGZ1bmN0aW9uKG0sIGV4cG9ydHMpIHtcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGV4cG9ydHMsIHApKSBfX2NyZWF0ZUJpbmRpbmcoZXhwb3J0cywgbSwgcCk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vbG9nZ2luZ1wiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZGVjb3JhdG9yc1wiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vdXRpbHNcIiksIGV4cG9ydHMpOyIsImltcG9ydCB7REVGQVVMVF9USU1FU1RBTVBfRk9STUFULCBMT0dHRVJfTEVWRUxTLCBMT0dHSU5HX01TR30gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQge2Zvcm1hdERhdGUsIHN0cmluZ0Zvcm1hdH0gZnJvbSBcIi4vdXRpbHNcIjtcblxuLyoqXG4gKiBAdHlwZWRlZiBMb2dnZXJNZXNzYWdlXG4gKiBAbWVtYmVyT2YgbG9nZ2luZy5sb2dnaW5nXG4gKi9cbmV4cG9ydCB0eXBlIExvZ2dlck1lc3NhZ2UgPSBFcnJvciB8IHN0cmluZztcblxuLyoqXG4gKiBAaW50ZXJmYWNlIExvZ2dlclxuICogQG1lbWJlck9mIGxvZ2dpbmcubG9nZ2luZ1xuICovXG5leHBvcnQgaW50ZXJmYWNlIExvZ2dlciB7XG4gICAgLyoqXG4gICAgICogUmVwb3J0cyBhIG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGV2ZWxcbiAgICAgKiBAcGFyYW0ge2FueX0gW2lzc3Vlcl0gdGhlIE9iamVjdC9wcm9jZXNzIHRoYXQgcmVwb3J0cyB0aGUgbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICAgICAqXG4gICAgICogQG1lbWJlck9mIExvZ2dlclxuICAgICAqL1xuICAgIHJlcG9ydChtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBsZXZlbDogbnVtYmVyLCBpc3N1ZXI6IGFueSwgLi4uYXJnczogYW55W10pOiB2b2lkO1xuICAgIC8qKlxuICAgICAqIHtAbGluayBMb2dnZXIjcmVwb3J0fXMgYSBtZXNzYWdlIHVuZGVyIHtAbGluayBMT0dHRVJfTEVWRUxTLkFMTH1cbiAgICAgKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBMb2dnZXJcbiAgICAgKi9cbiAgICBhbGwobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pOiB2b2lkO1xuICAgIC8qKlxuICAgICAqIHtAbGluayBMb2dnZXIjcmVwb3J0fXMgYSBtZXNzYWdlIHVuZGVyIHtAbGluayBMT0dHRVJfTEVWRUxTLklORk99XG4gICAgICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHthbnlbXX0gW2FyZ3NdXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgTG9nZ2VyXG4gICAgICovXG4gICAgaW5mbyhtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG4gICAgLyoqXG4gICAgICoge0BsaW5rIExvZ2dlciNyZXBvcnR9cyBhIG1lc3NhZ2UgdW5kZXIge0BsaW5rIExPR0dFUl9MRVZFTFMuREVCVUd9XG4gICAgICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHthbnlbXX0gW2FyZ3NdXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgTG9nZ2VyXG4gICAgICovXG4gICAgZGVidWcobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pOiB2b2lkO1xuICAgIC8qKlxuICAgICAqIHtAbGluayBMb2dnZXIjcmVwb3J0fXMgYSBtZXNzYWdlIHVuZGVyIHtAbGluayBMT0dHRVJfTEVWRUxTLldBUk59XG4gICAgICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHthbnlbXX0gW2FyZ3NdXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgTG9nZ2VyXG4gICAgICovXG4gICAgd2FybihtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG4gICAgLyoqXG4gICAgICoge0BsaW5rIExvZ2dlciNyZXBvcnR9cyBhIG1lc3NhZ2UgdW5kZXIge0BsaW5rIExPR0dFUl9MRVZFTFMuRVJST1J9XG4gICAgICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHthbnlbXX0gW2FyZ3NdXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgTG9nZ2VyXG4gICAgICovXG4gICAgZXJyb3IobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pOiB2b2lkO1xuICAgIC8qKlxuICAgICAqIHtAbGluayBMb2dnZXIjcmVwb3J0fXMgYSBtZXNzYWdlIHVuZGVyIHtAbGluayBMT0dHRVJfTEVWRUxTLkNSSVRJQ0FMfVxuICAgICAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICAgICAqXG4gICAgICogQG1lbWJlck9mIExvZ2dlclxuICAgICAqL1xuICAgIGNyaXRpY2FsKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKTogdm9pZDtcbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIHRoZSBMb2dnZXIgbGV2ZWxcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZXZlbFxuICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBMb2dnZXJcbiAgICAgKi9cbiAgICBzZXRMZXZlbChsZXZlbDogbnVtYmVyLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG59XG5cbi8qKlxuICogRGVmYXVsdCBMb2dnZXIgSW1wbGVtZW50YXRpb25cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gZGVmYXVsdExldmVsIGRlZmF1bHRzIHRvIHtAbGluayBMT0dHRVJfTEVWRUxTLklORk99XG4gKiBAcGFyYW0ge2Jvb2xlYW59IHVzZVRpbWVzdGFtcCBkZWZhdWx0cyB0byB0cnVlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGxvZ0xldmVsXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGxvZ1N0YWNrVHJhY2VcbiAqIEBwYXJhbSB7c3RyaW5nfSB0aW1lc3RhbXBGb3JtYXRcbiAqXG4gKiBAY2xhc3MgTG9nZ2VySW1wXG4gKiBAaW1wbGVtZW50cyBMb2dnZXJcbiAqL1xuZXhwb3J0IGNsYXNzIExvZ2dlckltcCBpbXBsZW1lbnRzIExvZ2dlciB7XG4gICAgcHJpdmF0ZSBsZXZlbDogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSB1c2VUaW1lc3RhbXA6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSByZWFkb25seSBsb2dMZXZlbDogYm9vbGVhbjtcbiAgICBwcml2YXRlIHJlYWRvbmx5IHRpbWVzdGFtcEZvcm1hdDogc3RyaW5nO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgbG9nU3RhY2tUcmFjZTogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKGRlZmF1bHRMZXZlbDogbnVtYmVyID0gTE9HR0VSX0xFVkVMUy5JTkZPLCB1c2VUaW1lc3RhbXAgPSB0cnVlLCBsb2dMZXZlbDogYm9vbGVhbiA9IHRydWUsIGxvZ1N0YWNrVHJhY2U6IGJvb2xlYW4gPSBmYWxzZSwgdGltZXN0YW1wRm9ybWF0ID0gREVGQVVMVF9USU1FU1RBTVBfRk9STUFUKXtcbiAgICAgICAgdGhpcy5sZXZlbCA9IGRlZmF1bHRMZXZlbDtcbiAgICAgICAgdGhpcy51c2VUaW1lc3RhbXAgPSB1c2VUaW1lc3RhbXA7XG4gICAgICAgIHRoaXMubG9nTGV2ZWwgPSBsb2dMZXZlbDtcbiAgICAgICAgdGhpcy5sb2dTdGFja1RyYWNlID0gbG9nU3RhY2tUcmFjZTtcbiAgICAgICAgdGhpcy50aW1lc3RhbXBGb3JtYXQgPSB0aW1lc3RhbXBGb3JtYXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQnVpbHRzIHRoZSBhY3R1YWwgbG9nZ2luZyBtZXNzYWdlXG4gICAgICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxvZ0xldmVsIGlmIHRoZSBsZXZlbCBpcyB0byBiZSBsb2dnZWRcbiAgICAgKiBAcGFyYW0ge2FueX0gaXNzdWVyIHdobyBpcyBsb2dnaW5nIHRoZSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgYnVpbGRNZXNzYWdlKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGxvZ0xldmVsOiBudW1iZXIsIGlzc3VlcjogYW55ID0gdW5kZWZpbmVkLCAuLi5hcmdzOiBhbnlbXSl7XG4gICAgICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IpXG4gICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZS5tZXNzYWdlO1xuXG4gICAgICAgIGlmIChpc3N1ZXIpXG4gICAgICAgICAgICBtZXNzYWdlID0gYFske2lzc3Vlci50b1N0cmluZygpfV0ke21lc3NhZ2V9YDtcbiAgICAgICAgaWYgKHRoaXMubG9nTGV2ZWwpXG4gICAgICAgICAgICBtZXNzYWdlID0gYFske09iamVjdC5rZXlzKExPR0dFUl9MRVZFTFMpW2xvZ0xldmVsXX1dIC0gJHttZXNzYWdlfWA7XG4gICAgICAgIGlmICh0aGlzLnVzZVRpbWVzdGFtcClcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgWyR7Zm9ybWF0RGF0ZShuZXcgRGF0ZSgpLCB0aGlzLnRpbWVzdGFtcEZvcm1hdCl9XSR7bWVzc2FnZX1gO1xuICAgICAgICByZXR1cm4gc3RyaW5nRm9ybWF0KG1lc3NhZ2UsIC4uLmFyZ3MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxldmVsIGRlZmF1bHRzIHRvIHtAbGluayBMT0dHRVJfTEVWRUxTLklORk99XG4gICAgICogQHBhcmFtIHthbnl9IFtpc3N1ZXJdIHRoZSBvYmplY3QgdGhhdCBpcyBjYWxsaW5nIHRoZSByZXBvcnQgbWV0aG9kXG4gICAgICogQHBhcmFtIHthbnlbXX0gW2FyZ3NdIHZhbHVlcyB0byByZXBsYWNlIGluIHRoZSBtZXNzYWdlIGFjY29yZGluZyB0byB0aGUgJ3swfScgbm90YXRpb25cbiAgICAgKi9cbiAgICByZXBvcnQobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgbGV2ZWw6IG51bWJlciA9IExPR0dFUl9MRVZFTFMuSU5GTywgaXNzdWVyOiBhbnkgPSB1bmRlZmluZWQsIC4uLmFyZ3M6IGFueVtdKSA6IHZvaWQge1xuICAgICAgICBpZiAobGV2ZWwgPCB0aGlzLmxldmVsKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIGxldCByZXBvcnRNZXRob2Q6IEZ1bmN0aW9uO1xuICAgICAgICBzd2l0Y2ggKGxldmVsKXtcbiAgICAgICAgICAgIGNhc2UgTE9HR0VSX0xFVkVMUy5XQVJOOlxuICAgICAgICAgICAgICAgIHJlcG9ydE1ldGhvZCA9IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTE9HR0VSX0xFVkVMUy5FUlJPUjpcbiAgICAgICAgICAgIGNhc2UgTE9HR0VSX0xFVkVMUy5DUklUSUNBTDpcbiAgICAgICAgICAgICAgICByZXBvcnRNZXRob2QgPSBjb25zb2xlLmVycm9yO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBMT0dHRVJfTEVWRUxTLklORk86XG4gICAgICAgICAgICBjYXNlIExPR0dFUl9MRVZFTFMuREVCVUc6XG4gICAgICAgICAgICBjYXNlIExPR0dFUl9MRVZFTFMuQUxMOlxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXBvcnRNZXRob2QgPSBjb25zb2xlLmxvZztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBmaW5hbE1lc3NhZ2UgPSB0aGlzLmJ1aWxkTWVzc2FnZShtZXNzYWdlLCBsZXZlbCwgaXNzdWVyLCAuLi5hcmdzKTtcbiAgICAgICAgcmVwb3J0TWV0aG9kKGZpbmFsTWVzc2FnZSk7XG5cbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvciAmJiBtZXNzYWdlLnN0YWNrICYmIHRoaXMubG9nU3RhY2tUcmFjZSlcbiAgICAgICAgICAgIHJlcG9ydE1ldGhvZCh0aGlzLmJ1aWxkTWVzc2FnZShgXFxuLS0gU3RhY2tTdHJhY2U6XFxuezB9YCwgbGV2ZWwsIGlzc3VlciwgbWVzc2FnZS5zdGFjaykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgaW5mbyhtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBpc3N1ZXI6IGFueSA9IHVuZGVmaW5lZCwgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXBvcnQobWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5JTkZPLCBpc3N1ZXIsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIGFsbChtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBpc3N1ZXI6IGFueSA9IHVuZGVmaW5lZCwgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXBvcnQobWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5BTEwsIGlzc3VlciwgLi4uYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgZGVidWcobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgaXNzdWVyOiBhbnkgPSB1bmRlZmluZWQsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVwb3J0KG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuREVCVUcsIGlzc3VlciwgLi4uYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgd2FybihtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBpc3N1ZXI6IGFueSA9IHVuZGVmaW5lZCwgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXBvcnQobWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5XQVJOLCBpc3N1ZXIsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIGVycm9yKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGlzc3VlcjogYW55ID0gdW5kZWZpbmVkLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlcG9ydChtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLkVSUk9SLCBpc3N1ZXIsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIGNyaXRpY2FsKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGlzc3VlcjogYW55ID0gdW5kZWZpbmVkLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlcG9ydChtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLkNSSVRJQ0FMLCBpc3N1ZXIsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIHNldExldmVsKGxldmVsOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kZWJ1ZyhzdHJpbmdGb3JtYXQoTE9HR0lOR19NU0cuTEVWRUxfQ0hBTkdFRCwgdGhpcy5sZXZlbC50b1N0cmluZygpLCBsZXZlbC50b1N0cmluZygpKSk7XG4gICAgICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcbiAgICB9XG59XG5cbmxldCBjdXJyZW50TG9nZ2VyOiBMb2dnZXI7XG5cbi8qKlxuICogZ2V0cyB0aGUgY3VycmVudCBMb2dnZXJcbiAqXG4gKiBAZnVuY3Rpb24gZ2V0TG9nZ2VyXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMubG9nZ2luZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9nZ2VyKCl7XG4gICAgaWYgKCFjdXJyZW50TG9nZ2VyKVxuICAgICAgICBjdXJyZW50TG9nZ2VyID0gbmV3IExvZ2dlckltcCgpO1xuICAgIHJldHVybiBjdXJyZW50TG9nZ2VyO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGxvZ2dlclxuICpcbiAqIEBwYXJhbSB7TG9nZ2VyfSBsb2dnZXJcbiAqXG4gKiBAZnVuY3Rpb24gc2V0TG9nZ2VyXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMubG9nZ2luZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0TG9nZ2VyKGxvZ2dlcjogTG9nZ2VyKXtcbiAgICBjdXJyZW50TG9nZ2VyID0gbG9nZ2VyO1xuICAgIGdldExvZ2dlcigpLmRlYnVnKExPR0dJTkdfTVNHLkxPR0dFUl9DSEFOR0VEKTtcbn1cblxuLyoqXG4gKiBSZXBvcnRzIGEgbWVzc2FnZSB0byB0aGUgbG9nZ2VyIHVuZGVyIHRoZSBsZXZlbCB7QGxpbmsgTE9HR0VSX0xFVkVMUy5JTkZPfVxuICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gKiBAcGFyYW0ge2FueVtdfSBhcmdzXG4gKlxuICogQGZ1bmN0aW9uIGluZm9cbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBjb25zdCBpbmZvID0gZnVuY3Rpb24odGhpczogYW55LCBtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgIGdldExvZ2dlcigpLmluZm8obWVzc2FnZSwgdGhpcywgLi4uYXJncyk7XG59XG4vKipcbiAqIFJlcG9ydHMgYSBtZXNzYWdlIHRvIHRoZSBsb2dnZXIgdW5kZXIgdGhlIGxldmVsIHtAbGluayBMT0dHRVJfTEVWRUxTLkFMTH1cbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICpcbiAqIEBmdW5jdGlvbiBhbGxcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBjb25zdCBhbGwgPSBmdW5jdGlvbih0aGlzOiBhbnksIG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgZ2V0TG9nZ2VyKCkuYWxsKG1lc3NhZ2UsIHRoaXMsIC4uLmFyZ3MpO1xufVxuLyoqXG4gKiBSZXBvcnRzIGEgbWVzc2FnZSB0byB0aGUgbG9nZ2VyIHVuZGVyIHRoZSBsZXZlbCB7QGxpbmsgTE9HR0VSX0xFVkVMUy5ERUJVR31cbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICpcbiAqIEBmdW5jdGlvbiBkZWJ1Z1xuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IGRlYnVnID0gZnVuY3Rpb24odGhpczogYW55LCBtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgIGdldExvZ2dlcigpLmRlYnVnKG1lc3NhZ2UsIHRoaXMsIC4uLmFyZ3MpO1xufVxuLyoqXG4gKiBSZXBvcnRzIGEgbWVzc2FnZSB0byB0aGUgbG9nZ2VyIHVuZGVyIHRoZSBsZXZlbCB7QGxpbmsgTE9HR0VSX0xFVkVMUy5XQVJOfVxuICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gKiBAcGFyYW0ge2FueVtdfSBhcmdzXG4gKlxuICogQGZ1bmN0aW9uIHdhcm5cbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBjb25zdCB3YXJuID0gZnVuY3Rpb24odGhpczogYW55LCBtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgIGdldExvZ2dlcigpLndhcm4obWVzc2FnZSwgdGhpcywgLi4uYXJncyk7XG59XG4vKipcbiAqIFJlcG9ydHMgYSBtZXNzYWdlIHRvIHRoZSBsb2dnZXIgdW5kZXIgdGhlIGxldmVsIHtAbGluayBMT0dHRVJfTEVWRUxTLkVSUk9SfVxuICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gKiBAcGFyYW0ge2FueVtdfSBhcmdzXG4gKlxuICogQGZ1bmN0aW9uIGVycm9yXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMubG9nZ2luZ1xuICovXG5leHBvcnQgY29uc3QgZXJyb3IgPSBmdW5jdGlvbih0aGlzOiBhbnksIG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgZ2V0TG9nZ2VyKCkuZXJyb3IobWVzc2FnZSwgdGhpcywgLi4uYXJncyk7XG59XG4vKipcbiAqIFJlcG9ydHMgYSBtZXNzYWdlIHRvIHRoZSBsb2dnZXIgdW5kZXIgdGhlIGxldmVsIHtAbGluayBMT0dHRVJfTEVWRUxTLkNSSVRJQ0FMfVxuICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gKiBAcGFyYW0ge2FueVtdfSBhcmdzXG4gKlxuICogQGZ1bmN0aW9uIGNyaXRpY2FsXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMubG9nZ2luZ1xuICovXG5leHBvcnQgY29uc3QgY3JpdGljYWwgPSBmdW5jdGlvbih0aGlzOiBhbnksIG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgZ2V0TG9nZ2VyKCkuY3JpdGljYWwobWVzc2FnZSwgdGhpcywgLi4uYXJncyk7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmNyaXRpY2FsID0gZXhwb3J0cy5lcnJvciA9IGV4cG9ydHMud2FybiA9IGV4cG9ydHMuZGVidWcgPSBleHBvcnRzLmFsbCA9IGV4cG9ydHMuaW5mbyA9IGV4cG9ydHMuc2V0TG9nZ2VyID0gZXhwb3J0cy5nZXRMb2dnZXIgPSBleHBvcnRzLkxvZ2dlckltcCA9IHZvaWQgMDtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbnZhciB1dGlsc18xID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG52YXIgTG9nZ2VySW1wID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBMb2dnZXJJbXAoZGVmYXVsdExldmVsLCB1c2VUaW1lc3RhbXAsIGxvZ0xldmVsLCBsb2dTdGFja1RyYWNlLCB0aW1lc3RhbXBGb3JtYXQpIHtcbiAgICAgICAgaWYgKGRlZmF1bHRMZXZlbCA9PT0gdm9pZCAwKSB7IGRlZmF1bHRMZXZlbCA9IGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuSU5GTzsgfVxuICAgICAgICBpZiAodXNlVGltZXN0YW1wID09PSB2b2lkIDApIHsgdXNlVGltZXN0YW1wID0gdHJ1ZTsgfVxuICAgICAgICBpZiAobG9nTGV2ZWwgPT09IHZvaWQgMCkgeyBsb2dMZXZlbCA9IHRydWU7IH1cbiAgICAgICAgaWYgKGxvZ1N0YWNrVHJhY2UgPT09IHZvaWQgMCkgeyBsb2dTdGFja1RyYWNlID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKHRpbWVzdGFtcEZvcm1hdCA9PT0gdm9pZCAwKSB7IHRpbWVzdGFtcEZvcm1hdCA9IGNvbnN0YW50c18xLkRFRkFVTFRfVElNRVNUQU1QX0ZPUk1BVDsgfVxuICAgICAgICB0aGlzLmxldmVsID0gZGVmYXVsdExldmVsO1xuICAgICAgICB0aGlzLnVzZVRpbWVzdGFtcCA9IHVzZVRpbWVzdGFtcDtcbiAgICAgICAgdGhpcy5sb2dMZXZlbCA9IGxvZ0xldmVsO1xuICAgICAgICB0aGlzLmxvZ1N0YWNrVHJhY2UgPSBsb2dTdGFja1RyYWNlO1xuICAgICAgICB0aGlzLnRpbWVzdGFtcEZvcm1hdCA9IHRpbWVzdGFtcEZvcm1hdDtcbiAgICB9XG4gICAgTG9nZ2VySW1wLnByb3RvdHlwZS5idWlsZE1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSwgbG9nTGV2ZWwsIGlzc3Vlcikge1xuICAgICAgICBpZiAoaXNzdWVyID09PSB2b2lkIDApIHsgaXNzdWVyID0gdW5kZWZpbmVkOyB9XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMzsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IpXG4gICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZS5tZXNzYWdlO1xuICAgICAgICBpZiAoaXNzdWVyKVxuICAgICAgICAgICAgbWVzc2FnZSA9IFwiW1wiLmNvbmNhdChpc3N1ZXIudG9TdHJpbmcoKSwgXCJdXCIpLmNvbmNhdChtZXNzYWdlKTtcbiAgICAgICAgaWYgKHRoaXMubG9nTGV2ZWwpXG4gICAgICAgICAgICBtZXNzYWdlID0gXCJbXCIuY29uY2F0KE9iamVjdC5rZXlzKGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMpW2xvZ0xldmVsXSwgXCJdIC0gXCIpLmNvbmNhdChtZXNzYWdlKTtcbiAgICAgICAgaWYgKHRoaXMudXNlVGltZXN0YW1wKVxuICAgICAgICAgICAgbWVzc2FnZSA9IFwiW1wiLmNvbmNhdCgoMCwgdXRpbHNfMS5mb3JtYXREYXRlKShuZXcgRGF0ZSgpLCB0aGlzLnRpbWVzdGFtcEZvcm1hdCksIFwiXVwiKS5jb25jYXQobWVzc2FnZSk7XG4gICAgICAgIHJldHVybiB1dGlsc18xLnN0cmluZ0Zvcm1hdC5hcHBseSh2b2lkIDAsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2VdLCBhcmdzLCBmYWxzZSkpO1xuICAgIH07XG4gICAgTG9nZ2VySW1wLnByb3RvdHlwZS5yZXBvcnQgPSBmdW5jdGlvbiAobWVzc2FnZSwgbGV2ZWwsIGlzc3Vlcikge1xuICAgICAgICBpZiAobGV2ZWwgPT09IHZvaWQgMCkgeyBsZXZlbCA9IGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuSU5GTzsgfVxuICAgICAgICBpZiAoaXNzdWVyID09PSB2b2lkIDApIHsgaXNzdWVyID0gdW5kZWZpbmVkOyB9XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMzsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZXZlbCA8IHRoaXMubGV2ZWwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciByZXBvcnRNZXRob2Q7XG4gICAgICAgIHN3aXRjaCAobGV2ZWwpIHtcbiAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5XQVJOOlxuICAgICAgICAgICAgICAgIHJlcG9ydE1ldGhvZCA9IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5FUlJPUjpcbiAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5DUklUSUNBTDpcbiAgICAgICAgICAgICAgICByZXBvcnRNZXRob2QgPSBjb25zb2xlLmVycm9yO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLklORk86XG4gICAgICAgICAgICBjYXNlIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuREVCVUc6XG4gICAgICAgICAgICBjYXNlIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuQUxMOlxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXBvcnRNZXRob2QgPSBjb25zb2xlLmxvZztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB2YXIgZmluYWxNZXNzYWdlID0gdGhpcy5idWlsZE1lc3NhZ2UuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheShbbWVzc2FnZSwgbGV2ZWwsIGlzc3Vlcl0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgICAgIHJlcG9ydE1ldGhvZChmaW5hbE1lc3NhZ2UpO1xuICAgICAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEVycm9yICYmIG1lc3NhZ2Uuc3RhY2sgJiYgdGhpcy5sb2dTdGFja1RyYWNlKVxuICAgICAgICAgICAgcmVwb3J0TWV0aG9kKHRoaXMuYnVpbGRNZXNzYWdlKFwiXFxuLS0gU3RhY2tTdHJhY2U6XFxuezB9XCIsIGxldmVsLCBpc3N1ZXIsIG1lc3NhZ2Uuc3RhY2spKTtcbiAgICB9O1xuICAgIExvZ2dlckltcC5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uIChtZXNzYWdlLCBpc3N1ZXIpIHtcbiAgICAgICAgaWYgKGlzc3VlciA9PT0gdm9pZCAwKSB7IGlzc3VlciA9IHVuZGVmaW5lZDsgfVxuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcG9ydC5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLklORk8sIGlzc3Vlcl0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgfTtcbiAgICBMb2dnZXJJbXAucHJvdG90eXBlLmFsbCA9IGZ1bmN0aW9uIChtZXNzYWdlLCBpc3N1ZXIpIHtcbiAgICAgICAgaWYgKGlzc3VlciA9PT0gdm9pZCAwKSB7IGlzc3VlciA9IHVuZGVmaW5lZDsgfVxuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcG9ydC5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkFMTCwgaXNzdWVyXSwgYXJncywgZmFsc2UpKTtcbiAgICB9O1xuICAgIExvZ2dlckltcC5wcm90b3R5cGUuZGVidWcgPSBmdW5jdGlvbiAobWVzc2FnZSwgaXNzdWVyKSB7XG4gICAgICAgIGlmIChpc3N1ZXIgPT09IHZvaWQgMCkgeyBpc3N1ZXIgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXBvcnQuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheShbbWVzc2FnZSwgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5ERUJVRywgaXNzdWVyXSwgYXJncywgZmFsc2UpKTtcbiAgICB9O1xuICAgIExvZ2dlckltcC5wcm90b3R5cGUud2FybiA9IGZ1bmN0aW9uIChtZXNzYWdlLCBpc3N1ZXIpIHtcbiAgICAgICAgaWYgKGlzc3VlciA9PT0gdm9pZCAwKSB7IGlzc3VlciA9IHVuZGVmaW5lZDsgfVxuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcG9ydC5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLldBUk4sIGlzc3Vlcl0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgfTtcbiAgICBMb2dnZXJJbXAucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UsIGlzc3Vlcikge1xuICAgICAgICBpZiAoaXNzdWVyID09PSB2b2lkIDApIHsgaXNzdWVyID0gdW5kZWZpbmVkOyB9XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVwb3J0LmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuRVJST1IsIGlzc3Vlcl0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgfTtcbiAgICBMb2dnZXJJbXAucHJvdG90eXBlLmNyaXRpY2FsID0gZnVuY3Rpb24gKG1lc3NhZ2UsIGlzc3Vlcikge1xuICAgICAgICBpZiAoaXNzdWVyID09PSB2b2lkIDApIHsgaXNzdWVyID0gdW5kZWZpbmVkOyB9XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVwb3J0LmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuQ1JJVElDQUwsIGlzc3Vlcl0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgfTtcbiAgICBMb2dnZXJJbXAucHJvdG90eXBlLnNldExldmVsID0gZnVuY3Rpb24gKGxldmVsKSB7XG4gICAgICAgIHRoaXMuZGVidWcoKDAsIHV0aWxzXzEuc3RyaW5nRm9ybWF0KShjb25zdGFudHNfMS5MT0dHSU5HX01TRy5MRVZFTF9DSEFOR0VELCB0aGlzLmxldmVsLnRvU3RyaW5nKCksIGxldmVsLnRvU3RyaW5nKCkpKTtcbiAgICAgICAgdGhpcy5sZXZlbCA9IGxldmVsO1xuICAgIH07XG4gICAgcmV0dXJuIExvZ2dlckltcDtcbn0oKSk7XG5leHBvcnRzLkxvZ2dlckltcCA9IExvZ2dlckltcDtcbnZhciBjdXJyZW50TG9nZ2VyO1xuZnVuY3Rpb24gZ2V0TG9nZ2VyKCkge1xuICAgIGlmICghY3VycmVudExvZ2dlcilcbiAgICAgICAgY3VycmVudExvZ2dlciA9IG5ldyBMb2dnZXJJbXAoKTtcbiAgICByZXR1cm4gY3VycmVudExvZ2dlcjtcbn1cbmV4cG9ydHMuZ2V0TG9nZ2VyID0gZ2V0TG9nZ2VyO1xuZnVuY3Rpb24gc2V0TG9nZ2VyKGxvZ2dlcikge1xuICAgIGN1cnJlbnRMb2dnZXIgPSBsb2dnZXI7XG4gICAgZ2V0TG9nZ2VyKCkuZGVidWcoY29uc3RhbnRzXzEuTE9HR0lOR19NU0cuTE9HR0VSX0NIQU5HRUQpO1xufVxuZXhwb3J0cy5zZXRMb2dnZXIgPSBzZXRMb2dnZXI7XG52YXIgaW5mbyA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgdmFyIF9hO1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgKF9hID0gZ2V0TG9nZ2VyKCkpLmluZm8uYXBwbHkoX2EsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIHRoaXNdLCBhcmdzLCBmYWxzZSkpO1xufTtcbmV4cG9ydHMuaW5mbyA9IGluZm87XG52YXIgYWxsID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICB2YXIgX2E7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICAoX2EgPSBnZXRMb2dnZXIoKSkuYWxsLmFwcGx5KF9hLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCB0aGlzXSwgYXJncywgZmFsc2UpKTtcbn07XG5leHBvcnRzLmFsbCA9IGFsbDtcbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgdmFyIF9hO1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgKF9hID0gZ2V0TG9nZ2VyKCkpLmRlYnVnLmFwcGx5KF9hLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCB0aGlzXSwgYXJncywgZmFsc2UpKTtcbn07XG5leHBvcnRzLmRlYnVnID0gZGVidWc7XG52YXIgd2FybiA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgdmFyIF9hO1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgKF9hID0gZ2V0TG9nZ2VyKCkpLndhcm4uYXBwbHkoX2EsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIHRoaXNdLCBhcmdzLCBmYWxzZSkpO1xufTtcbmV4cG9ydHMud2FybiA9IHdhcm47XG52YXIgZXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHZhciBfYTtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIChfYSA9IGdldExvZ2dlcigpKS5lcnJvci5hcHBseShfYSwgX19zcHJlYWRBcnJheShbbWVzc2FnZSwgdGhpc10sIGFyZ3MsIGZhbHNlKSk7XG59O1xuZXhwb3J0cy5lcnJvciA9IGVycm9yO1xudmFyIGNyaXRpY2FsID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICB2YXIgX2E7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICAoX2EgPSBnZXRMb2dnZXIoKSkuY3JpdGljYWwuYXBwbHkoX2EsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIHRoaXNdLCBhcmdzLCBmYWxzZSkpO1xufTtcbmV4cG9ydHMuY3JpdGljYWwgPSBjcml0aWNhbDsiLCIvKipcbiAqIEBuYW1lc3BhY2UgbG9nZ2luZy5sb2dnaW5nXG4gKiBAbWVtYmVyT2YgbG9nZ2luZ1xuICovXG5cbmV4cG9ydCAqIGZyb20gJy4vY29uc3RhbnRzJztcbmV4cG9ydCAqIGZyb20gJy4vbG9nZ2luZyc7XG5leHBvcnQgKiBmcm9tICcuL2RlY29yYXRvcnMnO1xuZXhwb3J0ICogZnJvbSAnLi91dGlscyc7IiwiLyoqXG4gKiBVdGlsIGZ1bmN0aW9uIHRvIHByb3ZpZGUgc3RyaW5nIGZvcm1hdCBmdW5jdGlvbmFsaXR5IHNpbWlsYXIgdG8gQyMncyBzdHJpbmcuZm9ybWF0XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IGFyZ3MgcmVwbGFjZW1lbnRzIG1hZGUgYnkgb3JkZXIgb2YgYXBwZWFyYW5jZSAocmVwbGFjZW1lbnQwIHdpbCByZXBsYWNlIHswfSBhbmQgc28gb24pXG4gKiBAcmV0dXJuIHtzdHJpbmd9IGZvcm1hdHRlZCBzdHJpbmdcbiAqXG4gKiBAZnVuY3Rpb24gc3RyaW5nRm9ybWF0XG4gKlxuICogQG1lbWJlck9mIGxvZ2dpbmcubG9nZ2luZ1xuICovXG5pbXBvcnQge0RBWVNfT0ZfV0VFS19OQU1FUywgTU9OVEhfTkFNRVN9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nRm9ybWF0KHN0cmluZzogc3RyaW5nLCAuLi5hcmdzOiBzdHJpbmdbXSl7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC97KFxcZCspfS9nLCBmdW5jdGlvbihtYXRjaCwgbnVtYmVyKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgYXJnc1tudW1iZXJdICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgPyBhcmdzW251bWJlcl1cbiAgICAgICAgICAgIDogbWF0Y2g7XG4gICAgfSk7XG59XG5cbi8qKlxuICogRGF0ZSBGb3JtYXQgSGFuZGxpbmdcbiAqIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM1NTI0NjEvaG93LXRvLWZvcm1hdC1hLWphdmFzY3JpcHQtZGF0ZVxuICpcbiAqIDxwcmU+XG4gKiAgICAgIFVzaW5nIHNpbWlsYXIgZm9ybWF0dGluZyBhcyBNb21lbnQuanMsIENsYXNzIERhdGVUaW1lRm9ybWF0dGVyIChKYXZhKSwgYW5kIENsYXNzIFNpbXBsZURhdGVGb3JtYXQgKEphdmEpLFxuICogICAgICBJIGltcGxlbWVudGVkIGEgY29tcHJlaGVuc2l2ZSBzb2x1dGlvbiBmb3JtYXREYXRlKGRhdGUsIHBhdHRlcm5TdHIpIHdoZXJlIHRoZSBjb2RlIGlzIGVhc3kgdG8gcmVhZCBhbmQgbW9kaWZ5LlxuICogICAgICBZb3UgY2FuIGRpc3BsYXkgZGF0ZSwgdGltZSwgQU0vUE0sIGV0Yy5cbiAqXG4gKiAgICAgIERhdGUgYW5kIFRpbWUgUGF0dGVybnNcbiAqICAgICAgeXkgPSAyLWRpZ2l0IHllYXI7IHl5eXkgPSBmdWxsIHllYXJcbiAqICAgICAgTSA9IGRpZ2l0IG1vbnRoOyBNTSA9IDItZGlnaXQgbW9udGg7IE1NTSA9IHNob3J0IG1vbnRoIG5hbWU7IE1NTU0gPSBmdWxsIG1vbnRoIG5hbWVcbiAqICAgICAgRUVFRSA9IGZ1bGwgd2Vla2RheSBuYW1lOyBFRUUgPSBzaG9ydCB3ZWVrZGF5IG5hbWVcbiAqICAgICAgZCA9IGRpZ2l0IGRheTsgZGQgPSAyLWRpZ2l0IGRheVxuICogICAgICBoID0gaG91cnMgYW0vcG07IGhoID0gMi1kaWdpdCBob3VycyBhbS9wbTsgSCA9IGhvdXJzOyBISCA9IDItZGlnaXQgaG91cnNcbiAqICAgICAgbSA9IG1pbnV0ZXM7IG1tID0gMi1kaWdpdCBtaW51dGVzOyBhYWEgPSBBTS9QTVxuICogICAgICBzID0gc2Vjb25kczsgc3MgPSAyLWRpZ2l0IHNlY29uZHNcbiAqICAgICAgUyA9IG1pbGlzZWNvbmRzXG4gKiA8L3ByZT5cbiAqXG4gKiBAcGFyYW0ge0RhdGV9IGRhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBbcGF0dGVyblN0cl0gZGVmYXVsdHMgdG8gJ3l5eXkvTU0vZGQnXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHRoZSBmb3JtYXR0ZWQgZGF0ZVxuICpcbiAqIEBmdW5jdGlvbiBmb3JtYXREYXRlXG4gKlxuICogQG1lbWJlck9mIGxvZ2dpbmcubG9nZ2luZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlOiBEYXRlLCBwYXR0ZXJuU3RyOiBzdHJpbmcgPSAneXl5eS9NTS9kZCcpe1xuICAgIGNvbnN0IGRheTogbnVtYmVyID0gZGF0ZS5nZXREYXRlKCksXG4gICAgICAgIG1vbnRoOiBudW1iZXIgPSBkYXRlLmdldE1vbnRoKCksXG4gICAgICAgIHllYXI6IG51bWJlciA9IGRhdGUuZ2V0RnVsbFllYXIoKSxcbiAgICAgICAgaG91cjogbnVtYmVyID0gZGF0ZS5nZXRIb3VycygpLFxuICAgICAgICBtaW51dGU6IG51bWJlciA9IGRhdGUuZ2V0TWludXRlcygpLFxuICAgICAgICBzZWNvbmQ6IG51bWJlciA9IGRhdGUuZ2V0U2Vjb25kcygpLFxuICAgICAgICBtaWxpc2Vjb25kczogbnVtYmVyID0gZGF0ZS5nZXRNaWxsaXNlY29uZHMoKSxcbiAgICAgICAgaDogbnVtYmVyID0gaG91ciAlIDEyLFxuICAgICAgICBoaDogc3RyaW5nID0gdHdvRGlnaXRQYWQoaCksXG4gICAgICAgIEhIOiBzdHJpbmcgPSB0d29EaWdpdFBhZChob3VyKSxcbiAgICAgICAgbW06IHN0cmluZyA9IHR3b0RpZ2l0UGFkKG1pbnV0ZSksXG4gICAgICAgIHNzOiBzdHJpbmcgPSB0d29EaWdpdFBhZChzZWNvbmQpLFxuICAgICAgICBhYWE6IHN0cmluZyA9IGhvdXIgPCAxMiA/ICdBTScgOiAnUE0nLFxuICAgICAgICBFRUVFOiBzdHJpbmcgPSBEQVlTX09GX1dFRUtfTkFNRVNbZGF0ZS5nZXREYXkoKV0sXG4gICAgICAgIEVFRTogc3RyaW5nID0gRUVFRS5zdWJzdHIoMCwgMyksXG4gICAgICAgIGRkOiBzdHJpbmcgPSB0d29EaWdpdFBhZChkYXkpLFxuICAgICAgICBNOiBudW1iZXIgPSBtb250aCArIDEsXG4gICAgICAgIE1NOiBzdHJpbmcgPSB0d29EaWdpdFBhZChNKSxcbiAgICAgICAgTU1NTTogc3RyaW5nID0gTU9OVEhfTkFNRVNbbW9udGhdLFxuICAgICAgICBNTU0gOiBzdHJpbmc9IE1NTU0uc3Vic3RyKDAsIDMpLFxuICAgICAgICB5eXl5OiBzdHJpbmcgPSB5ZWFyICsgXCJcIixcbiAgICAgICAgeXk6IHN0cmluZyA9IHl5eXkuc3Vic3RyKDIsIDIpXG4gICAgO1xuICAgIC8vIGNoZWNrcyB0byBzZWUgaWYgbW9udGggbmFtZSB3aWxsIGJlIHVzZWRcbiAgICBwYXR0ZXJuU3RyID0gcGF0dGVyblN0clxuICAgICAgICAucmVwbGFjZSgnaGgnLCBoaCkucmVwbGFjZSgnaCcsIGgudG9TdHJpbmcoKSlcbiAgICAgICAgLnJlcGxhY2UoJ0hIJywgSEgpLnJlcGxhY2UoJ0gnLCBob3VyLnRvU3RyaW5nKCkpXG4gICAgICAgIC5yZXBsYWNlKCdtbScsIG1tKS5yZXBsYWNlKCdtJywgbWludXRlLnRvU3RyaW5nKCkpXG4gICAgICAgIC5yZXBsYWNlKCdzcycsIHNzKS5yZXBsYWNlKCdzJywgc2Vjb25kLnRvU3RyaW5nKCkpXG4gICAgICAgIC5yZXBsYWNlKCdTJywgbWlsaXNlY29uZHMudG9TdHJpbmcoKSlcbiAgICAgICAgLnJlcGxhY2UoJ2RkJywgZGQpLnJlcGxhY2UoJ2QnLCBkYXkudG9TdHJpbmcoKSlcblxuICAgICAgICAucmVwbGFjZSgnRUVFRScsIEVFRUUpLnJlcGxhY2UoJ0VFRScsIEVFRSlcbiAgICAgICAgLnJlcGxhY2UoJ3l5eXknLCB5eXl5KVxuICAgICAgICAucmVwbGFjZSgneXknLCB5eSlcbiAgICAgICAgLnJlcGxhY2UoJ2FhYScsIGFhYSk7XG4gICAgaWYgKHBhdHRlcm5TdHIuaW5kZXhPZignTU1NJykgPiAtMSkge1xuICAgICAgICBwYXR0ZXJuU3RyID0gcGF0dGVyblN0clxuICAgICAgICAgICAgLnJlcGxhY2UoJ01NTU0nLCBNTU1NKVxuICAgICAgICAgICAgLnJlcGxhY2UoJ01NTScsIE1NTSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBwYXR0ZXJuU3RyID0gcGF0dGVyblN0clxuICAgICAgICAgICAgLnJlcGxhY2UoJ01NJywgTU0pXG4gICAgICAgICAgICAucmVwbGFjZSgnTScsIE0udG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIHJldHVybiBwYXR0ZXJuU3RyO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbnVtXG4gKlxuICogQHJldHVybiB7c3RyaW5nfVxuICpcbiAqIEBmdW5jdGlvbiB0d29EaWdpdFBhZFxuICpcbiAqIEBtZW1iZXJPZiBsb2dnaW5nLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHR3b0RpZ2l0UGFkKG51bTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gbnVtIDwgMTAgPyBcIjBcIiArIG51bSA6IG51bS50b1N0cmluZygpO1xufSIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy50d29EaWdpdFBhZCA9IGV4cG9ydHMuZm9ybWF0RGF0ZSA9IGV4cG9ydHMuc3RyaW5nRm9ybWF0ID0gdm9pZCAwO1xudmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4vY29uc3RhbnRzXCIpO1xuZnVuY3Rpb24gc3RyaW5nRm9ybWF0KHN0cmluZykge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC97KFxcZCspfS9nLCBmdW5jdGlvbiAobWF0Y2gsIG51bWJlcikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGFyZ3NbbnVtYmVyXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgID8gYXJnc1tudW1iZXJdXG4gICAgICAgICAgICA6IG1hdGNoO1xuICAgIH0pO1xufVxuZXhwb3J0cy5zdHJpbmdGb3JtYXQgPSBzdHJpbmdGb3JtYXQ7XG5mdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUsIHBhdHRlcm5TdHIpIHtcbiAgICBpZiAocGF0dGVyblN0ciA9PT0gdm9pZCAwKSB7IHBhdHRlcm5TdHIgPSAneXl5eS9NTS9kZCc7IH1cbiAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXRlKCksIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpLCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpLCBob3VyID0gZGF0ZS5nZXRIb3VycygpLCBtaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKSwgc2Vjb25kID0gZGF0ZS5nZXRTZWNvbmRzKCksIG1pbGlzZWNvbmRzID0gZGF0ZS5nZXRNaWxsaXNlY29uZHMoKSwgaCA9IGhvdXIgJSAxMiwgaGggPSB0d29EaWdpdFBhZChoKSwgSEggPSB0d29EaWdpdFBhZChob3VyKSwgbW0gPSB0d29EaWdpdFBhZChtaW51dGUpLCBzcyA9IHR3b0RpZ2l0UGFkKHNlY29uZCksIGFhYSA9IGhvdXIgPCAxMiA/ICdBTScgOiAnUE0nLCBFRUVFID0gY29uc3RhbnRzXzEuREFZU19PRl9XRUVLX05BTUVTW2RhdGUuZ2V0RGF5KCldLCBFRUUgPSBFRUVFLnN1YnN0cigwLCAzKSwgZGQgPSB0d29EaWdpdFBhZChkYXkpLCBNID0gbW9udGggKyAxLCBNTSA9IHR3b0RpZ2l0UGFkKE0pLCBNTU1NID0gY29uc3RhbnRzXzEuTU9OVEhfTkFNRVNbbW9udGhdLCBNTU0gPSBNTU1NLnN1YnN0cigwLCAzKSwgeXl5eSA9IHllYXIgKyBcIlwiLCB5eSA9IHl5eXkuc3Vic3RyKDIsIDIpO1xuICAgIHBhdHRlcm5TdHIgPSBwYXR0ZXJuU3RyXG4gICAgICAgIC5yZXBsYWNlKCdoaCcsIGhoKS5yZXBsYWNlKCdoJywgaC50b1N0cmluZygpKVxuICAgICAgICAucmVwbGFjZSgnSEgnLCBISCkucmVwbGFjZSgnSCcsIGhvdXIudG9TdHJpbmcoKSlcbiAgICAgICAgLnJlcGxhY2UoJ21tJywgbW0pLnJlcGxhY2UoJ20nLCBtaW51dGUudG9TdHJpbmcoKSlcbiAgICAgICAgLnJlcGxhY2UoJ3NzJywgc3MpLnJlcGxhY2UoJ3MnLCBzZWNvbmQudG9TdHJpbmcoKSlcbiAgICAgICAgLnJlcGxhY2UoJ1MnLCBtaWxpc2Vjb25kcy50b1N0cmluZygpKVxuICAgICAgICAucmVwbGFjZSgnZGQnLCBkZCkucmVwbGFjZSgnZCcsIGRheS50b1N0cmluZygpKVxuICAgICAgICAucmVwbGFjZSgnRUVFRScsIEVFRUUpLnJlcGxhY2UoJ0VFRScsIEVFRSlcbiAgICAgICAgLnJlcGxhY2UoJ3l5eXknLCB5eXl5KVxuICAgICAgICAucmVwbGFjZSgneXknLCB5eSlcbiAgICAgICAgLnJlcGxhY2UoJ2FhYScsIGFhYSk7XG4gICAgaWYgKHBhdHRlcm5TdHIuaW5kZXhPZignTU1NJykgPiAtMSkge1xuICAgICAgICBwYXR0ZXJuU3RyID0gcGF0dGVyblN0clxuICAgICAgICAgICAgLnJlcGxhY2UoJ01NTU0nLCBNTU1NKVxuICAgICAgICAgICAgLnJlcGxhY2UoJ01NTScsIE1NTSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBwYXR0ZXJuU3RyID0gcGF0dGVyblN0clxuICAgICAgICAgICAgLnJlcGxhY2UoJ01NJywgTU0pXG4gICAgICAgICAgICAucmVwbGFjZSgnTScsIE0udG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIHJldHVybiBwYXR0ZXJuU3RyO1xufVxuZXhwb3J0cy5mb3JtYXREYXRlID0gZm9ybWF0RGF0ZTtcbmZ1bmN0aW9uIHR3b0RpZ2l0UGFkKG51bSkge1xuICAgIHJldHVybiBudW0gPCAxMCA/IFwiMFwiICsgbnVtIDogbnVtLnRvU3RyaW5nKCk7XG59XG5leHBvcnRzLnR3b0RpZ2l0UGFkID0gdHdvRGlnaXRQYWQ7Il19
