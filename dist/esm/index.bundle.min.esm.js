"use strict";var __createBinding=Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){e[o=void 0===o?r:o]=t[r]},__exportStar=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||__createBinding(t,e,r)},__extends=(!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","./errors","./logging"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),__exportStar(e("./errors"),t),__exportStar(e("./logging"),t)}),function(){var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__spreadArray=function(e,t,r){if(r||2===arguments.length)for(var o,n=0,a=t.length;n<a;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},__createBinding=(!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","../logging"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CriticalError=t.LoggedError=t.criticalCallback=t.errorCallback=t.warningCallback=t.infoCallback=t.debugCallback=t.allCallback=t.loggedCallback=void 0;var i=e("../logging");function n(e,t,r){for(var o=[],n=3;n<arguments.length;n++)o[n-3]=arguments[n];r(new(a.bind.apply(a,__spreadArray([void 0,e,this&&"loggedCallback"!==this.name?this:void 0,t],o,!1))))}t.loggedCallback=n,t.allCallback=function(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];n.call.apply(n,__spreadArray([this,e,i.LOGGER_LEVELS.ALL,t],r,!1))},t.debugCallback=function(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];n.call.apply(n,__spreadArray([this,e,i.LOGGER_LEVELS.DEBUG,t],r,!1))},t.infoCallback=function(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];n.call.apply(n,__spreadArray([this,e,i.LOGGER_LEVELS.INFO,t],r,!1))},t.warningCallback=function(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];n.call.apply(n,__spreadArray([this,e,i.LOGGER_LEVELS.WARN,t],r,!1))},t.errorCallback=function(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];n.call.apply(n,__spreadArray([this,e,i.LOGGER_LEVELS.ERROR,t],r,!1))},t.criticalCallback=function(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];n.call.apply(n,__spreadArray([this,e,i.LOGGER_LEVELS.CRITICAL,t],r,!1))};c=Error,__extends(r,c);var c,a=r;function r(e,t,r){void 0===t&&(t=void 0),void 0===r&&(r=i.LOGGER_LEVELS.ALL);for(var o=[],n=3;n<arguments.length;n++)o[n-3]=arguments[n];var a=c.call(this,e instanceof Error?e.message:e)||this;return a.name="LoggedError",a.loggedAt=e instanceof Error&&"LoggedError"===e.name?e.loggedAt:void 0,a.issuer=t,(void 0===e.loggedAt||e.loggedAt<r)&&((e=(0,i.getLogger)()).report.apply(e,__spreadArray([a,r,t],o,!1)),a.loggedAt=r),a}t.LoggedError=a;__extends(o,l=a);var l,e=o;function o(e,t){void 0===t&&(t=void 0);for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return l.apply(this,__spreadArray([e,t,i.LOGGER_LEVELS.CRITICAL],r,!1))||this}t.CriticalError=e}),Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){e[o=void 0===o?r:o]=t[r]}),__exportStar=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||__createBinding(t,e,r)},__spreadArray=(!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","./errors"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),__exportStar(e("./errors"),t)}),function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DAYS_OF_WEEK_NAMES=t.MONTH_NAMES=t.DEFAULT_TIMESTAMP_FORMAT=t.LOGGING_MSG=t.LOGGER_LEVELS=void 0,t.LOGGER_LEVELS={ALL:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,CRITICAL:5},t.LOGGING_MSG={LEVEL_CHANGED:"Logger Level changed from {0} to {1}",LOGGER_CHANGED:"Logger changed"},t.DEFAULT_TIMESTAMP_FORMAT="dd/MM/yyyy HH:mm:ss:S",t.MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"],t.DAYS_OF_WEEK_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}),function(e,t,r){if(r||2===arguments.length)for(var o,n=0,a=t.length;n<a;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}),__createBinding=(!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","../errors","./logging","./constants"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.logSync=t.logAsync=t.StopWatch=void 0;var s=e("../errors"),p=e("./logging"),r=e("./constants"),u=(o.prototype.start=function(){this.startTime=Date.now()},o.prototype.check=function(){if(!this.startTime)throw new Error("StopWatch didnt start");return Date.now()-this.startTime},o.prototype.stop=function(){var e=this.check();return this.startTime=void 0,e},o);function o(){}t.StopWatch=u,t.logAsync=function(c,l){return void 0===c&&(c=r.LOGGER_LEVELS.DEBUG),l||"boolean"!=typeof c||(l=c,c=r.LOGGER_LEVELS.DEBUG),function(e,i,t){var r=t.value;t.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=e.pop();if(!o||"function"!=typeof o)throw new s.CriticalError("Missing Callback");var n,a=this.name&&"Function"!==this.name?this.name:this.constructor&&this.constructor.name||this;(0,p.getLogger)().report("[{0}] - Entering Method {1} with args: {2}",c,a,i,e.map(function(e){return e.toString()}).join(" | "));l&&(n=new u).start(),r.call.apply(r,__spreadArray(__spreadArray([this.__originalObject||this],e,!1),[function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n&&(0,p.getLogger)().report("[{0}][BENCHMARK] - Leaving Method {1} after {2}ms",c,a,i,n.stop()),e)return(0,p.getLogger)().report("[{0}][ERROR] - Leaving Method {1} with error {2}",c,a,i,e),o(e);(0,p.getLogger)().report("[{0}] - Leaving Method {1} with results: {2}",c,a,i,t?t.map(function(e){return e.toString()}).join(" | "):"void"),o.apply(void 0,__spreadArray([void 0],t,!1))}],!1))}}},t.logSync=function(c,l){return void 0===c&&(c=r.LOGGER_LEVELS.DEBUG),l||"boolean"!=typeof c||(l=c,c=r.LOGGER_LEVELS.DEBUG),function(e,a,t){var i=t.value;t.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r,o=this.name&&"Function"!==this.name?this.name:this.constructor&&this.constructor.name||this,n=((0,p.getLogger)().report("[{0}] - Entering Method {1} with args: {2}",c,o,a,e.map(function(e){return e.toString()}).join(" | ")),void 0);l&&(n=new u).start();try{r=i.call.apply(i,__spreadArray([this.__originalObject||this],e,!1))}catch(e){throw n&&(0,p.getLogger)().report("[{0}][BENCHMARK] - Leaving Method {1} after {2}ms",c,o,a,n.stop()),(0,p.getLogger)().report("[{0}][ERROR] - Leaving Method {1} with error {2}",c,o,a,e),e}return n&&(0,p.getLogger)().report("[{0}][BENCHMARK] - Leaving Method {1} after {2}ms",c,o,a,n.stop()),(0,p.getLogger)().report("[{0}] - Leaving Method {1} with results: {2}",c,o,a,r||"void"),r}}}}),Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){e[o=void 0===o?r:o]=t[r]}),__exportStar=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||__createBinding(t,e,r)},__spreadArray=(!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","./constants","./logging","./decorators","./utils"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),__exportStar(e("./constants"),t),__exportStar(e("./logging"),t),__exportStar(e("./decorators"),t),__exportStar(e("./utils"),t)}),function(e,t,r){if(r||2===arguments.length)for(var o,n=0,a=t.length;n<a;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))});!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","./constants","./utils"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.critical=t.error=t.warn=t.debug=t.all=t.info=t.setLogger=t.getLogger=t.LoggerImp=void 0;var r,i=e("./constants"),a=e("./utils"),o=(n.prototype.buildMessage=function(e,t,r){void 0===r&&(r=void 0);for(var o=[],n=3;n<arguments.length;n++)o[n-3]=arguments[n];return e instanceof Error&&(e=e.message),r&&(e="[".concat(r.toString(),"]").concat(e)),this.logLevel&&(e="[".concat(Object.keys(i.LOGGER_LEVELS)[t],"] - ").concat(e)),this.useTimestamp&&(e="[".concat((0,a.formatDate)(new Date,this.timestampFormat),"]").concat(e)),a.stringFormat.apply(void 0,__spreadArray([e],o,!1))},n.prototype.report=function(e,t,r){void 0===t&&(t=i.LOGGER_LEVELS.INFO),void 0===r&&(r=void 0);for(var o,n=[],a=3;a<arguments.length;a++)n[a-3]=arguments[a];if(!(t<this.level)){switch(t){case i.LOGGER_LEVELS.WARN:o=console.warn;break;case i.LOGGER_LEVELS.ERROR:case i.LOGGER_LEVELS.CRITICAL:o=console.error;break;case i.LOGGER_LEVELS.INFO:case i.LOGGER_LEVELS.DEBUG:case i.LOGGER_LEVELS.ALL:default:o=console.log}o(this.buildMessage.apply(this,__spreadArray([e,t,r],n,!1))),e instanceof Error&&e.stack&&this.logStackTrace&&o(this.buildMessage("\n-- StackStrace:\n{0}",t,r,e.stack))}},n.prototype.info=function(e,t){void 0===t&&(t=void 0);for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];this.report.apply(this,__spreadArray([e,i.LOGGER_LEVELS.INFO,t],r,!1))},n.prototype.all=function(e,t){void 0===t&&(t=void 0);for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];this.report.apply(this,__spreadArray([e,i.LOGGER_LEVELS.ALL,t],r,!1))},n.prototype.debug=function(e,t){void 0===t&&(t=void 0);for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];this.report.apply(this,__spreadArray([e,i.LOGGER_LEVELS.DEBUG,t],r,!1))},n.prototype.warn=function(e,t){void 0===t&&(t=void 0);for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];this.report.apply(this,__spreadArray([e,i.LOGGER_LEVELS.WARN,t],r,!1))},n.prototype.error=function(e,t){void 0===t&&(t=void 0);for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];this.report.apply(this,__spreadArray([e,i.LOGGER_LEVELS.ERROR,t],r,!1))},n.prototype.critical=function(e,t){void 0===t&&(t=void 0);for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];this.report.apply(this,__spreadArray([e,i.LOGGER_LEVELS.CRITICAL,t],r,!1))},n.prototype.setLevel=function(e){this.debug((0,a.stringFormat)(i.LOGGING_MSG.LEVEL_CHANGED,this.level.toString(),e.toString())),this.level=e},n);function n(e,t,r,o,n){void 0===e&&(e=i.LOGGER_LEVELS.INFO),void 0===t&&(t=!0),void 0===r&&(r=!0),void 0===o&&(o=!1),void 0===n&&(n=i.DEFAULT_TIMESTAMP_FORMAT),this.level=e,this.useTimestamp=t,this.logLevel=r,this.logStackTrace=o,this.timestampFormat=n}function c(){return r=r||new o}t.LoggerImp=o,t.getLogger=c,t.setLogger=function(e){r=e,c().debug(i.LOGGING_MSG.LOGGER_CHANGED)};t.info=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];(t=c()).info.apply(t,__spreadArray([e,this],r,!1))},t.all=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];(t=c()).all.apply(t,__spreadArray([e,this],r,!1))},t.debug=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];(t=c()).debug.apply(t,__spreadArray([e,this],r,!1))},t.warn=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];(t=c()).warn.apply(t,__spreadArray([e,this],r,!1))},t.error=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];(t=c()).error.apply(t,__spreadArray([e,this],r,!1))};t.critical=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];(t=c()).critical.apply(t,__spreadArray([e,this],r,!1))}}),function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","./constants"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.twoDigitPad=t.formatDate=t.stringFormat=void 0;var G=e("./constants");function A(e){return e<10?"0"+e:e.toString()}t.stringFormat=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return e.replace(/{(\d+)}/g,function(e,t){return void 0!==r[t]?r[t]:e})},t.formatDate=function(e,t){void 0===t&&(t="yyyy/MM/dd");var r=e.getDate(),o=e.getMonth(),n=e.getFullYear(),a=e.getHours(),i=e.getMinutes(),c=e.getSeconds(),p=e.getMilliseconds(),l=a%12,u=A(l),d=A(a),f=A(i),g=A(c),_=a<12?"AM":"PM",y=(e=G.DAYS_OF_WEEK_NAMES[e.getDay()]).substr(0,3),E=A(r),s=o+1,L=A(s),h=(o=G.MONTH_NAMES[o]).substr(0,3),v=(n=n+"").substr(2,2);return t=-1<(t=t.replace("hh",u).replace("h",l.toString()).replace("HH",d).replace("H",a.toString()).replace("mm",f).replace("m",i.toString()).replace("ss",g).replace("s",c.toString()).replace("S",p.toString()).replace("dd",E).replace("d",r.toString()).replace("EEEE",e).replace("EEE",y).replace("yyyy",n).replace("yy",v).replace("aaa",_)).indexOf("MMM")?t.replace("MMMM",o).replace("MMM",h):t.replace("MM",L).replace("M",s.toString())},t.twoDigitPad=A});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiZXJyb3JzL2Vycm9ycy5qcyIsImluZGV4LnRzIiwiZXJyb3JzL2luZGV4LmpzIiwiZXJyb3JzL2Vycm9ycy50cyIsImxvZ2dpbmcvZGVjb3JhdG9ycy5qcyIsImVycm9ycy9pbmRleC50cyIsImxvZ2dpbmcvY29uc3RhbnRzLmpzIiwibG9nZ2luZy9jb25zdGFudHMudHMiLCJsb2dnaW5nL2luZGV4LmpzIiwibG9nZ2luZy9kZWNvcmF0b3JzLnRzIiwibG9nZ2luZy9sb2dnaW5nLmpzIiwibG9nZ2luZy9pbmRleC50cyIsImxvZ2dpbmcvbG9nZ2luZy50cyIsImxvZ2dpbmcvdXRpbHMuanMiLCJsb2dnaW5nL3V0aWxzLnRzIl0sIm5hbWVzIjpbIl9fY3JlYXRlQmluZGluZyIsIk9iamVjdCIsImNyZWF0ZSIsIm8iLCJtIiwiayIsImsyIiwidW5kZWZpbmVkIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiX19leHBvcnRTdGFyIiwiZXhwb3J0cyIsInAiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJfX2V4dGVuZHMiLCJmYWN0b3J5IiwibW9kdWxlIiwicmVxdWlyZSIsImRlZmluZSIsImFtZCIsInZhbHVlIiwiZXh0ZW5kU3RhdGljcyIsImQiLCJiIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsIlR5cGVFcnJvciIsIlN0cmluZyIsIl9fIiwidGhpcyIsImNvbnN0cnVjdG9yIiwiX19zcHJlYWRBcnJheSIsInRvIiwiZnJvbSIsInBhY2siLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJhciIsImkiLCJsIiwic2xpY2UiLCJjb25jYXQiLCJDcml0aWNhbEVycm9yIiwiTG9nZ2VkRXJyb3IiLCJjcml0aWNhbENhbGxiYWNrIiwiZXJyb3JDYWxsYmFjayIsIndhcm5pbmdDYWxsYmFjayIsImluZm9DYWxsYmFjayIsImRlYnVnQ2FsbGJhY2siLCJhbGxDYWxsYmFjayIsImxvZ2dlZENhbGxiYWNrIiwibG9nZ2luZ18xIiwibWVzc2FnZSIsImxldmVsIiwiY2FsbGJhY2siLCJhcmdzIiwiX2kiLCJiaW5kIiwiYXBwbHkiLCJuYW1lIiwiTE9HR0VSX0xFVkVMUyIsIkFMTCIsIkRFQlVHIiwiSU5GTyIsIldBUk4iLCJFUlJPUiIsIkNSSVRJQ0FMIiwiX3N1cGVyIiwiRXJyb3IiLCJlcnJvciIsImlzc3VlciIsIl90aGlzIiwibG9nZ2VkQXQiLCJfYSIsImdldExvZ2dlciIsInJlcG9ydCIsIkRBWVNfT0ZfV0VFS19OQU1FUyIsIk1PTlRIX05BTUVTIiwiREVGQVVMVF9USU1FU1RBTVBfRk9STUFUIiwiTE9HR0lOR19NU0ciLCJMRVZFTF9DSEFOR0VEIiwiTE9HR0VSX0NIQU5HRUQiLCJsb2dTeW5jIiwibG9nQXN5bmMiLCJTdG9wV2F0Y2giLCJlcnJvcnNfMSIsImNvbnN0YW50c18xIiwic3RhcnQiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwiY2hlY2siLCJzdG9wIiwicmVzdWx0IiwiYmVuY2htYXJrIiwidGFyZ2V0IiwicHJvcGVydHlLZXkiLCJkZXNjcmlwdG9yIiwib3JpZ2luYWxNZXRob2QiLCJwb3AiLCJzdG9wV2F0Y2giLCJtYXAiLCJhIiwidG9TdHJpbmciLCJqb2luIiwiX19vcmlnaW5hbE9iamVjdCIsImVyciIsInJlc3VsdHMiLCJlIiwiY3JpdGljYWwiLCJ3YXJuIiwiZGVidWciLCJhbGwiLCJpbmZvIiwic2V0TG9nZ2VyIiwiTG9nZ2VySW1wIiwiY3VycmVudExvZ2dlciIsInV0aWxzXzEiLCJidWlsZE1lc3NhZ2UiLCJsb2dMZXZlbCIsImtleXMiLCJ1c2VUaW1lc3RhbXAiLCJmb3JtYXREYXRlIiwidGltZXN0YW1wRm9ybWF0Iiwic3RyaW5nRm9ybWF0IiwicmVwb3J0TWV0aG9kIiwiY29uc29sZSIsImxvZyIsInN0YWNrIiwibG9nU3RhY2tUcmFjZSIsInNldExldmVsIiwiZGVmYXVsdExldmVsIiwibG9nZ2VyIiwidHdvRGlnaXRQYWQiLCJudW0iLCJzdHJpbmciLCJyZXBsYWNlIiwibWF0Y2giLCJudW1iZXIiLCJkYXRlIiwicGF0dGVyblN0ciIsImRheSIsImdldERhdGUiLCJtb250aCIsImdldE1vbnRoIiwieWVhciIsImdldEZ1bGxZZWFyIiwiaG91ciIsImdldEhvdXJzIiwibWludXRlIiwiZ2V0TWludXRlcyIsInNlY29uZCIsImdldFNlY29uZHMiLCJtaWxpc2Vjb25kcyIsImdldE1pbGxpc2Vjb25kcyIsImgiLCJoaCIsIkhIIiwibW0iLCJzcyIsImFhYSIsIkVFRSIsIkVFRUUiLCJnZXREYXkiLCJzdWJzdHIiLCJkZCIsIk0iLCJNTSIsIk1NTSIsIk1NTU0iLCJ5eSIsInl5eXkiLCJpbmRleE9mIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFJQSxnQkFBcURDLE9BQU9DLE9BQVUsU0FBU0MsRUFBR0MsRUFBR0MsRUFBR0MsUUFDN0VDLElBQVBELElBQWtCQSxFQUFLRCxHQUMzQkosT0FBT08sZUFBZUwsRUFBR0csRUFBSSxDQUFFRyxZQUFZLEVBQU1DLElBQUssV0FBYSxPQUFPTixFQUFFQyxPQUMxRSxTQUFTRixFQUFHQyxFQUFHQyxFQUFHQyxHQUVwQkgsRUFEc0JHLE9BQVhDLElBQVBELEVBQXVCRCxFQUN6QkMsR0FBTUYsRUFBRUMsSUFFVk0sYUFBOEMsU0FBU1AsRUFBR1EsR0FDMUQsSUFBSyxJQUFJQyxLQUFLVCxFQUFhLFlBQU5TLEdBQW9CWixPQUFPYSxVQUFVQyxlQUFlQyxLQUFLSixFQUFTQyxJQUFJYixnQkFBZ0JZLEVBQVNSLEVBQUdTLElDUnZISSxZRFVKLFNBQVdDLEdBQ2UsaUJBQVhDLFFBQWlELGlCQUFuQkEsT0FBT1AsUUFDcENNLEVBQVFFLFFBQVNSLFNBR0YsbUJBQVhTLFFBQXlCQSxPQUFPQyxLQUM1Q0QsT0FBTyxDQUFDLFVBQVcsVUFBVyxXQUFZLGFBQWNILEdBTmhFLENBUUcsU0FBVUUsRUFBU1IsR0FFbEJYLE9BQU9PLGVBQWVJLEVBQVMsYUFBYyxDQUFFVyxPQUFPLElFaEIxRFosYUFBQVMsRUFBQSxZQUFBUixHQUNB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LEVBQVEsRUFDcEJ3QixFQUFhbEMsRUFBWWlDLEdBRXpCRSxHQUFjQyxFQURDbkYsRUFBQVQsWUFBWWtFLElBQ1JxQixPQUFPLEVBQUcsR0FFN0JNLEdBQWFDLEVBREUxQixFQUFPLElBQ0ptQixPQUFPLEVBQUcsR0F5QmhDLE9BVEl4QixHQUQ2QixHQVpqQ0EsRUFBYUEsRUFDUkosUUFBUSxLQUFNb0IsR0FBSXBCLFFBQVEsSUFBS21CLEVBQUVwRCxZQUNqQ2lDLFFBQVEsS0FBTXFCLEdBQUlyQixRQUFRLElBQUtXLEVBQUs1QyxZQUNwQ2lDLFFBQVEsS0FBTXNCLEdBQUl0QixRQUFRLElBQUthLEVBQU85QyxZQUN0Q2lDLFFBQVEsS0FBTXVCLEdBQUl2QixRQUFRLElBQUtlLEVBQU9oRCxZQUN0Q2lDLFFBQVEsSUFBS2lCLEVBQVlsRCxZQUN6QmlDLFFBQVEsS0FBTTZCLEdBQUk3QixRQUFRLElBQUtLLEVBQUl0QyxZQUVuQ2lDLFFBQVEsT0FBUTBCLEdBQU0xQixRQUFRLE1BQU95QixHQUNyQ3pCLFFBQVEsT0FBUW1DLEdBQ2hCbkMsUUFBUSxLQUFNa0MsR0FDZGxDLFFBQVEsTUFBT3dCLElBQ0xZLFFBQVEsT0FDTmhDLEVBQ1JKLFFBQVEsT0FBUWlDLEdBQ2hCakMsUUFBUSxNQUFPZ0MsR0FHUDVCLEVBQ1JKLFFBQVEsS0FBTStCLEdBQ2QvQixRQUFRLElBQUs4QixFQUFFL0QsYUFlNUIvRixFQUFBNkgsWUFBQUEiLCJmaWxlIjoiaW5kZXguYnVuZGxlLm1pbi5lc20uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fZXhwb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19leHBvcnRTdGFyKSB8fCBmdW5jdGlvbihtLCBleHBvcnRzKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChleHBvcnRzLCBwKSkgX19jcmVhdGVCaW5kaW5nKGV4cG9ydHMsIG0sIHApO1xufTtcbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICB2YXIgdiA9IGZhY3RvcnkocmVxdWlyZSwgZXhwb3J0cyk7XG4gICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIG1vZHVsZS5leHBvcnRzID0gdjtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9lcnJvcnNcIiwgXCIuL2xvZ2dpbmdcIl0sIGZhY3RvcnkpO1xuICAgIH1cbn0pKGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9lcnJvcnNcIiksIGV4cG9ydHMpO1xuICAgIF9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9sb2dnaW5nXCIpLCBleHBvcnRzKTtcbn0pOyIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgdmFyIHYgPSBmYWN0b3J5KHJlcXVpcmUsIGV4cG9ydHMpO1xuICAgICAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSBtb2R1bGUuZXhwb3J0cyA9IHY7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL2xvZ2dpbmdcIl0sIGZhY3RvcnkpO1xuICAgIH1cbn0pKGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIGV4cG9ydHMuQ3JpdGljYWxFcnJvciA9IGV4cG9ydHMuTG9nZ2VkRXJyb3IgPSBleHBvcnRzLmNyaXRpY2FsQ2FsbGJhY2sgPSBleHBvcnRzLmVycm9yQ2FsbGJhY2sgPSBleHBvcnRzLndhcm5pbmdDYWxsYmFjayA9IGV4cG9ydHMuaW5mb0NhbGxiYWNrID0gZXhwb3J0cy5kZWJ1Z0NhbGxiYWNrID0gZXhwb3J0cy5hbGxDYWxsYmFjayA9IGV4cG9ydHMubG9nZ2VkQ2FsbGJhY2sgPSB2b2lkIDA7XG4gICAgdmFyIGxvZ2dpbmdfMSA9IHJlcXVpcmUoXCIuLi9sb2dnaW5nXCIpO1xuICAgIGZ1bmN0aW9uIGxvZ2dlZENhbGxiYWNrKG1lc3NhZ2UsIGxldmVsLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDNdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZXJyb3IgPSBuZXcgKExvZ2dlZEVycm9yLmJpbmQuYXBwbHkoTG9nZ2VkRXJyb3IsIF9fc3ByZWFkQXJyYXkoW3ZvaWQgMCwgbWVzc2FnZSwgdGhpcyAmJiB0aGlzLm5hbWUgIT09IFwibG9nZ2VkQ2FsbGJhY2tcIiA/IHRoaXMgOiB1bmRlZmluZWQsIGxldmVsXSwgYXJncywgZmFsc2UpKSkoKTtcbiAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xuICAgIH1cbiAgICBleHBvcnRzLmxvZ2dlZENhbGxiYWNrID0gbG9nZ2VkQ2FsbGJhY2s7XG4gICAgZnVuY3Rpb24gYWxsQ2FsbGJhY2sobWVzc2FnZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VkQ2FsbGJhY2suY2FsbC5hcHBseShsb2dnZWRDYWxsYmFjaywgX19zcHJlYWRBcnJheShbdGhpcywgbWVzc2FnZSwgbG9nZ2luZ18xLkxPR0dFUl9MRVZFTFMuQUxMLCBjYWxsYmFja10sIGFyZ3MsIGZhbHNlKSk7XG4gICAgfVxuICAgIGV4cG9ydHMuYWxsQ2FsbGJhY2sgPSBhbGxDYWxsYmFjaztcbiAgICBmdW5jdGlvbiBkZWJ1Z0NhbGxiYWNrKG1lc3NhZ2UsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwuYXBwbHkobG9nZ2VkQ2FsbGJhY2ssIF9fc3ByZWFkQXJyYXkoW3RoaXMsIG1lc3NhZ2UsIGxvZ2dpbmdfMS5MT0dHRVJfTEVWRUxTLkRFQlVHLCBjYWxsYmFja10sIGFyZ3MsIGZhbHNlKSk7XG4gICAgfVxuICAgIGV4cG9ydHMuZGVidWdDYWxsYmFjayA9IGRlYnVnQ2FsbGJhY2s7XG4gICAgZnVuY3Rpb24gaW5mb0NhbGxiYWNrKG1lc3NhZ2UsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwuYXBwbHkobG9nZ2VkQ2FsbGJhY2ssIF9fc3ByZWFkQXJyYXkoW3RoaXMsIG1lc3NhZ2UsIGxvZ2dpbmdfMS5MT0dHRVJfTEVWRUxTLklORk8sIGNhbGxiYWNrXSwgYXJncywgZmFsc2UpKTtcbiAgICB9XG4gICAgZXhwb3J0cy5pbmZvQ2FsbGJhY2sgPSBpbmZvQ2FsbGJhY2s7XG4gICAgZnVuY3Rpb24gd2FybmluZ0NhbGxiYWNrKG1lc3NhZ2UsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwuYXBwbHkobG9nZ2VkQ2FsbGJhY2ssIF9fc3ByZWFkQXJyYXkoW3RoaXMsIG1lc3NhZ2UsIGxvZ2dpbmdfMS5MT0dHRVJfTEVWRUxTLldBUk4sIGNhbGxiYWNrXSwgYXJncywgZmFsc2UpKTtcbiAgICB9XG4gICAgZXhwb3J0cy53YXJuaW5nQ2FsbGJhY2sgPSB3YXJuaW5nQ2FsbGJhY2s7XG4gICAgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhtZXNzYWdlLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZWRDYWxsYmFjay5jYWxsLmFwcGx5KGxvZ2dlZENhbGxiYWNrLCBfX3NwcmVhZEFycmF5KFt0aGlzLCBtZXNzYWdlLCBsb2dnaW5nXzEuTE9HR0VSX0xFVkVMUy5FUlJPUiwgY2FsbGJhY2tdLCBhcmdzLCBmYWxzZSkpO1xuICAgIH1cbiAgICBleHBvcnRzLmVycm9yQ2FsbGJhY2sgPSBlcnJvckNhbGxiYWNrO1xuICAgIGZ1bmN0aW9uIGNyaXRpY2FsQ2FsbGJhY2sobWVzc2FnZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VkQ2FsbGJhY2suY2FsbC5hcHBseShsb2dnZWRDYWxsYmFjaywgX19zcHJlYWRBcnJheShbdGhpcywgbWVzc2FnZSwgbG9nZ2luZ18xLkxPR0dFUl9MRVZFTFMuQ1JJVElDQUwsIGNhbGxiYWNrXSwgYXJncywgZmFsc2UpKTtcbiAgICB9XG4gICAgZXhwb3J0cy5jcml0aWNhbENhbGxiYWNrID0gY3JpdGljYWxDYWxsYmFjaztcbiAgICB2YXIgTG9nZ2VkRXJyb3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoTG9nZ2VkRXJyb3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIExvZ2dlZEVycm9yKGVycm9yLCBpc3N1ZXIsIGxldmVsKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBpZiAoaXNzdWVyID09PSB2b2lkIDApIHsgaXNzdWVyID0gdW5kZWZpbmVkOyB9XG4gICAgICAgICAgICBpZiAobGV2ZWwgPT09IHZvaWQgMCkgeyBsZXZlbCA9IGxvZ2dpbmdfMS5MT0dHRVJfTEVWRUxTLkFMTDsgfVxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMzsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaSAtIDNdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogZXJyb3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5uYW1lID0gXCJMb2dnZWRFcnJvclwiO1xuICAgICAgICAgICAgX3RoaXMubG9nZ2VkQXQgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgPT09ICdMb2dnZWRFcnJvcicgPyBlcnJvci5sb2dnZWRBdCA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIF90aGlzLmlzc3VlciA9IGlzc3VlcjtcbiAgICAgICAgICAgIGlmIChlcnJvci5sb2dnZWRBdCA9PT0gdW5kZWZpbmVkIHx8IGVycm9yLmxvZ2dlZEF0IDwgbGV2ZWwpIHtcbiAgICAgICAgICAgICAgICAoX2EgPSAoMCwgbG9nZ2luZ18xLmdldExvZ2dlcikoKSkucmVwb3J0LmFwcGx5KF9hLCBfX3NwcmVhZEFycmF5KFtfdGhpcywgbGV2ZWwsIGlzc3Vlcl0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VkQXQgPSBsZXZlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTG9nZ2VkRXJyb3I7XG4gICAgfShFcnJvcikpO1xuICAgIGV4cG9ydHMuTG9nZ2VkRXJyb3IgPSBMb2dnZWRFcnJvcjtcbiAgICB2YXIgQ3JpdGljYWxFcnJvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhDcml0aWNhbEVycm9yLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBDcml0aWNhbEVycm9yKGVycm9yLCBpc3N1ZXIpIHtcbiAgICAgICAgICAgIGlmIChpc3N1ZXIgPT09IHZvaWQgMCkgeyBpc3N1ZXIgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW2Vycm9yLCBpc3N1ZXIsIGxvZ2dpbmdfMS5MT0dHRVJfTEVWRUxTLkNSSVRJQ0FMXSwgYXJncywgZmFsc2UpKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDcml0aWNhbEVycm9yO1xuICAgIH0oTG9nZ2VkRXJyb3IpKTtcbiAgICBleHBvcnRzLkNyaXRpY2FsRXJyb3IgPSBDcml0aWNhbEVycm9yO1xufSk7IiwiLyoqXG4gKiBAbW9kdWxlIGxvZ2dpbmdcbiAqL1xuXG5leHBvcnQgKiBmcm9tICcuL2Vycm9ycyc7XG5leHBvcnQgKiBmcm9tICcuL2xvZ2dpbmcnOyIsInZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19leHBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2V4cG9ydFN0YXIpIHx8IGZ1bmN0aW9uKG0sIGV4cG9ydHMpIHtcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGV4cG9ydHMsIHApKSBfX2NyZWF0ZUJpbmRpbmcoZXhwb3J0cywgbSwgcCk7XG59O1xuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHZhciB2ID0gZmFjdG9yeShyZXF1aXJlLCBleHBvcnRzKTtcbiAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZCkgbW9kdWxlLmV4cG9ydHMgPSB2O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2Vycm9yc1wiXSwgZmFjdG9yeSk7XG4gICAgfVxufSkoZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2Vycm9yc1wiKSwgZXhwb3J0cyk7XG59KTsiLCJpbXBvcnQge0NhbGxiYWNrLCBnZXRMb2dnZXIsIExPR0dFUl9MRVZFTFMsIExvZ2dlck1lc3NhZ2V9IGZyb20gXCIuLi9sb2dnaW5nXCI7XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlXG4gKiBAcGFyYW0ge251bWJlcn0gbGV2ZWxcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAqXG4gKiBAZnVuY3Rpb24gbG9nZ2VkQ2FsbGJhY2tcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5lcnJvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvZ2dlZENhbGxiYWNrKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgbGV2ZWw6IG51bWJlciwgY2FsbGJhY2s6IENhbGxiYWNrLCAuLi5hcmdzOiBhbnlbXSl7XG4gICAgY29uc3QgZXJyb3I6IExvZ2dlZEVycm9yID0gbmV3IExvZ2dlZEVycm9yKG1lc3NhZ2UsIHRoaXMgJiYgdGhpcy5uYW1lICE9PSBcImxvZ2dlZENhbGxiYWNrXCIgPyB0aGlzIDogdW5kZWZpbmVkLCBsZXZlbCwgLi4uYXJncyk7XG4gICAgY2FsbGJhY2soZXJyb3IpO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAqXG4gKiBAZnVuY3Rpb24gYWxsQ2FsbGJhY2tcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5lcnJvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFsbENhbGxiYWNrKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgY2FsbGJhY2s6IENhbGxiYWNrLCAuLi5hcmdzOiBhbnlbXSl7XG4gICAgbG9nZ2VkQ2FsbGJhY2suY2FsbCh0aGlzLCBtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLkFMTCwgY2FsbGJhY2ssIC4uLmFyZ3MpO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAqXG4gKiBAZnVuY3Rpb24gZGVidWdDYWxsYmFja1xuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmVycm9yc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGVidWdDYWxsYmFjayh0aGlzOiBhbnksIG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGNhbGxiYWNrOiBDYWxsYmFjaywgLi4uYXJnczogYW55W10pe1xuICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwodGhpcywgbWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5ERUJVRywgY2FsbGJhY2ssIC4uLmFyZ3MpO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAqXG4gKiBAZnVuY3Rpb24gaW5mb0NhbGxiYWNrXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMuZXJyb3JzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZvQ2FsbGJhY2sodGhpczogYW55LCBtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBjYWxsYmFjazogQ2FsbGJhY2ssIC4uLmFyZ3M6IGFueVtdKXtcbiAgICBsb2dnZWRDYWxsYmFjay5jYWxsKHRoaXMsIG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuSU5GTywgY2FsbGJhY2ssIC4uLmFyZ3MpO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAqXG4gKiBAZnVuY3Rpb24gd2FybmluZ0NhbGxiYWNrXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMuZXJyb3JzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3YXJuaW5nQ2FsbGJhY2sodGhpczogYW55LCBtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBjYWxsYmFjazogQ2FsbGJhY2ssIC4uLmFyZ3M6IGFueVtdKXtcbiAgICBsb2dnZWRDYWxsYmFjay5jYWxsKHRoaXMsIG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuV0FSTiwgY2FsbGJhY2ssIC4uLmFyZ3MpO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAqXG4gKiBAZnVuY3Rpb24gZXJyb3JDYWxsYmFja1xuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmVycm9yc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayh0aGlzOiBhbnksIG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGNhbGxiYWNrOiBDYWxsYmFjaywgLi4uYXJnczogYW55W10pe1xuICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwodGhpcywgbWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5FUlJPUiwgY2FsbGJhY2ssIC4uLmFyZ3MpO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAqXG4gKiBAZnVuY3Rpb24gY3JpdGljYWxDYWxsYmFja1xuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmVycm9yc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JpdGljYWxDYWxsYmFjayh0aGlzOiBhbnksIG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGNhbGxiYWNrOiBDYWxsYmFjaywgLi4uYXJnczogYW55W10pe1xuICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwodGhpcywgbWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5DUklUSUNBTCwgY2FsbGJhY2ssIC4uLmFyZ3MpO1xufVxuXG4vKipcbiAqIFdyYXBwZXIgQ2xhc3MgZm9yIExvZ2dlZCBFcnJvcnNcbiAqIFdpbGwgdHJpZ2dlciBhIGNhbGwgdG8gdGhlIGxvZ2dlciBpZiBpdCBoYXNuJ3QgYmVlbiBsb2dnZWQgYmVmb3JlIG9vIGlmIGl0J3MgYmVpbmcgY2FsbGVkIGF0IGEgaGlnaGVyIGxldmVsXG4gKlxuICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBlcnJvclxuICogQHBhcmFtIHthbnl9IFtpc3N1ZXJdXG4gKiBAcGFyYW0ge251bWJlcn0gbGV2ZWwgZGVmYXVsdHMgdG8ge0BsaW5rIExPR0dFUl9MRVZFTFMuRVJST1J9XG4gKiBAcGFyYW0ge2FueVtdfSBbYXJnc10gYXJndW1lbnRzIHRvIGJlIHBhc3NlZCBhcyByZXBsYWNlbWVudHMgdG8gdGhlIGxvZ2dlclxuICpcbiAqIEBjbGFzcyBMb2dnZWRFcnJvclxuICogQGV4dGVuZHMgRXJyb3JcbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2dnZWRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICAvKipcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gbG9nZ2VkXG4gICAgICovXG4gICAgbG9nZ2VkQXQ/OiBudW1iZXI7XG4gICAgaXNzdWVyPzogYW55O1xuXG4gICAgY29uc3RydWN0b3IoZXJyb3I6IExvZ2dlck1lc3NhZ2UsIGlzc3VlcjogYW55ID0gdW5kZWZpbmVkLCBsZXZlbDogbnVtYmVyID0gTE9HR0VSX0xFVkVMUy5BTEwsIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICAgIHN1cGVyKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogZXJyb3IpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkxvZ2dlZEVycm9yXCI7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgdGhpcy5sb2dnZWRBdCA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gJ0xvZ2dlZEVycm9yJyA/IGVycm9yLmxvZ2dlZEF0IDogdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmlzc3VlciA9IGlzc3VlcjtcblxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmIChlcnJvci5sb2dnZWRBdCA9PT0gdW5kZWZpbmVkIHx8IGVycm9yLmxvZ2dlZEF0IDwgbGV2ZWwpe1xuICAgICAgICAgICAgZ2V0TG9nZ2VyKCkucmVwb3J0KHRoaXMsIGxldmVsLCBpc3N1ZXIsIC4uLmFyZ3MpO1xuICAgICAgICAgICAgdGhpcy5sb2dnZWRBdCA9IGxldmVsO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIFdyYXBwZXIgQ2xhc3MgZm9yIENyaXRpY2FsIEVycm9yc1xuICpcbiAqIEBjbGFzcyBDcml0aWNhbEVycm9yXG4gKiBAZXh0ZW5kcyBMb2dnZWRFcnJvclxuICpcbiAqL1xuZXhwb3J0IGNsYXNzIENyaXRpY2FsRXJyb3IgZXh0ZW5kcyBMb2dnZWRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoZXJyb3I6IExvZ2dlck1lc3NhZ2UsIGlzc3VlcjogYW55ID0gdW5kZWZpbmVkLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgICAgICBzdXBlcihlcnJvciwgaXNzdWVyLCBMT0dHRVJfTEVWRUxTLkNSSVRJQ0FMLCAuLi5hcmdzKTtcbiAgICB9XG59IiwidmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSwgcGFjaykge1xuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XG59O1xuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHZhciB2ID0gZmFjdG9yeShyZXF1aXJlLCBleHBvcnRzKTtcbiAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZCkgbW9kdWxlLmV4cG9ydHMgPSB2O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi9lcnJvcnNcIiwgXCIuL2xvZ2dpbmdcIiwgXCIuL2NvbnN0YW50c1wiXSwgZmFjdG9yeSk7XG4gICAgfVxufSkoZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZXhwb3J0cy5sb2dTeW5jID0gZXhwb3J0cy5sb2dBc3luYyA9IGV4cG9ydHMuU3RvcFdhdGNoID0gdm9pZCAwO1xuICAgIHZhciBlcnJvcnNfMSA9IHJlcXVpcmUoXCIuLi9lcnJvcnNcIik7XG4gICAgdmFyIGxvZ2dpbmdfMSA9IHJlcXVpcmUoXCIuL2xvZ2dpbmdcIik7XG4gICAgdmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4vY29uc3RhbnRzXCIpO1xuICAgIHZhciBTdG9wV2F0Y2ggPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTdG9wV2F0Y2goKSB7XG4gICAgICAgIH1cbiAgICAgICAgU3RvcFdhdGNoLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgfTtcbiAgICAgICAgU3RvcFdhdGNoLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zdGFydFRpbWUpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdG9wV2F0Y2ggZGlkbnQgc3RhcnQnKTtcbiAgICAgICAgICAgIHJldHVybiBEYXRlLm5vdygpIC0gdGhpcy5zdGFydFRpbWU7XG4gICAgICAgIH07XG4gICAgICAgIFN0b3BXYXRjaC5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmNoZWNrKCk7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTdG9wV2F0Y2g7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlN0b3BXYXRjaCA9IFN0b3BXYXRjaDtcbiAgICBmdW5jdGlvbiBsb2dBc3luYyhsZXZlbCwgYmVuY2htYXJrKSB7XG4gICAgICAgIGlmIChsZXZlbCA9PT0gdm9pZCAwKSB7IGxldmVsID0gY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5ERUJVRzsgfVxuICAgICAgICBpZiAoIWJlbmNobWFyayAmJiB0eXBlb2YgbGV2ZWwgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgYmVuY2htYXJrID0gbGV2ZWw7XG4gICAgICAgICAgICBsZXZlbCA9IGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuREVCVUc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIHByb3BlcnR5S2V5LCBkZXNjcmlwdG9yKSB7XG4gICAgICAgICAgICB2YXIgb3JpZ2luYWxNZXRob2QgPSBkZXNjcmlwdG9yLnZhbHVlO1xuICAgICAgICAgICAgdmFyIG1ldGhvZFdyYXBwZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3MucG9wKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFjYWxsYmFjayB8fCB0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcnNfMS5Dcml0aWNhbEVycm9yKFwiTWlzc2luZyBDYWxsYmFja1wiKTtcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHRoaXMubmFtZSAmJiB0aGlzLm5hbWUgIT09ICdGdW5jdGlvbicgPyB0aGlzLm5hbWUgOiB0aGlzLmNvbnN0cnVjdG9yICYmIHRoaXMuY29uc3RydWN0b3IubmFtZSB8fCB0aGlzO1xuICAgICAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChcIlt7MH1dIC0gRW50ZXJpbmcgTWV0aG9kIHsxfSB3aXRoIGFyZ3M6IHsyfVwiLCBsZXZlbCwgbmFtZSwgcHJvcGVydHlLZXksIGFyZ3MubWFwKGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLnRvU3RyaW5nKCk7IH0pLmpvaW4oJyB8ICcpKTtcbiAgICAgICAgICAgICAgICB2YXIgc3RvcFdhdGNoO1xuICAgICAgICAgICAgICAgIHZhciBjYiA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3BXYXRjaClcbiAgICAgICAgICAgICAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChcIlt7MH1dW0JFTkNITUFSS10gLSBMZWF2aW5nIE1ldGhvZCB7MX0gYWZ0ZXIgezJ9bXNcIiwgbGV2ZWwsIG5hbWUsIHByb3BlcnR5S2V5LCBzdG9wV2F0Y2guc3RvcCgpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ2dpbmdfMS5nZXRMb2dnZXIpKCkucmVwb3J0KFwiW3swfV1bRVJST1JdIC0gTGVhdmluZyBNZXRob2QgezF9IHdpdGggZXJyb3IgezJ9XCIsIGxldmVsLCBuYW1lLCBwcm9wZXJ0eUtleSwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChcIlt7MH1dIC0gTGVhdmluZyBNZXRob2QgezF9IHdpdGggcmVzdWx0czogezJ9XCIsIGxldmVsLCBuYW1lLCBwcm9wZXJ0eUtleSwgcmVzdWx0cyA/IHJlc3VsdHMubWFwKGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLnRvU3RyaW5nKCk7IH0pLmpvaW4oJyB8ICcpIDogXCJ2b2lkXCIpO1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseSh2b2lkIDAsIF9fc3ByZWFkQXJyYXkoW3VuZGVmaW5lZF0sIHJlc3VsdHMsIGZhbHNlKSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoYmVuY2htYXJrKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0b3BXYXRjaCA9IG5ldyBTdG9wV2F0Y2goKTtcbiAgICAgICAgICAgICAgICAgICAgc3RvcFdhdGNoLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9yaWdpbmFsTWV0aG9kLmNhbGwuYXBwbHkob3JpZ2luYWxNZXRob2QsIF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbdGhpcy5fX29yaWdpbmFsT2JqZWN0IHx8IHRoaXNdLCBhcmdzLCBmYWxzZSksIFtjYl0sIGZhbHNlKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZGVzY3JpcHRvci52YWx1ZSA9IG1ldGhvZFdyYXBwZXI7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGV4cG9ydHMubG9nQXN5bmMgPSBsb2dBc3luYztcbiAgICBmdW5jdGlvbiBsb2dTeW5jKGxldmVsLCBiZW5jaG1hcmspIHtcbiAgICAgICAgaWYgKGxldmVsID09PSB2b2lkIDApIHsgbGV2ZWwgPSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkRFQlVHOyB9XG4gICAgICAgIGlmICghYmVuY2htYXJrICYmIHR5cGVvZiBsZXZlbCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICBiZW5jaG1hcmsgPSBsZXZlbDtcbiAgICAgICAgICAgIGxldmVsID0gY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5ERUJVRztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXksIGRlc2NyaXB0b3IpIHtcbiAgICAgICAgICAgIHZhciBvcmlnaW5hbE1ldGhvZCA9IGRlc2NyaXB0b3IudmFsdWU7XG4gICAgICAgICAgICB2YXIgbWV0aG9kV3JhcHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSB0aGlzLm5hbWUgJiYgdGhpcy5uYW1lICE9PSAnRnVuY3Rpb24nID8gdGhpcy5uYW1lIDogdGhpcy5jb25zdHJ1Y3RvciAmJiB0aGlzLmNvbnN0cnVjdG9yLm5hbWUgfHwgdGhpcztcbiAgICAgICAgICAgICAgICAoMCwgbG9nZ2luZ18xLmdldExvZ2dlcikoKS5yZXBvcnQoXCJbezB9XSAtIEVudGVyaW5nIE1ldGhvZCB7MX0gd2l0aCBhcmdzOiB7Mn1cIiwgbGV2ZWwsIG5hbWUsIHByb3BlcnR5S2V5LCBhcmdzLm1hcChmdW5jdGlvbiAoYSkgeyByZXR1cm4gYS50b1N0cmluZygpOyB9KS5qb2luKCcgfCAnKSk7XG4gICAgICAgICAgICAgICAgdmFyIHN0b3BXYXRjaCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmIChiZW5jaG1hcmspIHtcbiAgICAgICAgICAgICAgICAgICAgc3RvcFdhdGNoID0gbmV3IFN0b3BXYXRjaCgpO1xuICAgICAgICAgICAgICAgICAgICBzdG9wV2F0Y2guc3RhcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gb3JpZ2luYWxNZXRob2QuY2FsbC5hcHBseShvcmlnaW5hbE1ldGhvZCwgX19zcHJlYWRBcnJheShbdGhpcy5fX29yaWdpbmFsT2JqZWN0IHx8IHRoaXNdLCBhcmdzLCBmYWxzZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcFdhdGNoKVxuICAgICAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ2dpbmdfMS5nZXRMb2dnZXIpKCkucmVwb3J0KFwiW3swfV1bQkVOQ0hNQVJLXSAtIExlYXZpbmcgTWV0aG9kIHsxfSBhZnRlciB7Mn1tc1wiLCBsZXZlbCwgbmFtZSwgcHJvcGVydHlLZXksIHN0b3BXYXRjaC5zdG9wKCkpO1xuICAgICAgICAgICAgICAgICAgICAoMCwgbG9nZ2luZ18xLmdldExvZ2dlcikoKS5yZXBvcnQoXCJbezB9XVtFUlJPUl0gLSBMZWF2aW5nIE1ldGhvZCB7MX0gd2l0aCBlcnJvciB7Mn1cIiwgbGV2ZWwsIG5hbWUsIHByb3BlcnR5S2V5LCBlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN0b3BXYXRjaClcbiAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ2dpbmdfMS5nZXRMb2dnZXIpKCkucmVwb3J0KFwiW3swfV1bQkVOQ0hNQVJLXSAtIExlYXZpbmcgTWV0aG9kIHsxfSBhZnRlciB7Mn1tc1wiLCBsZXZlbCwgbmFtZSwgcHJvcGVydHlLZXksIHN0b3BXYXRjaC5zdG9wKCkpO1xuICAgICAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChcIlt7MH1dIC0gTGVhdmluZyBNZXRob2QgezF9IHdpdGggcmVzdWx0czogezJ9XCIsIGxldmVsLCBuYW1lLCBwcm9wZXJ0eUtleSwgcmVzdWx0ID8gcmVzdWx0IDogXCJ2b2lkXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZGVzY3JpcHRvci52YWx1ZSA9IG1ldGhvZFdyYXBwZXI7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGV4cG9ydHMubG9nU3luYyA9IGxvZ1N5bmM7XG59KTsiLCIvKipcbiAqIEBuYW1lc3BhY2UgZGItZGVjb3JhdG9ycy5lcnJvcnNcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9lcnJvcnMnOyIsIihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICB2YXIgdiA9IGZhY3RvcnkocmVxdWlyZSwgZXhwb3J0cyk7XG4gICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIG1vZHVsZS5leHBvcnRzID0gdjtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCJdLCBmYWN0b3J5KTtcbiAgICB9XG59KShmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBleHBvcnRzLkRBWVNfT0ZfV0VFS19OQU1FUyA9IGV4cG9ydHMuTU9OVEhfTkFNRVMgPSBleHBvcnRzLkRFRkFVTFRfVElNRVNUQU1QX0ZPUk1BVCA9IGV4cG9ydHMuTE9HR0lOR19NU0cgPSBleHBvcnRzLkxPR0dFUl9MRVZFTFMgPSB2b2lkIDA7XG4gICAgZXhwb3J0cy5MT0dHRVJfTEVWRUxTID0ge1xuICAgICAgICBBTEw6IDAsXG4gICAgICAgIERFQlVHOiAxLFxuICAgICAgICBJTkZPOiAyLFxuICAgICAgICBXQVJOOiAzLFxuICAgICAgICBFUlJPUjogNCxcbiAgICAgICAgQ1JJVElDQUw6IDVcbiAgICB9O1xuICAgIGV4cG9ydHMuTE9HR0lOR19NU0cgPSB7XG4gICAgICAgIExFVkVMX0NIQU5HRUQ6IFwiTG9nZ2VyIExldmVsIGNoYW5nZWQgZnJvbSB7MH0gdG8gezF9XCIsXG4gICAgICAgIExPR0dFUl9DSEFOR0VEOiBcIkxvZ2dlciBjaGFuZ2VkXCJcbiAgICB9O1xuICAgIGV4cG9ydHMuREVGQVVMVF9USU1FU1RBTVBfRk9STUFUID0gXCJkZC9NTS95eXl5IEhIOm1tOnNzOlNcIjtcbiAgICBleHBvcnRzLk1PTlRIX05BTUVTID0gW1xuICAgICAgICBcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCIsIFwiSnVseVwiLFxuICAgICAgICBcIkF1Z3VzdFwiLCBcIlNlcHRlbWJlclwiLCBcIk9jdG9iZXJcIiwgXCJOb3ZlbWJlclwiLCBcIkRlY2VtYmVyXCJcbiAgICBdO1xuICAgIGV4cG9ydHMuREFZU19PRl9XRUVLX05BTUVTID0gW1xuICAgICAgICBcIlN1bmRheVwiLCBcIk1vbmRheVwiLCBcIlR1ZXNkYXlcIixcbiAgICAgICAgXCJXZWRuZXNkYXlcIiwgXCJUaHVyc2RheVwiLCBcIkZyaWRheVwiLCBcIlNhdHVyZGF5XCJcbiAgICBdO1xufSk7IiwiLyoqXG4gKiBAZW51bSBMT0dHRVJfTEVWRUxTXG4gKlxuICogQGNhdGVnb3J5IENvbnN0YW50c1xuICovXG5leHBvcnQgY29uc3QgTE9HR0VSX0xFVkVMUyA9IHtcbiAgICBBTEw6IDAsXG4gICAgREVCVUc6IDEsXG4gICAgSU5GTzogMixcbiAgICBXQVJOOiAzLFxuICAgIEVSUk9SOiA0LFxuICAgIENSSVRJQ0FMOiA1XG59XG5cbi8qKlxuICogRGVmYXVsdCBtZXNzYWdlc1xuICpcbiAqIGNvbnN0YW50IExPR0dJTkdfTVNHXG4gKlxuICogQG1lbWJlck9mIGxvZ2dpbmcubG9nZ2luZ1xuICovXG5leHBvcnQgY29uc3QgTE9HR0lOR19NU0cgPSB7XG4gICAgTEVWRUxfQ0hBTkdFRDogXCJMb2dnZXIgTGV2ZWwgY2hhbmdlZCBmcm9tIHswfSB0byB7MX1cIixcbiAgICBMT0dHRVJfQ0hBTkdFRDogXCJMb2dnZXIgY2hhbmdlZFwiXG59XG5cbi8qKlxuICogQHR5cGVkZWYgRXJyXG4gKiBAbWVtYmVyT2YgbG9nZ2luZy5sb2dnaW5nXG4gKiAqL1xuZXhwb3J0IHR5cGUgRXJyID0gRXJyb3IgfCBzdHJpbmcgfCB1bmRlZmluZWQ7XG4vKipcbiAqIEB0eXBlZGVmIENhbGxiYWNrXG4gKiBAbWVtYmVyT2YgbG9nZ2luZy5sb2dnaW5nXG4gKiAqL1xuZXhwb3J0IHR5cGUgQ2FsbGJhY2sgPSAoZXJyPzogRXJyLCAuLi5hcmdzOiBhbnlbXSkgPT4gdm9pZDtcblxuLyoqXG4gKiBAY29uc3RhbnQgREVGQVVMVF9USU1FU1RBTVBfRk9STUFUXG4gKiBAY2F0ZWdvcnkgQ29uc3RhbnRzXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX1RJTUVTVEFNUF9GT1JNQVQgPSBcImRkL01NL3l5eXkgSEg6bW06c3M6U1wiO1xuXG4vKipcbiAqIENhbiBiZSBjaGFuZ2VkIGZvciBsb2NhbGl6YXRpb24gcHVycG9zZXNcbiAqXG4gKiBAY29uc3RhbnQgTU9OVEhfTkFNRVNcbiAqL1xuZXhwb3J0IGNvbnN0IE1PTlRIX05BTUVTID0gW1xuICAgIFwiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCIsXG4gICAgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXG5dO1xuXG4vKipcbiAqIENhbiBiZSBjaGFuZ2VkIGZvciBsb2NhbGl6YXRpb24gcHVycG9zZXNcbiAqXG4gKiBAY29uc3RhbnQgREFZU19PRl9XRUVLX05BTUVTXG4gKi9cbmV4cG9ydCBjb25zdCBEQVlTX09GX1dFRUtfTkFNRVMgPSBbXG4gICAgXCJTdW5kYXlcIiwgXCJNb25kYXlcIiwgXCJUdWVzZGF5XCIsXG4gICAgXCJXZWRuZXNkYXlcIiwgXCJUaHVyc2RheVwiLCBcIkZyaWRheVwiLCBcIlNhdHVyZGF5XCJcbl07IiwidmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX2V4cG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9fZXhwb3J0U3RhcikgfHwgZnVuY3Rpb24obSwgZXhwb3J0cykge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZXhwb3J0cywgcCkpIF9fY3JlYXRlQmluZGluZyhleHBvcnRzLCBtLCBwKTtcbn07XG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgdmFyIHYgPSBmYWN0b3J5KHJlcXVpcmUsIGV4cG9ydHMpO1xuICAgICAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSBtb2R1bGUuZXhwb3J0cyA9IHY7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vY29uc3RhbnRzXCIsIFwiLi9sb2dnaW5nXCIsIFwiLi9kZWNvcmF0b3JzXCIsIFwiLi91dGlsc1wiXSwgZmFjdG9yeSk7XG4gICAgfVxufSkoZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKSwgZXhwb3J0cyk7XG4gICAgX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2xvZ2dpbmdcIiksIGV4cG9ydHMpO1xuICAgIF9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9kZWNvcmF0b3JzXCIpLCBleHBvcnRzKTtcbiAgICBfX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vdXRpbHNcIiksIGV4cG9ydHMpO1xufSk7IiwiaW1wb3J0IHtDcml0aWNhbEVycm9yfSBmcm9tIFwiLi4vZXJyb3JzXCI7XG5pbXBvcnQge2dldExvZ2dlcn0gZnJvbSBcIi4vbG9nZ2luZ1wiO1xuaW1wb3J0IHtDYWxsYmFjaywgRXJyLCBMT0dHRVJfTEVWRUxTfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcblxuLyoqXG4gKiBVdGlsIGNsYXNzIHRvIG1lYXN1cmUgdGltZSBiZXR3ZWVuIHR3byBwb2ludHMgaW4gdGltZTtcbiAqXG4gKiBAY2xhc3MgU3RvcFdhdGNoXG4gKlxuICovXG5leHBvcnQgY2xhc3MgU3RvcFdhdGNoe1xuICAgIHByaXZhdGUgc3RhcnRUaW1lPzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBzdGFydCB0aW1lXG4gICAgICovXG4gICAgc3RhcnQoKXtcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBub3cgYW5kIHRoZSBzdGFydCB0aW1lXG4gICAgICovXG4gICAgY2hlY2soKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXJ0VGltZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU3RvcFdhdGNoIGRpZG50IHN0YXJ0Jyk7XG4gICAgICAgIHJldHVybiBEYXRlLm5vdygpIC0gdGhpcy5zdGFydFRpbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIG5vdyBhbmQgdGhlIHN0YXJ0IHRpbWVcbiAgICAgKiBzdG9wcyB0aGUgVGltZVdhdGNoXG4gICAgICovXG4gICAgc3RvcCgpOiBudW1iZXIge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmNoZWNrKCk7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBBc3luYyBNZXRob2QgZGVjb3JhdG9yIHRvIGxvZyB0aGUgaW5wdXQgYW5kIG91dHB1dCBvZiB0aGF0IG1ldGhvZFxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbGV2ZWxdIExvZ2dpbmcgTGV2ZWwgYXMgaW4ge0BsaW5rIExPR0dFUl9MRVZFTFN9IGRlZmF1bHRzIHRvIHtAbGluayBMT0dHRVJfTEVWRUxTLkRFQlVHfVxuICogQHBhcmFtIHtib29sZWFufSBbYmVuY2htYXJrXSBkZXRlcm1pbmVzIGlmIHRoZSBsb2dnaW5nIGluY2x1ZGVzIHRoZSBkdXJhdGlvbiBpbiBtcy4gZGVmYXVsdHMgdG8gZmFsc2VcbiAqXG4gKiBAZGVjb3JhdG9yIGxvZ0FzeW5jXG4gKlxuICogQGNhdGVnb3J5IERlY29yYXRvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvZ0FzeW5jKGxldmVsOiBudW1iZXIgfCBib29sZWFuID0gTE9HR0VSX0xFVkVMUy5ERUJVRywgYmVuY2htYXJrPzogYm9vbGVhbikge1xuXG4gICAgaWYgKCFiZW5jaG1hcmsgJiYgdHlwZW9mIGxldmVsID09PSAnYm9vbGVhbicpe1xuICAgICAgICBiZW5jaG1hcmsgPSBsZXZlbDtcbiAgICAgICAgbGV2ZWwgPSBMT0dHRVJfTEVWRUxTLkRFQlVHO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0OiBhbnksIHByb3BlcnR5S2V5OiBzdHJpbmcsIGRlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvcikge1xuXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsTWV0aG9kID0gZGVzY3JpcHRvci52YWx1ZTtcblxuICAgICAgICBjb25zdCBtZXRob2RXcmFwcGVyID0gZnVuY3Rpb24odGhpczogYW55LCAuLi5hcmdzOiBhbnlbXSl7XG4gICAgICAgICAgICBsZXQgY2FsbGJhY2s6IENhbGxiYWNrID0gYXJncy5wb3AoKTtcbiAgICAgICAgICAgIGlmICghY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBDcml0aWNhbEVycm9yKGBNaXNzaW5nIENhbGxiYWNrYCk7XG5cbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLm5hbWUgJiYgdGhpcy5uYW1lICE9PSAnRnVuY3Rpb24nID8gdGhpcy5uYW1lIDogdGhpcy5jb25zdHJ1Y3RvciAmJiB0aGlzLmNvbnN0cnVjdG9yLm5hbWUgfHwgdGhpcztcbiAgICAgICAgICAgIGdldExvZ2dlcigpLnJlcG9ydChgW3swfV0gLSBFbnRlcmluZyBNZXRob2QgezF9IHdpdGggYXJnczogezJ9YCwgbGV2ZWwgYXMgbnVtYmVyLCBuYW1lLCBwcm9wZXJ0eUtleSwgYXJncy5tYXAoYSA9PiBhLnRvU3RyaW5nKCkpLmpvaW4oJyB8ICcpKTtcblxuICAgICAgICAgICAgbGV0IHN0b3BXYXRjaDogU3RvcFdhdGNoO1xuXG4gICAgICAgICAgICBjb25zdCBjYiA9IChlcnI6IEVyciwgLi4ucmVzdWx0czogYW55W10pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc3RvcFdhdGNoKVxuICAgICAgICAgICAgICAgICAgICBnZXRMb2dnZXIoKS5yZXBvcnQoYFt7MH1dW0JFTkNITUFSS10gLSBMZWF2aW5nIE1ldGhvZCB7MX0gYWZ0ZXIgezJ9bXNgLCBsZXZlbCBhcyBudW1iZXIsIG5hbWUsIHByb3BlcnR5S2V5LCBzdG9wV2F0Y2guc3RvcCgpKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKXtcbiAgICAgICAgICAgICAgICAgICAgZ2V0TG9nZ2VyKCkucmVwb3J0KGBbezB9XVtFUlJPUl0gLSBMZWF2aW5nIE1ldGhvZCB7MX0gd2l0aCBlcnJvciB7Mn1gLCBsZXZlbCBhcyBudW1iZXIsIG5hbWUsIHByb3BlcnR5S2V5LCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBnZXRMb2dnZXIoKS5yZXBvcnQoYFt7MH1dIC0gTGVhdmluZyBNZXRob2QgezF9IHdpdGggcmVzdWx0czogezJ9YCwgbGV2ZWwgYXMgbnVtYmVyLCBuYW1lLCBwcm9wZXJ0eUtleSwgcmVzdWx0cyA/IHJlc3VsdHMubWFwKGEgPT4gYS50b1N0cmluZygpKS5qb2luKCcgfCAnKSA6IFwidm9pZFwiKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIC4uLnJlc3VsdHMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYmVuY2htYXJrKXtcbiAgICAgICAgICAgICAgICBzdG9wV2F0Y2ggPSBuZXcgU3RvcFdhdGNoKCk7XG4gICAgICAgICAgICAgICAgc3RvcFdhdGNoLnN0YXJ0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG9yaWdpbmFsTWV0aG9kLmNhbGwodGhpcy5fX29yaWdpbmFsT2JqZWN0IHx8IHRoaXMsIC4uLmFyZ3MsIGNiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlc2NyaXB0b3IudmFsdWUgPSBtZXRob2RXcmFwcGVyO1xuICAgIH1cbn1cblxuLyoqXG4gKiBTeW5jIE1ldGhvZCBkZWNvcmF0b3IgdG8gbG9nIHRoZSBpbnB1dCBhbmQgb3V0cHV0IG9mIHRoYXQgbWV0aG9kXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtsZXZlbF0gTG9nZ2luZyBMZXZlbCBhcyBpbiB7QGxpbmsgTE9HR0VSX0xFVkVMU30gZGVmYXVsdHMgdG8ge0BsaW5rIExPR0dFUl9MRVZFTFMuREVCVUd9XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtiZW5jaG1hcmtdIGRldGVybWluZXMgaWYgdGhlIGxvZ2dpbmcgaW5jbHVkZXMgdGhlIGR1cmF0aW9uIGluIG1zLiBkZWZhdWx0cyB0byBmYWxzZVxuICpcbiAqIEBkZWNvcmF0b3IgbG9nU3luY1xuICpcbiAqIEBjYXRlZ29yeSBEZWNvcmF0b3JzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2dTeW5jKGxldmVsOiBudW1iZXIgfCBib29sZWFuID0gTE9HR0VSX0xFVkVMUy5ERUJVRywgYmVuY2htYXJrPzogYm9vbGVhbikge1xuXG4gICAgaWYgKCFiZW5jaG1hcmsgJiYgdHlwZW9mIGxldmVsID09PSAnYm9vbGVhbicpe1xuICAgICAgICBiZW5jaG1hcmsgPSBsZXZlbDtcbiAgICAgICAgbGV2ZWwgPSBMT0dHRVJfTEVWRUxTLkRFQlVHO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0OiBhbnksIHByb3BlcnR5S2V5OiBzdHJpbmcsIGRlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvcikge1xuXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsTWV0aG9kID0gZGVzY3JpcHRvci52YWx1ZTtcblxuICAgICAgICBjb25zdCBtZXRob2RXcmFwcGVyID0gZnVuY3Rpb24odGhpczogYW55LCAuLi5hcmdzOiBhbnlbXSl7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5uYW1lICYmIHRoaXMubmFtZSAhPT0gJ0Z1bmN0aW9uJyA/IHRoaXMubmFtZSA6IHRoaXMuY29uc3RydWN0b3IgJiYgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lIHx8IHRoaXM7XG5cbiAgICAgICAgICAgIGdldExvZ2dlcigpLnJlcG9ydChgW3swfV0gLSBFbnRlcmluZyBNZXRob2QgezF9IHdpdGggYXJnczogezJ9YCwgbGV2ZWwgYXMgbnVtYmVyLCBuYW1lLCBwcm9wZXJ0eUtleSwgYXJncy5tYXAoYSA9PiBhLnRvU3RyaW5nKCkpLmpvaW4oJyB8ICcpKTtcbiAgICAgICAgICAgIGxldCBzdG9wV2F0Y2g6IFN0b3BXYXRjaCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgICAgIGlmIChiZW5jaG1hcmspe1xuICAgICAgICAgICAgICAgIHN0b3BXYXRjaCA9IG5ldyBTdG9wV2F0Y2goKTtcbiAgICAgICAgICAgICAgICBzdG9wV2F0Y2guc3RhcnQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBvcmlnaW5hbE1ldGhvZC5jYWxsKHRoaXMuX19vcmlnaW5hbE9iamVjdCB8fCB0aGlzLCAuLi5hcmdzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RvcFdhdGNoKVxuICAgICAgICAgICAgICAgICAgICBnZXRMb2dnZXIoKS5yZXBvcnQoYFt7MH1dW0JFTkNITUFSS10gLSBMZWF2aW5nIE1ldGhvZCB7MX0gYWZ0ZXIgezJ9bXNgLCBsZXZlbCBhcyBudW1iZXIsIG5hbWUsIHByb3BlcnR5S2V5LCBzdG9wV2F0Y2guc3RvcCgpKTtcbiAgICAgICAgICAgICAgICBnZXRMb2dnZXIoKS5yZXBvcnQoYFt7MH1dW0VSUk9SXSAtIExlYXZpbmcgTWV0aG9kIHsxfSB3aXRoIGVycm9yIHsyfWAsIGxldmVsIGFzIG51bWJlciwgbmFtZSwgcHJvcGVydHlLZXksIGUpO1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RvcFdhdGNoKVxuICAgICAgICAgICAgICAgIGdldExvZ2dlcigpLnJlcG9ydChgW3swfV1bQkVOQ0hNQVJLXSAtIExlYXZpbmcgTWV0aG9kIHsxfSBhZnRlciB7Mn1tc2AsIGxldmVsIGFzIG51bWJlciwgbmFtZSwgcHJvcGVydHlLZXksIHN0b3BXYXRjaC5zdG9wKCkpO1xuICAgICAgICAgICAgZ2V0TG9nZ2VyKCkucmVwb3J0KGBbezB9XSAtIExlYXZpbmcgTWV0aG9kIHsxfSB3aXRoIHJlc3VsdHM6IHsyfWAsIGxldmVsIGFzIG51bWJlciwgbmFtZSwgcHJvcGVydHlLZXksIHJlc3VsdCA/IHJlc3VsdCA6IFwidm9pZFwiKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cblxuICAgICAgICBkZXNjcmlwdG9yLnZhbHVlID0gbWV0aG9kV3JhcHBlcjtcbiAgICB9XG59XG4iLCJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgdmFyIHYgPSBmYWN0b3J5KHJlcXVpcmUsIGV4cG9ydHMpO1xuICAgICAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSBtb2R1bGUuZXhwb3J0cyA9IHY7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vY29uc3RhbnRzXCIsIFwiLi91dGlsc1wiXSwgZmFjdG9yeSk7XG4gICAgfVxufSkoZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZXhwb3J0cy5jcml0aWNhbCA9IGV4cG9ydHMuZXJyb3IgPSBleHBvcnRzLndhcm4gPSBleHBvcnRzLmRlYnVnID0gZXhwb3J0cy5hbGwgPSBleHBvcnRzLmluZm8gPSBleHBvcnRzLnNldExvZ2dlciA9IGV4cG9ydHMuZ2V0TG9nZ2VyID0gZXhwb3J0cy5Mb2dnZXJJbXAgPSB2b2lkIDA7XG4gICAgdmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4vY29uc3RhbnRzXCIpO1xuICAgIHZhciB1dGlsc18xID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG4gICAgdmFyIExvZ2dlckltcCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIExvZ2dlckltcChkZWZhdWx0TGV2ZWwsIHVzZVRpbWVzdGFtcCwgbG9nTGV2ZWwsIGxvZ1N0YWNrVHJhY2UsIHRpbWVzdGFtcEZvcm1hdCkge1xuICAgICAgICAgICAgaWYgKGRlZmF1bHRMZXZlbCA9PT0gdm9pZCAwKSB7IGRlZmF1bHRMZXZlbCA9IGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuSU5GTzsgfVxuICAgICAgICAgICAgaWYgKHVzZVRpbWVzdGFtcCA9PT0gdm9pZCAwKSB7IHVzZVRpbWVzdGFtcCA9IHRydWU7IH1cbiAgICAgICAgICAgIGlmIChsb2dMZXZlbCA9PT0gdm9pZCAwKSB7IGxvZ0xldmVsID0gdHJ1ZTsgfVxuICAgICAgICAgICAgaWYgKGxvZ1N0YWNrVHJhY2UgPT09IHZvaWQgMCkgeyBsb2dTdGFja1RyYWNlID0gZmFsc2U7IH1cbiAgICAgICAgICAgIGlmICh0aW1lc3RhbXBGb3JtYXQgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXBGb3JtYXQgPSBjb25zdGFudHNfMS5ERUZBVUxUX1RJTUVTVEFNUF9GT1JNQVQ7IH1cbiAgICAgICAgICAgIHRoaXMubGV2ZWwgPSBkZWZhdWx0TGV2ZWw7XG4gICAgICAgICAgICB0aGlzLnVzZVRpbWVzdGFtcCA9IHVzZVRpbWVzdGFtcDtcbiAgICAgICAgICAgIHRoaXMubG9nTGV2ZWwgPSBsb2dMZXZlbDtcbiAgICAgICAgICAgIHRoaXMubG9nU3RhY2tUcmFjZSA9IGxvZ1N0YWNrVHJhY2U7XG4gICAgICAgICAgICB0aGlzLnRpbWVzdGFtcEZvcm1hdCA9IHRpbWVzdGFtcEZvcm1hdDtcbiAgICAgICAgfVxuICAgICAgICBMb2dnZXJJbXAucHJvdG90eXBlLmJ1aWxkTWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlLCBsb2dMZXZlbCwgaXNzdWVyKSB7XG4gICAgICAgICAgICBpZiAoaXNzdWVyID09PSB2b2lkIDApIHsgaXNzdWVyID0gdW5kZWZpbmVkOyB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAzOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvcilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZS5tZXNzYWdlO1xuICAgICAgICAgICAgaWYgKGlzc3VlcilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gXCJbXCIuY29uY2F0KGlzc3Vlci50b1N0cmluZygpLCBcIl1cIikuY29uY2F0KG1lc3NhZ2UpO1xuICAgICAgICAgICAgaWYgKHRoaXMubG9nTGV2ZWwpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiW1wiLmNvbmNhdChPYmplY3Qua2V5cyhjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTKVtsb2dMZXZlbF0sIFwiXSAtIFwiKS5jb25jYXQobWVzc2FnZSk7XG4gICAgICAgICAgICBpZiAodGhpcy51c2VUaW1lc3RhbXApXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiW1wiLmNvbmNhdCgoMCwgdXRpbHNfMS5mb3JtYXREYXRlKShuZXcgRGF0ZSgpLCB0aGlzLnRpbWVzdGFtcEZvcm1hdCksIFwiXVwiKS5jb25jYXQobWVzc2FnZSk7XG4gICAgICAgICAgICByZXR1cm4gdXRpbHNfMS5zdHJpbmdGb3JtYXQuYXBwbHkodm9pZCAwLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlXSwgYXJncywgZmFsc2UpKTtcbiAgICAgICAgfTtcbiAgICAgICAgTG9nZ2VySW1wLnByb3RvdHlwZS5yZXBvcnQgPSBmdW5jdGlvbiAobWVzc2FnZSwgbGV2ZWwsIGlzc3Vlcikge1xuICAgICAgICAgICAgaWYgKGxldmVsID09PSB2b2lkIDApIHsgbGV2ZWwgPSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLklORk87IH1cbiAgICAgICAgICAgIGlmIChpc3N1ZXIgPT09IHZvaWQgMCkgeyBpc3N1ZXIgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAzXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGV2ZWwgPCB0aGlzLmxldmVsKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciByZXBvcnRNZXRob2Q7XG4gICAgICAgICAgICBzd2l0Y2ggKGxldmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLldBUk46XG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydE1ldGhvZCA9IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkVSUk9SOlxuICAgICAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5DUklUSUNBTDpcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0TWV0aG9kID0gY29uc29sZS5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLklORk86XG4gICAgICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkRFQlVHOlxuICAgICAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5BTEw6XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0TWV0aG9kID0gY29uc29sZS5sb2c7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZpbmFsTWVzc2FnZSA9IHRoaXMuYnVpbGRNZXNzYWdlLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIGxldmVsLCBpc3N1ZXJdLCBhcmdzLCBmYWxzZSkpO1xuICAgICAgICAgICAgcmVwb3J0TWV0aG9kKGZpbmFsTWVzc2FnZSk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEVycm9yICYmIG1lc3NhZ2Uuc3RhY2sgJiYgdGhpcy5sb2dTdGFja1RyYWNlKVxuICAgICAgICAgICAgICAgIHJlcG9ydE1ldGhvZCh0aGlzLmJ1aWxkTWVzc2FnZShcIlxcbi0tIFN0YWNrU3RyYWNlOlxcbnswfVwiLCBsZXZlbCwgaXNzdWVyLCBtZXNzYWdlLnN0YWNrKSk7XG4gICAgICAgIH07XG4gICAgICAgIExvZ2dlckltcC5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uIChtZXNzYWdlLCBpc3N1ZXIpIHtcbiAgICAgICAgICAgIGlmIChpc3N1ZXIgPT09IHZvaWQgMCkgeyBpc3N1ZXIgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlcG9ydC5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLklORk8sIGlzc3Vlcl0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgICAgIH07XG4gICAgICAgIExvZ2dlckltcC5wcm90b3R5cGUuYWxsID0gZnVuY3Rpb24gKG1lc3NhZ2UsIGlzc3Vlcikge1xuICAgICAgICAgICAgaWYgKGlzc3VlciA9PT0gdm9pZCAwKSB7IGlzc3VlciA9IHVuZGVmaW5lZDsgfVxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVwb3J0LmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuQUxMLCBpc3N1ZXJdLCBhcmdzLCBmYWxzZSkpO1xuICAgICAgICB9O1xuICAgICAgICBMb2dnZXJJbXAucHJvdG90eXBlLmRlYnVnID0gZnVuY3Rpb24gKG1lc3NhZ2UsIGlzc3Vlcikge1xuICAgICAgICAgICAgaWYgKGlzc3VlciA9PT0gdm9pZCAwKSB7IGlzc3VlciA9IHVuZGVmaW5lZDsgfVxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVwb3J0LmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuREVCVUcsIGlzc3Vlcl0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgICAgIH07XG4gICAgICAgIExvZ2dlckltcC5wcm90b3R5cGUud2FybiA9IGZ1bmN0aW9uIChtZXNzYWdlLCBpc3N1ZXIpIHtcbiAgICAgICAgICAgIGlmIChpc3N1ZXIgPT09IHZvaWQgMCkgeyBpc3N1ZXIgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlcG9ydC5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLldBUk4sIGlzc3Vlcl0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgICAgIH07XG4gICAgICAgIExvZ2dlckltcC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSwgaXNzdWVyKSB7XG4gICAgICAgICAgICBpZiAoaXNzdWVyID09PSB2b2lkIDApIHsgaXNzdWVyID0gdW5kZWZpbmVkOyB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXBvcnQuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheShbbWVzc2FnZSwgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5FUlJPUiwgaXNzdWVyXSwgYXJncywgZmFsc2UpKTtcbiAgICAgICAgfTtcbiAgICAgICAgTG9nZ2VySW1wLnByb3RvdHlwZS5jcml0aWNhbCA9IGZ1bmN0aW9uIChtZXNzYWdlLCBpc3N1ZXIpIHtcbiAgICAgICAgICAgIGlmIChpc3N1ZXIgPT09IHZvaWQgMCkgeyBpc3N1ZXIgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlcG9ydC5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkNSSVRJQ0FMLCBpc3N1ZXJdLCBhcmdzLCBmYWxzZSkpO1xuICAgICAgICB9O1xuICAgICAgICBMb2dnZXJJbXAucHJvdG90eXBlLnNldExldmVsID0gZnVuY3Rpb24gKGxldmVsKSB7XG4gICAgICAgICAgICB0aGlzLmRlYnVnKCgwLCB1dGlsc18xLnN0cmluZ0Zvcm1hdCkoY29uc3RhbnRzXzEuTE9HR0lOR19NU0cuTEVWRUxfQ0hBTkdFRCwgdGhpcy5sZXZlbC50b1N0cmluZygpLCBsZXZlbC50b1N0cmluZygpKSk7XG4gICAgICAgICAgICB0aGlzLmxldmVsID0gbGV2ZWw7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBMb2dnZXJJbXA7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkxvZ2dlckltcCA9IExvZ2dlckltcDtcbiAgICB2YXIgY3VycmVudExvZ2dlcjtcbiAgICBmdW5jdGlvbiBnZXRMb2dnZXIoKSB7XG4gICAgICAgIGlmICghY3VycmVudExvZ2dlcilcbiAgICAgICAgICAgIGN1cnJlbnRMb2dnZXIgPSBuZXcgTG9nZ2VySW1wKCk7XG4gICAgICAgIHJldHVybiBjdXJyZW50TG9nZ2VyO1xuICAgIH1cbiAgICBleHBvcnRzLmdldExvZ2dlciA9IGdldExvZ2dlcjtcbiAgICBmdW5jdGlvbiBzZXRMb2dnZXIobG9nZ2VyKSB7XG4gICAgICAgIGN1cnJlbnRMb2dnZXIgPSBsb2dnZXI7XG4gICAgICAgIGdldExvZ2dlcigpLmRlYnVnKGNvbnN0YW50c18xLkxPR0dJTkdfTVNHLkxPR0dFUl9DSEFOR0VEKTtcbiAgICB9XG4gICAgZXhwb3J0cy5zZXRMb2dnZXIgPSBzZXRMb2dnZXI7XG4gICAgdmFyIGluZm8gPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIChfYSA9IGdldExvZ2dlcigpKS5pbmZvLmFwcGx5KF9hLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCB0aGlzXSwgYXJncywgZmFsc2UpKTtcbiAgICB9O1xuICAgIGV4cG9ydHMuaW5mbyA9IGluZm87XG4gICAgdmFyIGFsbCA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgKF9hID0gZ2V0TG9nZ2VyKCkpLmFsbC5hcHBseShfYSwgX19zcHJlYWRBcnJheShbbWVzc2FnZSwgdGhpc10sIGFyZ3MsIGZhbHNlKSk7XG4gICAgfTtcbiAgICBleHBvcnRzLmFsbCA9IGFsbDtcbiAgICB2YXIgZGVidWcgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIChfYSA9IGdldExvZ2dlcigpKS5kZWJ1Zy5hcHBseShfYSwgX19zcHJlYWRBcnJheShbbWVzc2FnZSwgdGhpc10sIGFyZ3MsIGZhbHNlKSk7XG4gICAgfTtcbiAgICBleHBvcnRzLmRlYnVnID0gZGVidWc7XG4gICAgdmFyIHdhcm4gPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIChfYSA9IGdldExvZ2dlcigpKS53YXJuLmFwcGx5KF9hLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCB0aGlzXSwgYXJncywgZmFsc2UpKTtcbiAgICB9O1xuICAgIGV4cG9ydHMud2FybiA9IHdhcm47XG4gICAgdmFyIGVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICAoX2EgPSBnZXRMb2dnZXIoKSkuZXJyb3IuYXBwbHkoX2EsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIHRoaXNdLCBhcmdzLCBmYWxzZSkpO1xuICAgIH07XG4gICAgZXhwb3J0cy5lcnJvciA9IGVycm9yO1xuICAgIHZhciBjcml0aWNhbCA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgKF9hID0gZ2V0TG9nZ2VyKCkpLmNyaXRpY2FsLmFwcGx5KF9hLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCB0aGlzXSwgYXJncywgZmFsc2UpKTtcbiAgICB9O1xuICAgIGV4cG9ydHMuY3JpdGljYWwgPSBjcml0aWNhbDtcbn0pOyIsIi8qKlxuICogQG5hbWVzcGFjZSBsb2dnaW5nLmxvZ2dpbmdcbiAqIEBtZW1iZXJPZiBsb2dnaW5nXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9jb25zdGFudHMnO1xuZXhwb3J0ICogZnJvbSAnLi9sb2dnaW5nJztcbmV4cG9ydCAqIGZyb20gJy4vZGVjb3JhdG9ycyc7XG5leHBvcnQgKiBmcm9tICcuL3V0aWxzJzsiLCJpbXBvcnQge0RFRkFVTFRfVElNRVNUQU1QX0ZPUk1BVCwgTE9HR0VSX0xFVkVMUywgTE9HR0lOR19NU0d9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuaW1wb3J0IHtmb3JtYXREYXRlLCBzdHJpbmdGb3JtYXR9IGZyb20gXCIuL3V0aWxzXCI7XG5cbi8qKlxuICogQHR5cGVkZWYgTG9nZ2VyTWVzc2FnZVxuICogQG1lbWJlck9mIGxvZ2dpbmcubG9nZ2luZ1xuICovXG5leHBvcnQgdHlwZSBMb2dnZXJNZXNzYWdlID0gRXJyb3IgfCBzdHJpbmc7XG5cbi8qKlxuICogQGludGVyZmFjZSBMb2dnZXJcbiAqIEBtZW1iZXJPZiBsb2dnaW5nLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMb2dnZXIge1xuICAgIC8qKlxuICAgICAqIFJlcG9ydHMgYSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxldmVsXG4gICAgICogQHBhcmFtIHthbnl9IFtpc3N1ZXJdIHRoZSBPYmplY3QvcHJvY2VzcyB0aGF0IHJlcG9ydHMgdGhlIG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBMb2dnZXJcbiAgICAgKi9cbiAgICByZXBvcnQobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgbGV2ZWw6IG51bWJlciwgaXNzdWVyOiBhbnksIC4uLmFyZ3M6IGFueVtdKTogdm9pZDtcbiAgICAvKipcbiAgICAgKiB7QGxpbmsgTG9nZ2VyI3JlcG9ydH1zIGEgbWVzc2FnZSB1bmRlciB7QGxpbmsgTE9HR0VSX0xFVkVMUy5BTEx9XG4gICAgICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHthbnlbXX0gW2FyZ3NdXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgTG9nZ2VyXG4gICAgICovXG4gICAgYWxsKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKTogdm9pZDtcbiAgICAvKipcbiAgICAgKiB7QGxpbmsgTG9nZ2VyI3JlcG9ydH1zIGEgbWVzc2FnZSB1bmRlciB7QGxpbmsgTE9HR0VSX0xFVkVMUy5JTkZPfVxuICAgICAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICAgICAqXG4gICAgICogQG1lbWJlck9mIExvZ2dlclxuICAgICAqL1xuICAgIGluZm8obWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pOiB2b2lkO1xuICAgIC8qKlxuICAgICAqIHtAbGluayBMb2dnZXIjcmVwb3J0fXMgYSBtZXNzYWdlIHVuZGVyIHtAbGluayBMT0dHRVJfTEVWRUxTLkRFQlVHfVxuICAgICAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICAgICAqXG4gICAgICogQG1lbWJlck9mIExvZ2dlclxuICAgICAqL1xuICAgIGRlYnVnKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKTogdm9pZDtcbiAgICAvKipcbiAgICAgKiB7QGxpbmsgTG9nZ2VyI3JlcG9ydH1zIGEgbWVzc2FnZSB1bmRlciB7QGxpbmsgTE9HR0VSX0xFVkVMUy5XQVJOfVxuICAgICAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICAgICAqXG4gICAgICogQG1lbWJlck9mIExvZ2dlclxuICAgICAqL1xuICAgIHdhcm4obWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pOiB2b2lkO1xuICAgIC8qKlxuICAgICAqIHtAbGluayBMb2dnZXIjcmVwb3J0fXMgYSBtZXNzYWdlIHVuZGVyIHtAbGluayBMT0dHRVJfTEVWRUxTLkVSUk9SfVxuICAgICAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICAgICAqXG4gICAgICogQG1lbWJlck9mIExvZ2dlclxuICAgICAqL1xuICAgIGVycm9yKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKTogdm9pZDtcbiAgICAvKipcbiAgICAgKiB7QGxpbmsgTG9nZ2VyI3JlcG9ydH1zIGEgbWVzc2FnZSB1bmRlciB7QGxpbmsgTE9HR0VSX0xFVkVMUy5DUklUSUNBTH1cbiAgICAgKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBMb2dnZXJcbiAgICAgKi9cbiAgICBjcml0aWNhbChtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG4gICAgLyoqXG4gICAgICogRGVmaW5lcyB0aGUgTG9nZ2VyIGxldmVsXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGV2ZWxcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBhcmdzXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgTG9nZ2VyXG4gICAgICovXG4gICAgc2V0TGV2ZWwobGV2ZWw6IG51bWJlciwgLi4uYXJnczogYW55W10pOiB2b2lkO1xufVxuXG4vKipcbiAqIERlZmF1bHQgTG9nZ2VyIEltcGxlbWVudGF0aW9uXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGRlZmF1bHRMZXZlbCBkZWZhdWx0cyB0byB7QGxpbmsgTE9HR0VSX0xFVkVMUy5JTkZPfVxuICogQHBhcmFtIHtib29sZWFufSB1c2VUaW1lc3RhbXAgZGVmYXVsdHMgdG8gdHJ1ZVxuICogQHBhcmFtIHtib29sZWFufSBsb2dMZXZlbFxuICogQHBhcmFtIHtib29sZWFufSBsb2dTdGFja1RyYWNlXG4gKiBAcGFyYW0ge3N0cmluZ30gdGltZXN0YW1wRm9ybWF0XG4gKlxuICogQGNsYXNzIExvZ2dlckltcFxuICogQGltcGxlbWVudHMgTG9nZ2VyXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2dnZXJJbXAgaW1wbGVtZW50cyBMb2dnZXIge1xuICAgIHByaXZhdGUgbGV2ZWw6IG51bWJlcjtcblxuICAgIHByaXZhdGUgcmVhZG9ubHkgdXNlVGltZXN0YW1wOiBib29sZWFuO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgbG9nTGV2ZWw6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSByZWFkb25seSB0aW1lc3RhbXBGb3JtYXQ6IHN0cmluZztcbiAgICBwcml2YXRlIHJlYWRvbmx5IGxvZ1N0YWNrVHJhY2U6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihkZWZhdWx0TGV2ZWw6IG51bWJlciA9IExPR0dFUl9MRVZFTFMuSU5GTywgdXNlVGltZXN0YW1wID0gdHJ1ZSwgbG9nTGV2ZWw6IGJvb2xlYW4gPSB0cnVlLCBsb2dTdGFja1RyYWNlOiBib29sZWFuID0gZmFsc2UsIHRpbWVzdGFtcEZvcm1hdCA9IERFRkFVTFRfVElNRVNUQU1QX0ZPUk1BVCl7XG4gICAgICAgIHRoaXMubGV2ZWwgPSBkZWZhdWx0TGV2ZWw7XG4gICAgICAgIHRoaXMudXNlVGltZXN0YW1wID0gdXNlVGltZXN0YW1wO1xuICAgICAgICB0aGlzLmxvZ0xldmVsID0gbG9nTGV2ZWw7XG4gICAgICAgIHRoaXMubG9nU3RhY2tUcmFjZSA9IGxvZ1N0YWNrVHJhY2U7XG4gICAgICAgIHRoaXMudGltZXN0YW1wRm9ybWF0ID0gdGltZXN0YW1wRm9ybWF0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJ1aWx0cyB0aGUgYWN0dWFsIGxvZ2dpbmcgbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsb2dMZXZlbCBpZiB0aGUgbGV2ZWwgaXMgdG8gYmUgbG9nZ2VkXG4gICAgICogQHBhcmFtIHthbnl9IGlzc3VlciB3aG8gaXMgbG9nZ2luZyB0aGUgbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGJ1aWxkTWVzc2FnZShtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBsb2dMZXZlbDogbnVtYmVyLCBpc3N1ZXI6IGFueSA9IHVuZGVmaW5lZCwgLi4uYXJnczogYW55W10pe1xuICAgICAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEVycm9yKVxuICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UubWVzc2FnZTtcblxuICAgICAgICBpZiAoaXNzdWVyKVxuICAgICAgICAgICAgbWVzc2FnZSA9IGBbJHtpc3N1ZXIudG9TdHJpbmcoKX1dJHttZXNzYWdlfWA7XG4gICAgICAgIGlmICh0aGlzLmxvZ0xldmVsKVxuICAgICAgICAgICAgbWVzc2FnZSA9IGBbJHtPYmplY3Qua2V5cyhMT0dHRVJfTEVWRUxTKVtsb2dMZXZlbF19XSAtICR7bWVzc2FnZX1gO1xuICAgICAgICBpZiAodGhpcy51c2VUaW1lc3RhbXApXG4gICAgICAgICAgICBtZXNzYWdlID0gYFske2Zvcm1hdERhdGUobmV3IERhdGUoKSwgdGhpcy50aW1lc3RhbXBGb3JtYXQpfV0ke21lc3NhZ2V9YDtcbiAgICAgICAgcmV0dXJuIHN0cmluZ0Zvcm1hdChtZXNzYWdlLCAuLi5hcmdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZXZlbCBkZWZhdWx0cyB0byB7QGxpbmsgTE9HR0VSX0xFVkVMUy5JTkZPfVxuICAgICAqIEBwYXJhbSB7YW55fSBbaXNzdWVyXSB0aGUgb2JqZWN0IHRoYXQgaXMgY2FsbGluZyB0aGUgcmVwb3J0IG1ldGhvZFxuICAgICAqIEBwYXJhbSB7YW55W119IFthcmdzXSB2YWx1ZXMgdG8gcmVwbGFjZSBpbiB0aGUgbWVzc2FnZSBhY2NvcmRpbmcgdG8gdGhlICd7MH0nIG5vdGF0aW9uXG4gICAgICovXG4gICAgcmVwb3J0KG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGxldmVsOiBudW1iZXIgPSBMT0dHRVJfTEVWRUxTLklORk8sIGlzc3VlcjogYW55ID0gdW5kZWZpbmVkLCAuLi5hcmdzOiBhbnlbXSkgOiB2b2lkIHtcbiAgICAgICAgaWYgKGxldmVsIDwgdGhpcy5sZXZlbClcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICBsZXQgcmVwb3J0TWV0aG9kOiBGdW5jdGlvbjtcbiAgICAgICAgc3dpdGNoIChsZXZlbCl7XG4gICAgICAgICAgICBjYXNlIExPR0dFUl9MRVZFTFMuV0FSTjpcbiAgICAgICAgICAgICAgICByZXBvcnRNZXRob2QgPSBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIExPR0dFUl9MRVZFTFMuRVJST1I6XG4gICAgICAgICAgICBjYXNlIExPR0dFUl9MRVZFTFMuQ1JJVElDQUw6XG4gICAgICAgICAgICAgICAgcmVwb3J0TWV0aG9kID0gY29uc29sZS5lcnJvcjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTE9HR0VSX0xFVkVMUy5JTkZPOlxuICAgICAgICAgICAgY2FzZSBMT0dHRVJfTEVWRUxTLkRFQlVHOlxuICAgICAgICAgICAgY2FzZSBMT0dHRVJfTEVWRUxTLkFMTDpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmVwb3J0TWV0aG9kID0gY29uc29sZS5sb2c7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZmluYWxNZXNzYWdlID0gdGhpcy5idWlsZE1lc3NhZ2UobWVzc2FnZSwgbGV2ZWwsIGlzc3VlciwgLi4uYXJncyk7XG4gICAgICAgIHJlcG9ydE1ldGhvZChmaW5hbE1lc3NhZ2UpO1xuXG4gICAgICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IgJiYgbWVzc2FnZS5zdGFjayAmJiB0aGlzLmxvZ1N0YWNrVHJhY2UpXG4gICAgICAgICAgICByZXBvcnRNZXRob2QodGhpcy5idWlsZE1lc3NhZ2UoYFxcbi0tIFN0YWNrU3RyYWNlOlxcbnswfWAsIGxldmVsLCBpc3N1ZXIsIG1lc3NhZ2Uuc3RhY2spKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIGluZm8obWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgaXNzdWVyOiBhbnkgPSB1bmRlZmluZWQsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVwb3J0KG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuSU5GTywgaXNzdWVyLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICBhbGwobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgaXNzdWVyOiBhbnkgPSB1bmRlZmluZWQsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVwb3J0KG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuQUxMLCBpc3N1ZXIsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIGRlYnVnKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGlzc3VlcjogYW55ID0gdW5kZWZpbmVkLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlcG9ydChtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLkRFQlVHLCBpc3N1ZXIsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIHdhcm4obWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgaXNzdWVyOiBhbnkgPSB1bmRlZmluZWQsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVwb3J0KG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuV0FSTiwgaXNzdWVyLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICBlcnJvcihtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBpc3N1ZXI6IGFueSA9IHVuZGVmaW5lZCwgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXBvcnQobWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5FUlJPUiwgaXNzdWVyLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICBjcml0aWNhbChtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBpc3N1ZXI6IGFueSA9IHVuZGVmaW5lZCwgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXBvcnQobWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5DUklUSUNBTCwgaXNzdWVyLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICBzZXRMZXZlbChsZXZlbDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGVidWcoc3RyaW5nRm9ybWF0KExPR0dJTkdfTVNHLkxFVkVMX0NIQU5HRUQsIHRoaXMubGV2ZWwudG9TdHJpbmcoKSwgbGV2ZWwudG9TdHJpbmcoKSkpO1xuICAgICAgICB0aGlzLmxldmVsID0gbGV2ZWw7XG4gICAgfVxufVxuXG5sZXQgY3VycmVudExvZ2dlcjogTG9nZ2VyO1xuXG4vKipcbiAqIGdldHMgdGhlIGN1cnJlbnQgTG9nZ2VyXG4gKlxuICogQGZ1bmN0aW9uIGdldExvZ2dlclxuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExvZ2dlcigpe1xuICAgIGlmICghY3VycmVudExvZ2dlcilcbiAgICAgICAgY3VycmVudExvZ2dlciA9IG5ldyBMb2dnZXJJbXAoKTtcbiAgICByZXR1cm4gY3VycmVudExvZ2dlcjtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBsb2dnZXJcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlcn0gbG9nZ2VyXG4gKlxuICogQGZ1bmN0aW9uIHNldExvZ2dlclxuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldExvZ2dlcihsb2dnZXI6IExvZ2dlcil7XG4gICAgY3VycmVudExvZ2dlciA9IGxvZ2dlcjtcbiAgICBnZXRMb2dnZXIoKS5kZWJ1ZyhMT0dHSU5HX01TRy5MT0dHRVJfQ0hBTkdFRCk7XG59XG5cbi8qKlxuICogUmVwb3J0cyBhIG1lc3NhZ2UgdG8gdGhlIGxvZ2dlciB1bmRlciB0aGUgbGV2ZWwge0BsaW5rIExPR0dFUl9MRVZFTFMuSU5GT31cbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICpcbiAqIEBmdW5jdGlvbiBpbmZvXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMubG9nZ2luZ1xuICovXG5leHBvcnQgY29uc3QgaW5mbyA9IGZ1bmN0aW9uKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pIHtcbiAgICBnZXRMb2dnZXIoKS5pbmZvKG1lc3NhZ2UsIHRoaXMsIC4uLmFyZ3MpO1xufVxuLyoqXG4gKiBSZXBvcnRzIGEgbWVzc2FnZSB0byB0aGUgbG9nZ2VyIHVuZGVyIHRoZSBsZXZlbCB7QGxpbmsgTE9HR0VSX0xFVkVMUy5BTEx9XG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAqXG4gKiBAZnVuY3Rpb24gYWxsXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMubG9nZ2luZ1xuICovXG5leHBvcnQgY29uc3QgYWxsID0gZnVuY3Rpb24odGhpczogYW55LCBtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgIGdldExvZ2dlcigpLmFsbChtZXNzYWdlLCB0aGlzLCAuLi5hcmdzKTtcbn1cbi8qKlxuICogUmVwb3J0cyBhIG1lc3NhZ2UgdG8gdGhlIGxvZ2dlciB1bmRlciB0aGUgbGV2ZWwge0BsaW5rIExPR0dFUl9MRVZFTFMuREVCVUd9XG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAqXG4gKiBAZnVuY3Rpb24gZGVidWdcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBjb25zdCBkZWJ1ZyA9IGZ1bmN0aW9uKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pIHtcbiAgICBnZXRMb2dnZXIoKS5kZWJ1ZyhtZXNzYWdlLCB0aGlzLCAuLi5hcmdzKTtcbn1cbi8qKlxuICogUmVwb3J0cyBhIG1lc3NhZ2UgdG8gdGhlIGxvZ2dlciB1bmRlciB0aGUgbGV2ZWwge0BsaW5rIExPR0dFUl9MRVZFTFMuV0FSTn1cbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICpcbiAqIEBmdW5jdGlvbiB3YXJuXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMubG9nZ2luZ1xuICovXG5leHBvcnQgY29uc3Qgd2FybiA9IGZ1bmN0aW9uKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pIHtcbiAgICBnZXRMb2dnZXIoKS53YXJuKG1lc3NhZ2UsIHRoaXMsIC4uLmFyZ3MpO1xufVxuLyoqXG4gKiBSZXBvcnRzIGEgbWVzc2FnZSB0byB0aGUgbG9nZ2VyIHVuZGVyIHRoZSBsZXZlbCB7QGxpbmsgTE9HR0VSX0xFVkVMUy5FUlJPUn1cbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICpcbiAqIEBmdW5jdGlvbiBlcnJvclxuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IGVycm9yID0gZnVuY3Rpb24odGhpczogYW55LCBtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgIGdldExvZ2dlcigpLmVycm9yKG1lc3NhZ2UsIHRoaXMsIC4uLmFyZ3MpO1xufVxuLyoqXG4gKiBSZXBvcnRzIGEgbWVzc2FnZSB0byB0aGUgbG9nZ2VyIHVuZGVyIHRoZSBsZXZlbCB7QGxpbmsgTE9HR0VSX0xFVkVMUy5DUklUSUNBTH1cbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICpcbiAqIEBmdW5jdGlvbiBjcml0aWNhbFxuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IGNyaXRpY2FsID0gZnVuY3Rpb24odGhpczogYW55LCBtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgIGdldExvZ2dlcigpLmNyaXRpY2FsKG1lc3NhZ2UsIHRoaXMsIC4uLmFyZ3MpO1xufSIsIihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICB2YXIgdiA9IGZhY3RvcnkocmVxdWlyZSwgZXhwb3J0cyk7XG4gICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIG1vZHVsZS5leHBvcnRzID0gdjtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9jb25zdGFudHNcIl0sIGZhY3RvcnkpO1xuICAgIH1cbn0pKGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIGV4cG9ydHMudHdvRGlnaXRQYWQgPSBleHBvcnRzLmZvcm1hdERhdGUgPSBleHBvcnRzLnN0cmluZ0Zvcm1hdCA9IHZvaWQgMDtcbiAgICB2YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG4gICAgZnVuY3Rpb24gc3RyaW5nRm9ybWF0KHN0cmluZykge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL3soXFxkKyl9L2csIGZ1bmN0aW9uIChtYXRjaCwgbnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGFyZ3NbbnVtYmVyXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICA/IGFyZ3NbbnVtYmVyXVxuICAgICAgICAgICAgICAgIDogbWF0Y2g7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBleHBvcnRzLnN0cmluZ0Zvcm1hdCA9IHN0cmluZ0Zvcm1hdDtcbiAgICBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUsIHBhdHRlcm5TdHIpIHtcbiAgICAgICAgaWYgKHBhdHRlcm5TdHIgPT09IHZvaWQgMCkgeyBwYXR0ZXJuU3RyID0gJ3l5eXkvTU0vZGQnOyB9XG4gICAgICAgIHZhciBkYXkgPSBkYXRlLmdldERhdGUoKSwgbW9udGggPSBkYXRlLmdldE1vbnRoKCksIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCksIGhvdXIgPSBkYXRlLmdldEhvdXJzKCksIG1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpLCBzZWNvbmQgPSBkYXRlLmdldFNlY29uZHMoKSwgbWlsaXNlY29uZHMgPSBkYXRlLmdldE1pbGxpc2Vjb25kcygpLCBoID0gaG91ciAlIDEyLCBoaCA9IHR3b0RpZ2l0UGFkKGgpLCBISCA9IHR3b0RpZ2l0UGFkKGhvdXIpLCBtbSA9IHR3b0RpZ2l0UGFkKG1pbnV0ZSksIHNzID0gdHdvRGlnaXRQYWQoc2Vjb25kKSwgYWFhID0gaG91ciA8IDEyID8gJ0FNJyA6ICdQTScsIEVFRUUgPSBjb25zdGFudHNfMS5EQVlTX09GX1dFRUtfTkFNRVNbZGF0ZS5nZXREYXkoKV0sIEVFRSA9IEVFRUUuc3Vic3RyKDAsIDMpLCBkZCA9IHR3b0RpZ2l0UGFkKGRheSksIE0gPSBtb250aCArIDEsIE1NID0gdHdvRGlnaXRQYWQoTSksIE1NTU0gPSBjb25zdGFudHNfMS5NT05USF9OQU1FU1ttb250aF0sIE1NTSA9IE1NTU0uc3Vic3RyKDAsIDMpLCB5eXl5ID0geWVhciArIFwiXCIsIHl5ID0geXl5eS5zdWJzdHIoMiwgMik7XG4gICAgICAgIHBhdHRlcm5TdHIgPSBwYXR0ZXJuU3RyXG4gICAgICAgICAgICAucmVwbGFjZSgnaGgnLCBoaCkucmVwbGFjZSgnaCcsIGgudG9TdHJpbmcoKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCdISCcsIEhIKS5yZXBsYWNlKCdIJywgaG91ci50b1N0cmluZygpKVxuICAgICAgICAgICAgLnJlcGxhY2UoJ21tJywgbW0pLnJlcGxhY2UoJ20nLCBtaW51dGUudG9TdHJpbmcoKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCdzcycsIHNzKS5yZXBsYWNlKCdzJywgc2Vjb25kLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAucmVwbGFjZSgnUycsIG1pbGlzZWNvbmRzLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAucmVwbGFjZSgnZGQnLCBkZCkucmVwbGFjZSgnZCcsIGRheS50b1N0cmluZygpKVxuICAgICAgICAgICAgLnJlcGxhY2UoJ0VFRUUnLCBFRUVFKS5yZXBsYWNlKCdFRUUnLCBFRUUpXG4gICAgICAgICAgICAucmVwbGFjZSgneXl5eScsIHl5eXkpXG4gICAgICAgICAgICAucmVwbGFjZSgneXknLCB5eSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCdhYWEnLCBhYWEpO1xuICAgICAgICBpZiAocGF0dGVyblN0ci5pbmRleE9mKCdNTU0nKSA+IC0xKSB7XG4gICAgICAgICAgICBwYXR0ZXJuU3RyID0gcGF0dGVyblN0clxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKCdNTU1NJywgTU1NTSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgnTU1NJywgTU1NKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhdHRlcm5TdHIgPSBwYXR0ZXJuU3RyXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoJ01NJywgTU0pXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoJ00nLCBNLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXR0ZXJuU3RyO1xuICAgIH1cbiAgICBleHBvcnRzLmZvcm1hdERhdGUgPSBmb3JtYXREYXRlO1xuICAgIGZ1bmN0aW9uIHR3b0RpZ2l0UGFkKG51bSkge1xuICAgICAgICByZXR1cm4gbnVtIDwgMTAgPyBcIjBcIiArIG51bSA6IG51bS50b1N0cmluZygpO1xuICAgIH1cbiAgICBleHBvcnRzLnR3b0RpZ2l0UGFkID0gdHdvRGlnaXRQYWQ7XG59KTsiLCIvKipcbiAqIFV0aWwgZnVuY3Rpb24gdG8gcHJvdmlkZSBzdHJpbmcgZm9ybWF0IGZ1bmN0aW9uYWxpdHkgc2ltaWxhciB0byBDIydzIHN0cmluZy5mb3JtYXRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gYXJncyByZXBsYWNlbWVudHMgbWFkZSBieSBvcmRlciBvZiBhcHBlYXJhbmNlIChyZXBsYWNlbWVudDAgd2lsIHJlcGxhY2UgezB9IGFuZCBzbyBvbilcbiAqIEByZXR1cm4ge3N0cmluZ30gZm9ybWF0dGVkIHN0cmluZ1xuICpcbiAqIEBmdW5jdGlvbiBzdHJpbmdGb3JtYXRcbiAqXG4gKiBAbWVtYmVyT2YgbG9nZ2luZy5sb2dnaW5nXG4gKi9cbmltcG9ydCB7REFZU19PRl9XRUVLX05BTUVTLCBNT05USF9OQU1FU30gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdGb3JtYXQoc3RyaW5nOiBzdHJpbmcsIC4uLmFyZ3M6IHN0cmluZ1tdKXtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL3soXFxkKyl9L2csIGZ1bmN0aW9uKG1hdGNoLCBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBhcmdzW251bWJlcl0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICA/IGFyZ3NbbnVtYmVyXVxuICAgICAgICAgICAgOiBtYXRjaDtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBEYXRlIEZvcm1hdCBIYW5kbGluZ1xuICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzU1MjQ2MS9ob3ctdG8tZm9ybWF0LWEtamF2YXNjcmlwdC1kYXRlXG4gKlxuICogPHByZT5cbiAqICAgICAgVXNpbmcgc2ltaWxhciBmb3JtYXR0aW5nIGFzIE1vbWVudC5qcywgQ2xhc3MgRGF0ZVRpbWVGb3JtYXR0ZXIgKEphdmEpLCBhbmQgQ2xhc3MgU2ltcGxlRGF0ZUZvcm1hdCAoSmF2YSksXG4gKiAgICAgIEkgaW1wbGVtZW50ZWQgYSBjb21wcmVoZW5zaXZlIHNvbHV0aW9uIGZvcm1hdERhdGUoZGF0ZSwgcGF0dGVyblN0cikgd2hlcmUgdGhlIGNvZGUgaXMgZWFzeSB0byByZWFkIGFuZCBtb2RpZnkuXG4gKiAgICAgIFlvdSBjYW4gZGlzcGxheSBkYXRlLCB0aW1lLCBBTS9QTSwgZXRjLlxuICpcbiAqICAgICAgRGF0ZSBhbmQgVGltZSBQYXR0ZXJuc1xuICogICAgICB5eSA9IDItZGlnaXQgeWVhcjsgeXl5eSA9IGZ1bGwgeWVhclxuICogICAgICBNID0gZGlnaXQgbW9udGg7IE1NID0gMi1kaWdpdCBtb250aDsgTU1NID0gc2hvcnQgbW9udGggbmFtZTsgTU1NTSA9IGZ1bGwgbW9udGggbmFtZVxuICogICAgICBFRUVFID0gZnVsbCB3ZWVrZGF5IG5hbWU7IEVFRSA9IHNob3J0IHdlZWtkYXkgbmFtZVxuICogICAgICBkID0gZGlnaXQgZGF5OyBkZCA9IDItZGlnaXQgZGF5XG4gKiAgICAgIGggPSBob3VycyBhbS9wbTsgaGggPSAyLWRpZ2l0IGhvdXJzIGFtL3BtOyBIID0gaG91cnM7IEhIID0gMi1kaWdpdCBob3Vyc1xuICogICAgICBtID0gbWludXRlczsgbW0gPSAyLWRpZ2l0IG1pbnV0ZXM7IGFhYSA9IEFNL1BNXG4gKiAgICAgIHMgPSBzZWNvbmRzOyBzcyA9IDItZGlnaXQgc2Vjb25kc1xuICogICAgICBTID0gbWlsaXNlY29uZHNcbiAqIDwvcHJlPlxuICpcbiAqIEBwYXJhbSB7RGF0ZX0gZGF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IFtwYXR0ZXJuU3RyXSBkZWZhdWx0cyB0byAneXl5eS9NTS9kZCdcbiAqIEByZXR1cm4ge3N0cmluZ30gdGhlIGZvcm1hdHRlZCBkYXRlXG4gKlxuICogQGZ1bmN0aW9uIGZvcm1hdERhdGVcbiAqXG4gKiBAbWVtYmVyT2YgbG9nZ2luZy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGU6IERhdGUsIHBhdHRlcm5TdHI6IHN0cmluZyA9ICd5eXl5L01NL2RkJyl7XG4gICAgY29uc3QgZGF5OiBudW1iZXIgPSBkYXRlLmdldERhdGUoKSxcbiAgICAgICAgbW9udGg6IG51bWJlciA9IGRhdGUuZ2V0TW9udGgoKSxcbiAgICAgICAgeWVhcjogbnVtYmVyID0gZGF0ZS5nZXRGdWxsWWVhcigpLFxuICAgICAgICBob3VyOiBudW1iZXIgPSBkYXRlLmdldEhvdXJzKCksXG4gICAgICAgIG1pbnV0ZTogbnVtYmVyID0gZGF0ZS5nZXRNaW51dGVzKCksXG4gICAgICAgIHNlY29uZDogbnVtYmVyID0gZGF0ZS5nZXRTZWNvbmRzKCksXG4gICAgICAgIG1pbGlzZWNvbmRzOiBudW1iZXIgPSBkYXRlLmdldE1pbGxpc2Vjb25kcygpLFxuICAgICAgICBoOiBudW1iZXIgPSBob3VyICUgMTIsXG4gICAgICAgIGhoOiBzdHJpbmcgPSB0d29EaWdpdFBhZChoKSxcbiAgICAgICAgSEg6IHN0cmluZyA9IHR3b0RpZ2l0UGFkKGhvdXIpLFxuICAgICAgICBtbTogc3RyaW5nID0gdHdvRGlnaXRQYWQobWludXRlKSxcbiAgICAgICAgc3M6IHN0cmluZyA9IHR3b0RpZ2l0UGFkKHNlY29uZCksXG4gICAgICAgIGFhYTogc3RyaW5nID0gaG91ciA8IDEyID8gJ0FNJyA6ICdQTScsXG4gICAgICAgIEVFRUU6IHN0cmluZyA9IERBWVNfT0ZfV0VFS19OQU1FU1tkYXRlLmdldERheSgpXSxcbiAgICAgICAgRUVFOiBzdHJpbmcgPSBFRUVFLnN1YnN0cigwLCAzKSxcbiAgICAgICAgZGQ6IHN0cmluZyA9IHR3b0RpZ2l0UGFkKGRheSksXG4gICAgICAgIE06IG51bWJlciA9IG1vbnRoICsgMSxcbiAgICAgICAgTU06IHN0cmluZyA9IHR3b0RpZ2l0UGFkKE0pLFxuICAgICAgICBNTU1NOiBzdHJpbmcgPSBNT05USF9OQU1FU1ttb250aF0sXG4gICAgICAgIE1NTSA6IHN0cmluZz0gTU1NTS5zdWJzdHIoMCwgMyksXG4gICAgICAgIHl5eXk6IHN0cmluZyA9IHllYXIgKyBcIlwiLFxuICAgICAgICB5eTogc3RyaW5nID0geXl5eS5zdWJzdHIoMiwgMilcbiAgICA7XG4gICAgLy8gY2hlY2tzIHRvIHNlZSBpZiBtb250aCBuYW1lIHdpbGwgYmUgdXNlZFxuICAgIHBhdHRlcm5TdHIgPSBwYXR0ZXJuU3RyXG4gICAgICAgIC5yZXBsYWNlKCdoaCcsIGhoKS5yZXBsYWNlKCdoJywgaC50b1N0cmluZygpKVxuICAgICAgICAucmVwbGFjZSgnSEgnLCBISCkucmVwbGFjZSgnSCcsIGhvdXIudG9TdHJpbmcoKSlcbiAgICAgICAgLnJlcGxhY2UoJ21tJywgbW0pLnJlcGxhY2UoJ20nLCBtaW51dGUudG9TdHJpbmcoKSlcbiAgICAgICAgLnJlcGxhY2UoJ3NzJywgc3MpLnJlcGxhY2UoJ3MnLCBzZWNvbmQudG9TdHJpbmcoKSlcbiAgICAgICAgLnJlcGxhY2UoJ1MnLCBtaWxpc2Vjb25kcy50b1N0cmluZygpKVxuICAgICAgICAucmVwbGFjZSgnZGQnLCBkZCkucmVwbGFjZSgnZCcsIGRheS50b1N0cmluZygpKVxuXG4gICAgICAgIC5yZXBsYWNlKCdFRUVFJywgRUVFRSkucmVwbGFjZSgnRUVFJywgRUVFKVxuICAgICAgICAucmVwbGFjZSgneXl5eScsIHl5eXkpXG4gICAgICAgIC5yZXBsYWNlKCd5eScsIHl5KVxuICAgICAgICAucmVwbGFjZSgnYWFhJywgYWFhKTtcbiAgICBpZiAocGF0dGVyblN0ci5pbmRleE9mKCdNTU0nKSA+IC0xKSB7XG4gICAgICAgIHBhdHRlcm5TdHIgPSBwYXR0ZXJuU3RyXG4gICAgICAgICAgICAucmVwbGFjZSgnTU1NTScsIE1NTU0pXG4gICAgICAgICAgICAucmVwbGFjZSgnTU1NJywgTU1NKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHBhdHRlcm5TdHIgPSBwYXR0ZXJuU3RyXG4gICAgICAgICAgICAucmVwbGFjZSgnTU0nLCBNTSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCdNJywgTS50b1N0cmluZygpKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdHRlcm5TdHI7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBudW1cbiAqXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKlxuICogQGZ1bmN0aW9uIHR3b0RpZ2l0UGFkXG4gKlxuICogQG1lbWJlck9mIGxvZ2dpbmcubG9nZ2luZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gdHdvRGlnaXRQYWQobnVtOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBudW0gPCAxMCA/IFwiMFwiICsgbnVtIDogbnVtLnRvU3RyaW5nKCk7XG59Il19
