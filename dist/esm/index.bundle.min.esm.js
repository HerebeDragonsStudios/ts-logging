"use strict";var __createBinding=Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){e[o=void 0===o?r:o]=t[r]},__exportStar=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||__createBinding(t,e,r)},__extends=(!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","./errors","./logging"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),__exportStar(e("./errors"),t),__exportStar(e("./logging"),t)}),function(){var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__createBinding=(!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","../logging"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CriticalError=t.LoggedError=t.criticalCallback=t.errorCallback=t.warningCallback=t.infoCallback=t.debugCallback=t.allCallback=t.loggedCallback=void 0;var o=e("../logging");function r(e,t,r){r||(r=t,t=o.LOGGER_LEVELS.INFO),(0,o.getLogger)().report(e instanceof Error?e:new i(e),t,"loggedCallback"!==this.name?this:void 0),r(e)}t.loggedCallback=r,t.allCallback=function(e,t){r.call(this,e,o.LOGGER_LEVELS.ALL,t)},t.debugCallback=function(e,t){r.call(this,e,o.LOGGER_LEVELS.DEBUG,t)},t.infoCallback=function(e,t){r.call(this,e,o.LOGGER_LEVELS.INFO,t)},t.warningCallback=function(e,t){r.call(this,e,o.LOGGER_LEVELS.WARN,t)},t.errorCallback=function(e,t){r.call(this,e,o.LOGGER_LEVELS.ERROR,t)},t.criticalCallback=function(e,t){r.call(this,e,o.LOGGER_LEVELS.CRITICAL,t)};n=Error,__extends(a,n);var n,i=a;function a(e,t){void 0===t&&(t=o.LOGGER_LEVELS.ERROR);var r=n.call(this,e instanceof Error?e.message:e)||this;return r.logged=!1,r.logged=e instanceof a&&e.logged,r.logged||(0,o.getLogger)().report(e,t),r}t.LoggedError=i;__extends(l,c=i);var c,e=l;function l(e){return c.call(this,e,o.LOGGER_LEVELS.CRITICAL)||this}t.CriticalError=e}),Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){e[o=void 0===o?r:o]=t[r]}),__exportStar=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||__createBinding(t,e,r)},__spreadArray=(!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","./errors"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),__exportStar(e("./errors"),t)}),function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DAYS_OF_WEEK_NAMES=t.MONTH_NAMES=t.DEFAULT_TIMESTAMP_FORMAT=t.LOGGING_MSG=t.LOGGER_LEVELS=void 0,t.LOGGER_LEVELS={ALL:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,CRITICAL:5},t.LOGGING_MSG={LEVEL_CHANGED:"Logger Level changed from {0} to {1}",LOGGER_CHANGED:"Logger changed"},t.DEFAULT_TIMESTAMP_FORMAT="dd/MM/yyyy HH:mm:ss:S",t.MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"],t.DAYS_OF_WEEK_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}),function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}),__createBinding=(!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","../errors","./logging","./constants"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.logSync=t.logAsync=t.StopWatch=void 0;var s=e("../errors"),p=e("./logging"),r=e("./constants"),u=(o.prototype.start=function(){this.startTime=Date.now()},o.prototype.check=function(){if(!this.startTime)throw new Error("StopWatch didnt start");return Date.now()-this.startTime},o.prototype.stop=function(){var e=this.check();return this.startTime=void 0,e},o);function o(){}t.StopWatch=u,t.logAsync=function(c,l){return void 0===c&&(c=r.LOGGER_LEVELS.DEBUG),l||"boolean"!=typeof c||(l=c,c=r.LOGGER_LEVELS.DEBUG),function(e,a,t){var r=t.value;t.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=e.pop();if(!o||"function"!=typeof o)throw new s.CriticalError("Missing Callback");var n,i=this.name&&"Function"!==this.name?this.name:this.constructor&&this.constructor.name||this;(0,p.getLogger)().report("[{0}] - Entering Method {1} with args: {2}",c,i,a,e.map(function(e){return e.toString()}).join(" | "));l&&(n=new u).start(),r.call.apply(r,__spreadArray(__spreadArray([this.__originalObject||this],e,!1),[function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n&&(0,p.getLogger)().report("[{0}][BENCHMARK] - Leaving Method {1} after {2}ms",c,i,a,n.stop()),e)return(0,p.getLogger)().report("[{0}][ERROR] - Leaving Method {1} with error {2}",c,i,a,e),o(e);(0,p.getLogger)().report("[{0}] - Leaving Method {1} with results: {2}",c,i,a,t?t.map(function(e){return e.toString()}).join(" | "):"void"),o.apply(void 0,__spreadArray([void 0],t,!1))}],!1))}}},t.logSync=function(c,l){return void 0===c&&(c=r.LOGGER_LEVELS.DEBUG),l||"boolean"!=typeof c||(l=c,c=r.LOGGER_LEVELS.DEBUG),function(e,i,t){var a=t.value;t.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r,o=this.name&&"Function"!==this.name?this.name:this.constructor&&this.constructor.name||this,n=((0,p.getLogger)().report("[{0}] - Entering Method {1} with args: {2}",c,o,i,e.map(function(e){return e.toString()}).join(" | ")),void 0);l&&(n=new u).start();try{r=a.call.apply(a,__spreadArray([this.__originalObject||this],e,!1))}catch(e){throw n&&(0,p.getLogger)().report("[{0}][BENCHMARK] - Leaving Method {1} after {2}ms",c,o,i,n.stop()),(0,p.getLogger)().report("[{0}][ERROR] - Leaving Method {1} with error {2}",c,o,i,e),e}return n&&(0,p.getLogger)().report("[{0}][BENCHMARK] - Leaving Method {1} after {2}ms",c,o,i,n.stop()),(0,p.getLogger)().report("[{0}] - Leaving Method {1} with results: {2}",c,o,i,r||"void"),r}}}}),Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){e[o=void 0===o?r:o]=t[r]}),__exportStar=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||__createBinding(t,e,r)},__spreadArray=(!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","./constants","./logging","./decorators","./utils"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),__exportStar(e("./constants"),t),__exportStar(e("./logging"),t),__exportStar(e("./decorators"),t),__exportStar(e("./utils"),t)}),function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))});!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","./constants","../errors","./utils"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.critical=t.error=t.warn=t.debug=t.all=t.info=t.setLogger=t.getLogger=t.LoggerImp=void 0;var r,i=e("./constants"),a=e("../errors"),c=e("./utils"),o=(n.prototype.buildMessage=function(e,t,r){void 0===r&&(r=void 0);for(var o=[],n=3;n<arguments.length;n++)o[n-3]=arguments[n];return e instanceof Error&&(e.stack,e=e.message),this.logLevel&&(e="[".concat(Object.keys(i.LOGGER_LEVELS)[t],"] - ").concat(e)),r&&(e="[".concat(r.toString(),"]").concat(e)),this.useTimestamp&&(e="[".concat((0,c.formatDate)(new Date,this.timestampFormat),"]").concat(e)),c.stringFormat.apply(void 0,__spreadArray([e],o,!1))},n.prototype.report=function(e,t){void 0===t&&(t=i.LOGGER_LEVELS.INFO);for(var r,o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];if(!(t<this.level||e instanceof a.LoggedError&&e.logged)){switch(t){case i.LOGGER_LEVELS.WARN:r=console.warn;break;case i.LOGGER_LEVELS.ERROR:case i.LOGGER_LEVELS.CRITICAL:r=console.error;break;case i.LOGGER_LEVELS.INFO:case i.LOGGER_LEVELS.DEBUG:case i.LOGGER_LEVELS.ALL:default:r=console.log}r(this.buildMessage.apply(this,__spreadArray([e,t,void 0],o,!1))),e instanceof Error&&e.stack&&this.logStackTrace&&(console.log(e),r(this.buildMessage("\n-- StackStrace:\n".concat(e.stack),t))),e instanceof a.LoggedError&&(e.logged=!0)}},n.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.report.apply(this,__spreadArray([e,i.LOGGER_LEVELS.INFO],t,!1))},n.prototype.all=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.report.apply(this,__spreadArray([e,i.LOGGER_LEVELS.ALL],t,!1))},n.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.report.apply(this,__spreadArray([e,i.LOGGER_LEVELS.DEBUG],t,!1))},n.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.report.apply(this,__spreadArray([e,i.LOGGER_LEVELS.WARN],t,!1))},n.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.report.apply(this,__spreadArray([e,i.LOGGER_LEVELS.ERROR],t,!1))},n.prototype.critical=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.report.apply(this,__spreadArray([e,i.LOGGER_LEVELS.CRITICAL],t,!1))},n.prototype.setLevel=function(e){this.debug((0,c.stringFormat)(i.LOGGING_MSG.LEVEL_CHANGED,this.level.toString(),e.toString())),this.level=e},n);function n(e,t,r,o,n){void 0===e&&(e=i.LOGGER_LEVELS.INFO),void 0===t&&(t=!0),void 0===r&&(r=!0),void 0===o&&(o=!1),void 0===n&&(n=i.DEFAULT_TIMESTAMP_FORMAT),this.level=e,this.useTimestamp=t,this.logLevel=r,this.logStackTrace=o,this.timestampFormat=n}function l(){return r=r||new o}t.LoggerImp=o,t.getLogger=l,t.setLogger=function(e){r=e,l().debug(i.LOGGING_MSG.LOGGER_CHANGED)};t.info=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return(t=l()).info.apply(t,__spreadArray([e],r,!1))},t.all=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return(t=l()).all.apply(t,__spreadArray([e],r,!1))},t.debug=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return(t=l()).debug.apply(t,__spreadArray([e],r,!1))},t.warn=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return(t=l()).warn.apply(t,__spreadArray([e],r,!1))},t.error=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return(t=l()).error.apply(t,__spreadArray([e],r,!1))};t.critical=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return(t=l()).critical.apply(t,__spreadArray([e],r,!1))}}),function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","./constants"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.twoDigitPad=t.formatDate=t.stringFormat=void 0;var G=e("./constants");function O(e){return e<10?"0"+e:e.toString()}t.stringFormat=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return e.replace(/{(\d+)}/g,function(e,t){return void 0!==r[t]?r[t]:e})},t.formatDate=function(e,t){void 0===t&&(t="yyyy/MM/dd");var r=e.getDate(),o=e.getMonth(),n=e.getFullYear(),i=e.getHours(),a=e.getMinutes(),c=e.getSeconds(),p=e.getMilliseconds(),l=i%12,u=O(l),f=O(i),g=O(a),d=O(c),_=i<12?"AM":"PM",E=(e=G.DAYS_OF_WEEK_NAMES[e.getDay()]).substr(0,3),L=O(r),s=o+1,y=O(s),h=(o=G.MONTH_NAMES[o]).substr(0,3),v=(n=n+"").substr(2,2);return t=-1<(t=t.replace("hh",u).replace("h",l.toString()).replace("HH",f).replace("H",i.toString()).replace("mm",g).replace("m",a.toString()).replace("ss",d).replace("s",c.toString()).replace("S",p.toString()).replace("dd",L).replace("d",r.toString()).replace("EEEE",e).replace("EEE",E).replace("yyyy",n).replace("yy",v).replace("aaa",_)).indexOf("MMM")?t.replace("MMMM",o).replace("MMM",h):t.replace("MM",y).replace("M",s.toString())},t.twoDigitPad=O});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiZXJyb3JzL2Vycm9ycy5qcyIsImluZGV4LnRzIiwiZXJyb3JzL2luZGV4LmpzIiwiZXJyb3JzL2Vycm9ycy50cyIsImxvZ2dpbmcvZGVjb3JhdG9ycy5qcyIsImVycm9ycy9pbmRleC50cyIsImxvZ2dpbmcvY29uc3RhbnRzLmpzIiwibG9nZ2luZy9jb25zdGFudHMudHMiLCJsb2dnaW5nL2luZGV4LmpzIiwibG9nZ2luZy9kZWNvcmF0b3JzLnRzIiwibG9nZ2luZy9sb2dnaW5nLmpzIiwibG9nZ2luZy9pbmRleC50cyIsImxvZ2dpbmcvbG9nZ2luZy50cyIsImxvZ2dpbmcvdXRpbHMuanMiLCJsb2dnaW5nL3V0aWxzLnRzIl0sIm5hbWVzIjpbIl9fY3JlYXRlQmluZGluZyIsIk9iamVjdCIsImNyZWF0ZSIsIm8iLCJtIiwiayIsImsyIiwidW5kZWZpbmVkIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiX19leHBvcnRTdGFyIiwiZXhwb3J0cyIsInAiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJfX2V4dGVuZHMiLCJmYWN0b3J5IiwibW9kdWxlIiwicmVxdWlyZSIsImRlZmluZSIsImFtZCIsInZhbHVlIiwiZXh0ZW5kU3RhdGljcyIsImQiLCJiIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsIlR5cGVFcnJvciIsIlN0cmluZyIsIl9fIiwidGhpcyIsImNvbnN0cnVjdG9yIiwiQ3JpdGljYWxFcnJvciIsIkxvZ2dlZEVycm9yIiwiY3JpdGljYWxDYWxsYmFjayIsImVycm9yQ2FsbGJhY2siLCJ3YXJuaW5nQ2FsbGJhY2siLCJpbmZvQ2FsbGJhY2siLCJkZWJ1Z0NhbGxiYWNrIiwiYWxsQ2FsbGJhY2siLCJsb2dnZWRDYWxsYmFjayIsImxvZ2dpbmdfMSIsIm1lc3NhZ2UiLCJsZXZlbCIsImNhbGxiYWNrIiwiTE9HR0VSX0xFVkVMUyIsIklORk8iLCJnZXRMb2dnZXIiLCJyZXBvcnQiLCJFcnJvciIsIm5hbWUiLCJBTEwiLCJERUJVRyIsIldBUk4iLCJFUlJPUiIsIkNSSVRJQ0FMIiwiX3N1cGVyIiwiZXJyb3IiLCJfdGhpcyIsImxvZ2dlZCIsIl9fc3ByZWFkQXJyYXkiLCJEQVlTX09GX1dFRUtfTkFNRVMiLCJNT05USF9OQU1FUyIsIkRFRkFVTFRfVElNRVNUQU1QX0ZPUk1BVCIsIkxPR0dJTkdfTVNHIiwiTEVWRUxfQ0hBTkdFRCIsIkxPR0dFUl9DSEFOR0VEIiwidG8iLCJmcm9tIiwicGFjayIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFyIiwiaSIsImwiLCJzbGljZSIsImNvbmNhdCIsImxvZ1N5bmMiLCJsb2dBc3luYyIsIlN0b3BXYXRjaCIsImVycm9yc18xIiwiY29uc3RhbnRzXzEiLCJzdGFydCIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJjaGVjayIsInN0b3AiLCJyZXN1bHQiLCJiZW5jaG1hcmsiLCJ0YXJnZXQiLCJwcm9wZXJ0eUtleSIsImRlc2NyaXB0b3IiLCJvcmlnaW5hbE1ldGhvZCIsImFyZ3MiLCJfaSIsInBvcCIsInN0b3BXYXRjaCIsIm1hcCIsImEiLCJ0b1N0cmluZyIsImpvaW4iLCJhcHBseSIsIl9fb3JpZ2luYWxPYmplY3QiLCJlcnIiLCJyZXN1bHRzIiwiZSIsImNyaXRpY2FsIiwid2FybiIsImRlYnVnIiwiYWxsIiwiaW5mbyIsInNldExvZ2dlciIsIkxvZ2dlckltcCIsImN1cnJlbnRMb2dnZXIiLCJ1dGlsc18xIiwiYnVpbGRNZXNzYWdlIiwibG9nTGV2ZWwiLCJpc3N1ZXIiLCJzdGFjayIsImtleXMiLCJ1c2VUaW1lc3RhbXAiLCJmb3JtYXREYXRlIiwidGltZXN0YW1wRm9ybWF0Iiwic3RyaW5nRm9ybWF0IiwicmVwb3J0TWV0aG9kIiwiY29uc29sZSIsImxvZyIsImxvZ1N0YWNrVHJhY2UiLCJzZXRMZXZlbCIsImRlZmF1bHRMZXZlbCIsImxvZ2dlciIsIl9hIiwidHdvRGlnaXRQYWQiLCJudW0iLCJzdHJpbmciLCJyZXBsYWNlIiwibWF0Y2giLCJudW1iZXIiLCJkYXRlIiwicGF0dGVyblN0ciIsImRheSIsImdldERhdGUiLCJtb250aCIsImdldE1vbnRoIiwieWVhciIsImdldEZ1bGxZZWFyIiwiaG91ciIsImdldEhvdXJzIiwibWludXRlIiwiZ2V0TWludXRlcyIsInNlY29uZCIsImdldFNlY29uZHMiLCJtaWxpc2Vjb25kcyIsImdldE1pbGxpc2Vjb25kcyIsImgiLCJoaCIsIkhIIiwibW0iLCJzcyIsImFhYSIsIkVFRSIsIkVFRUUiLCJnZXREYXkiLCJzdWJzdHIiLCJkZCIsIk0iLCJNTSIsIk1NTSIsIk1NTU0iLCJ5eSIsInl5eXkiLCJpbmRleE9mIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFJQSxnQkFBcURDLE9BQU9DLE9BQVUsU0FBU0MsRUFBR0MsRUFBR0MsRUFBR0MsUUFDN0VDLElBQVBELElBQWtCQSxFQUFLRCxHQUMzQkosT0FBT08sZUFBZUwsRUFBR0csRUFBSSxDQUFFRyxZQUFZLEVBQU1DLElBQUssV0FBYSxPQUFPTixFQUFFQyxPQUMxRSxTQUFTRixFQUFHQyxFQUFHQyxFQUFHQyxHQUVwQkgsRUFEc0JHLE9BQVhDLElBQVBELEVBQXVCRCxFQUN6QkMsR0FBTUYsRUFBRUMsSUFFVk0sYUFBOEMsU0FBU1AsRUFBR1EsR0FDMUQsSUFBSyxJQUFJQyxLQUFLVCxFQUFhLFlBQU5TLEdBQW9CWixPQUFPYSxVQUFVQyxlQUFlQyxLQUFLSixFQUFTQyxJQUFJYixnQkFBZ0JZLEVBQVNSLEVBQUdTLElDUnZISSxZRFVKLFNBQVdDLEdBQ2UsaUJBQVhDLFFBQWlELGlCQUFuQkEsT0FBT1AsUUFDcENNLEVBQVFFLFFBQVNSLFNBR0YsbUJBQVhTLFFBQXlCQSxPQUFPQyxLQUM1Q0QsT0FBTyxDQUFDLFVBQVcsVUFBVyxXQUFZLGFBQWNILEdBTmhFLENBUUcsU0FBVUUsRUFBU1IsR0FFbEJYLE9BQU9PLGVBQWVJLEVBQVMsYUFBYyxDQUFFVyxPQUFPLElFaEIxRFosYUFBQVMsRUFBQSxZQUFBUixHQUNBRCxhQUFBUyxF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LEtBRWpDYyxHQUFjQyxFQURDakYsRUFBQXBCLG1CQUFtQjhFLEVBQUt3QixXQUNwQkMsT0FBTyxFQUFHLEdBQzdCQyxFQUFhaEMsRUFBWVEsR0FDekJ5QixFQUFZdkIsRUFBUSxFQUNwQndCLEVBQWFsQyxFQUFZaUMsR0FFekJFLEdBQWNDLEVBREN4RixFQUFBbkIsWUFBWWlGLElBQ1JxQixPQUFPLEVBQUcsR0FFN0JNLEdBQWFDLEVBREUxQixFQUFPLElBQ0ptQixPQUFPLEVBQUcsR0F5QmhDLE9BVEl4QixHQUQ2QixHQVpqQ0EsRUFBYUEsRUFDUkosUUFBUSxLQUFNb0IsR0FBSXBCLFFBQVEsSUFBS21CLEVBQUV2RCxZQUNqQ29DLFFBQVEsS0FBTXFCLEdBQUlyQixRQUFRLElBQUtXLEVBQUsvQyxZQUNwQ29DLFFBQVEsS0FBTXNCLEdBQUl0QixRQUFRLElBQUthLEVBQU9qRCxZQUN0Q29DLFFBQVEsS0FBTXVCLEdBQUl2QixRQUFRLElBQUtlLEVBQU9uRCxZQUN0Q29DLFFBQVEsSUFBS2lCLEVBQVlyRCxZQUN6Qm9DLFFBQVEsS0FBTTZCLEdBQUk3QixRQUFRLElBQUtLLEVBQUl6QyxZQUVuQ29DLFFBQVEsT0FBUTBCLEdBQU0xQixRQUFRLE1BQU95QixHQUNyQ3pCLFFBQVEsT0FBUW1DLEdBQ2hCbkMsUUFBUSxLQUFNa0MsR0FDZGxDLFFBQVEsTUFBT3dCLElBQ0xZLFFBQVEsT0FDTmhDLEVBQ1JKLFFBQVEsT0FBUWlDLEdBQ2hCakMsUUFBUSxNQUFPZ0MsR0FHUDVCLEVBQ1JKLFFBQVEsS0FBTStCLEdBQ2QvQixRQUFRLElBQUs4QixFQUFFbEUsYUFlNUIzRixFQUFBNEgsWUFBQUEiLCJmaWxlIjoiaW5kZXguYnVuZGxlLm1pbi5lc20uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fZXhwb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19leHBvcnRTdGFyKSB8fCBmdW5jdGlvbihtLCBleHBvcnRzKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChleHBvcnRzLCBwKSkgX19jcmVhdGVCaW5kaW5nKGV4cG9ydHMsIG0sIHApO1xufTtcbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICB2YXIgdiA9IGZhY3RvcnkocmVxdWlyZSwgZXhwb3J0cyk7XG4gICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIG1vZHVsZS5leHBvcnRzID0gdjtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9lcnJvcnNcIiwgXCIuL2xvZ2dpbmdcIl0sIGZhY3RvcnkpO1xuICAgIH1cbn0pKGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9lcnJvcnNcIiksIGV4cG9ydHMpO1xuICAgIF9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9sb2dnaW5nXCIpLCBleHBvcnRzKTtcbn0pOyIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgdmFyIHYgPSBmYWN0b3J5KHJlcXVpcmUsIGV4cG9ydHMpO1xuICAgICAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSBtb2R1bGUuZXhwb3J0cyA9IHY7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL2xvZ2dpbmdcIl0sIGZhY3RvcnkpO1xuICAgIH1cbn0pKGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIGV4cG9ydHMuQ3JpdGljYWxFcnJvciA9IGV4cG9ydHMuTG9nZ2VkRXJyb3IgPSBleHBvcnRzLmNyaXRpY2FsQ2FsbGJhY2sgPSBleHBvcnRzLmVycm9yQ2FsbGJhY2sgPSBleHBvcnRzLndhcm5pbmdDYWxsYmFjayA9IGV4cG9ydHMuaW5mb0NhbGxiYWNrID0gZXhwb3J0cy5kZWJ1Z0NhbGxiYWNrID0gZXhwb3J0cy5hbGxDYWxsYmFjayA9IGV4cG9ydHMubG9nZ2VkQ2FsbGJhY2sgPSB2b2lkIDA7XG4gICAgdmFyIGxvZ2dpbmdfMSA9IHJlcXVpcmUoXCIuLi9sb2dnaW5nXCIpO1xuICAgIGZ1bmN0aW9uIGxvZ2dlZENhbGxiYWNrKG1lc3NhZ2UsIGxldmVsLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IGxldmVsO1xuICAgICAgICAgICAgbGV2ZWwgPSBsb2dnaW5nXzEuTE9HR0VSX0xFVkVMUy5JTkZPO1xuICAgICAgICB9XG4gICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IgPyBtZXNzYWdlIDogbmV3IExvZ2dlZEVycm9yKG1lc3NhZ2UpLCBsZXZlbCwgdGhpcy5uYW1lICE9PSBcImxvZ2dlZENhbGxiYWNrXCIgPyB0aGlzIDogdW5kZWZpbmVkKTtcbiAgICAgICAgY2FsbGJhY2sobWVzc2FnZSk7XG4gICAgfVxuICAgIGV4cG9ydHMubG9nZ2VkQ2FsbGJhY2sgPSBsb2dnZWRDYWxsYmFjaztcbiAgICBmdW5jdGlvbiBhbGxDYWxsYmFjayhtZXNzYWdlLCBjYWxsYmFjaykge1xuICAgICAgICBsb2dnZWRDYWxsYmFjay5jYWxsKHRoaXMsIG1lc3NhZ2UsIGxvZ2dpbmdfMS5MT0dHRVJfTEVWRUxTLkFMTCwgY2FsbGJhY2spO1xuICAgIH1cbiAgICBleHBvcnRzLmFsbENhbGxiYWNrID0gYWxsQ2FsbGJhY2s7XG4gICAgZnVuY3Rpb24gZGVidWdDYWxsYmFjayhtZXNzYWdlLCBjYWxsYmFjaykge1xuICAgICAgICBsb2dnZWRDYWxsYmFjay5jYWxsKHRoaXMsIG1lc3NhZ2UsIGxvZ2dpbmdfMS5MT0dHRVJfTEVWRUxTLkRFQlVHLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGV4cG9ydHMuZGVidWdDYWxsYmFjayA9IGRlYnVnQ2FsbGJhY2s7XG4gICAgZnVuY3Rpb24gaW5mb0NhbGxiYWNrKG1lc3NhZ2UsIGNhbGxiYWNrKSB7XG4gICAgICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwodGhpcywgbWVzc2FnZSwgbG9nZ2luZ18xLkxPR0dFUl9MRVZFTFMuSU5GTywgY2FsbGJhY2spO1xuICAgIH1cbiAgICBleHBvcnRzLmluZm9DYWxsYmFjayA9IGluZm9DYWxsYmFjaztcbiAgICBmdW5jdGlvbiB3YXJuaW5nQ2FsbGJhY2sobWVzc2FnZSwgY2FsbGJhY2spIHtcbiAgICAgICAgbG9nZ2VkQ2FsbGJhY2suY2FsbCh0aGlzLCBtZXNzYWdlLCBsb2dnaW5nXzEuTE9HR0VSX0xFVkVMUy5XQVJOLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGV4cG9ydHMud2FybmluZ0NhbGxiYWNrID0gd2FybmluZ0NhbGxiYWNrO1xuICAgIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2sobWVzc2FnZSwgY2FsbGJhY2spIHtcbiAgICAgICAgbG9nZ2VkQ2FsbGJhY2suY2FsbCh0aGlzLCBtZXNzYWdlLCBsb2dnaW5nXzEuTE9HR0VSX0xFVkVMUy5FUlJPUiwgY2FsbGJhY2spO1xuICAgIH1cbiAgICBleHBvcnRzLmVycm9yQ2FsbGJhY2sgPSBlcnJvckNhbGxiYWNrO1xuICAgIGZ1bmN0aW9uIGNyaXRpY2FsQ2FsbGJhY2sobWVzc2FnZSwgY2FsbGJhY2spIHtcbiAgICAgICAgbG9nZ2VkQ2FsbGJhY2suY2FsbCh0aGlzLCBtZXNzYWdlLCBsb2dnaW5nXzEuTE9HR0VSX0xFVkVMUy5DUklUSUNBTCwgY2FsbGJhY2spO1xuICAgIH1cbiAgICBleHBvcnRzLmNyaXRpY2FsQ2FsbGJhY2sgPSBjcml0aWNhbENhbGxiYWNrO1xuICAgIHZhciBMb2dnZWRFcnJvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhMb2dnZWRFcnJvciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gTG9nZ2VkRXJyb3IoZXJyb3IsIGxldmVsKSB7XG4gICAgICAgICAgICBpZiAobGV2ZWwgPT09IHZvaWQgMCkgeyBsZXZlbCA9IGxvZ2dpbmdfMS5MT0dHRVJfTEVWRUxTLkVSUk9SOyB9XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IGVycm9yKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMubG9nZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5sb2dnZWQgPSBlcnJvciBpbnN0YW5jZW9mIExvZ2dlZEVycm9yICYmIGVycm9yLmxvZ2dlZDtcbiAgICAgICAgICAgIGlmICghX3RoaXMubG9nZ2VkKVxuICAgICAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChlcnJvciwgbGV2ZWwpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBMb2dnZWRFcnJvcjtcbiAgICB9KEVycm9yKSk7XG4gICAgZXhwb3J0cy5Mb2dnZWRFcnJvciA9IExvZ2dlZEVycm9yO1xuICAgIHZhciBDcml0aWNhbEVycm9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKENyaXRpY2FsRXJyb3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIENyaXRpY2FsRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBlcnJvciwgbG9nZ2luZ18xLkxPR0dFUl9MRVZFTFMuQ1JJVElDQUwpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENyaXRpY2FsRXJyb3I7XG4gICAgfShMb2dnZWRFcnJvcikpO1xuICAgIGV4cG9ydHMuQ3JpdGljYWxFcnJvciA9IENyaXRpY2FsRXJyb3I7XG59KTsiLCIvKipcbiAqIEBtb2R1bGUgbG9nZ2luZ1xuICovXG5cbmV4cG9ydCAqIGZyb20gJy4vZXJyb3JzJztcbmV4cG9ydCAqIGZyb20gJy4vbG9nZ2luZyc7IiwidmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX2V4cG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9fZXhwb3J0U3RhcikgfHwgZnVuY3Rpb24obSwgZXhwb3J0cykge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZXhwb3J0cywgcCkpIF9fY3JlYXRlQmluZGluZyhleHBvcnRzLCBtLCBwKTtcbn07XG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgdmFyIHYgPSBmYWN0b3J5KHJlcXVpcmUsIGV4cG9ydHMpO1xuICAgICAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSBtb2R1bGUuZXhwb3J0cyA9IHY7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vZXJyb3JzXCJdLCBmYWN0b3J5KTtcbiAgICB9XG59KShmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZXJyb3JzXCIpLCBleHBvcnRzKTtcbn0pOyIsImltcG9ydCB7Q2FsbGJhY2ssIGdldExvZ2dlciwgTE9HR0VSX0xFVkVMUywgTG9nZ2VyTWVzc2FnZX0gZnJvbSBcIi4uL2xvZ2dpbmdcIjtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7bnVtYmVyfSBsZXZlbFxuICogQHBhcmFtIHtDYWxsYmFja30gY2FsbGJhY2tcbiAqXG4gKiBAZnVuY3Rpb24gbG9nZ2VkQ2FsbGJhY2tcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5lcnJvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvZ2dlZENhbGxiYWNrKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgbGV2ZWw6IG51bWJlciB8IENhbGxiYWNrLCBjYWxsYmFjazogQ2FsbGJhY2spe1xuICAgIGlmICghY2FsbGJhY2spe1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNhbGxiYWNrID0gbGV2ZWw7XG4gICAgICAgIGxldmVsID0gTE9HR0VSX0xFVkVMUy5JTkZPO1xuICAgIH1cblxuICAgIGdldExvZ2dlcigpLnJlcG9ydChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IgPyBtZXNzYWdlIDogbmV3IExvZ2dlZEVycm9yKG1lc3NhZ2UpLCBsZXZlbCBhcyBudW1iZXIsIHRoaXMubmFtZSAhPT0gXCJsb2dnZWRDYWxsYmFja1wiID8gdGhpcyA6IHVuZGVmaW5lZCk7XG4gICAgY2FsbGJhY2sobWVzc2FnZSk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHtDYWxsYmFja30gY2FsbGJhY2tcbiAqXG4gKiBAZnVuY3Rpb24gYWxsQ2FsbGJhY2tcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5lcnJvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFsbENhbGxiYWNrKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgY2FsbGJhY2s6IENhbGxiYWNrKXtcbiAgICBsb2dnZWRDYWxsYmFjay5jYWxsKHRoaXMsIG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuQUxMLCBjYWxsYmFjayk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHtDYWxsYmFja30gY2FsbGJhY2tcbiAqXG4gKiBAZnVuY3Rpb24gZGVidWdDYWxsYmFja1xuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmVycm9yc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGVidWdDYWxsYmFjayh0aGlzOiBhbnksIG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGNhbGxiYWNrOiBDYWxsYmFjayl7XG4gICAgbG9nZ2VkQ2FsbGJhY2suY2FsbCh0aGlzLCBtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLkRFQlVHLCBjYWxsYmFjayk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHtDYWxsYmFja30gY2FsbGJhY2tcbiAqXG4gKiBAZnVuY3Rpb24gaW5mb0NhbGxiYWNrXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMuZXJyb3JzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZvQ2FsbGJhY2sodGhpczogYW55LCBtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBjYWxsYmFjazogQ2FsbGJhY2spe1xuICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwodGhpcywgbWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5JTkZPLCBjYWxsYmFjayk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHtDYWxsYmFja30gY2FsbGJhY2tcbiAqXG4gKiBAZnVuY3Rpb24gd2FybmluZ0NhbGxiYWNrXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMuZXJyb3JzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3YXJuaW5nQ2FsbGJhY2sodGhpczogYW55LCBtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBjYWxsYmFjazogQ2FsbGJhY2spe1xuICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwodGhpcywgbWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5XQVJOLCBjYWxsYmFjayk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHtDYWxsYmFja30gY2FsbGJhY2tcbiAqXG4gKiBAZnVuY3Rpb24gZXJyb3JDYWxsYmFja1xuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmVycm9yc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayh0aGlzOiBhbnksIG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGNhbGxiYWNrOiBDYWxsYmFjayl7XG4gICAgbG9nZ2VkQ2FsbGJhY2suY2FsbCh0aGlzLCBtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLkVSUk9SLCBjYWxsYmFjayk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHtDYWxsYmFja30gY2FsbGJhY2tcbiAqXG4gKiBAZnVuY3Rpb24gY3JpdGljYWxDYWxsYmFja1xuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmVycm9yc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JpdGljYWxDYWxsYmFjayh0aGlzOiBhbnksIG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGNhbGxiYWNrOiBDYWxsYmFjayl7XG4gICAgbG9nZ2VkQ2FsbGJhY2suY2FsbCh0aGlzLCBtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLkNSSVRJQ0FMLCBjYWxsYmFjayk7XG59XG5cbi8qKlxuICogV3JhcHBlciBDbGFzcyBmb3IgTG9nZ2VkIEVycm9yc1xuICpcbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gZXJyb3JcbiAqIEBwYXJhbSB7bnVtYmVyfSBsZXZlbCBkZWZhdWx0cyB0byB7QGxpbmsgTE9HR0VSX0xFVkVMUy5FUlJPUn1cbiAqXG4gKiBAY2xhc3MgTG9nZ2VkRXJyb3JcbiAqIEBleHRlbmRzIEVycm9yXG4gKlxuICovXG5leHBvcnQgY2xhc3MgTG9nZ2VkRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IGxvZ2dlZFxuICAgICAqL1xuICAgIGxvZ2dlZCA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3IoZXJyb3I6IExvZ2dlck1lc3NhZ2UsIGxldmVsOiBudW1iZXIgPSBMT0dHRVJfTEVWRUxTLkVSUk9SKSB7XG4gICAgICAgIHN1cGVyKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogZXJyb3IpO1xuICAgICAgICB0aGlzLmxvZ2dlZCA9IGVycm9yIGluc3RhbmNlb2YgTG9nZ2VkRXJyb3IgJiYgZXJyb3IubG9nZ2VkO1xuICAgICAgICBpZiAoIXRoaXMubG9nZ2VkKVxuICAgICAgICAgICAgZ2V0TG9nZ2VyKCkucmVwb3J0KGVycm9yLCBsZXZlbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFdyYXBwZXIgQ2xhc3MgZm9yIENyaXRpY2FsIEVycm9yc1xuICpcbiAqIEBjbGFzcyBDcml0aWNhbEVycm9yXG4gKiBAZXh0ZW5kcyBMb2dnZWRFcnJvclxuICpcbiAqL1xuZXhwb3J0IGNsYXNzIENyaXRpY2FsRXJyb3IgZXh0ZW5kcyBMb2dnZWRFcnJvcntcbiAgICBjb25zdHJ1Y3RvcihlcnJvcjogTG9nZ2VyTWVzc2FnZSkge1xuICAgICAgICBzdXBlcihlcnJvciwgTE9HR0VSX0xFVkVMUy5DUklUSUNBTCk7XG4gICAgfVxufSIsInZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20sIHBhY2spIHtcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xufTtcbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICB2YXIgdiA9IGZhY3RvcnkocmVxdWlyZSwgZXhwb3J0cyk7XG4gICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIG1vZHVsZS5leHBvcnRzID0gdjtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vZXJyb3JzXCIsIFwiLi9sb2dnaW5nXCIsIFwiLi9jb25zdGFudHNcIl0sIGZhY3RvcnkpO1xuICAgIH1cbn0pKGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIGV4cG9ydHMubG9nU3luYyA9IGV4cG9ydHMubG9nQXN5bmMgPSBleHBvcnRzLlN0b3BXYXRjaCA9IHZvaWQgMDtcbiAgICB2YXIgZXJyb3JzXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JzXCIpO1xuICAgIHZhciBsb2dnaW5nXzEgPSByZXF1aXJlKFwiLi9sb2dnaW5nXCIpO1xuICAgIHZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbiAgICB2YXIgU3RvcFdhdGNoID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gU3RvcFdhdGNoKCkge1xuICAgICAgICB9XG4gICAgICAgIFN0b3BXYXRjaC5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIH07XG4gICAgICAgIFN0b3BXYXRjaC5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RhcnRUaW1lKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU3RvcFdhdGNoIGRpZG50IHN0YXJ0Jyk7XG4gICAgICAgICAgICByZXR1cm4gRGF0ZS5ub3coKSAtIHRoaXMuc3RhcnRUaW1lO1xuICAgICAgICB9O1xuICAgICAgICBTdG9wV2F0Y2gucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5jaGVjaygpO1xuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU3RvcFdhdGNoO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5TdG9wV2F0Y2ggPSBTdG9wV2F0Y2g7XG4gICAgZnVuY3Rpb24gbG9nQXN5bmMobGV2ZWwsIGJlbmNobWFyaykge1xuICAgICAgICBpZiAobGV2ZWwgPT09IHZvaWQgMCkgeyBsZXZlbCA9IGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuREVCVUc7IH1cbiAgICAgICAgaWYgKCFiZW5jaG1hcmsgJiYgdHlwZW9mIGxldmVsID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIGJlbmNobWFyayA9IGxldmVsO1xuICAgICAgICAgICAgbGV2ZWwgPSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkRFQlVHO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSwgZGVzY3JpcHRvcikge1xuICAgICAgICAgICAgdmFyIG9yaWdpbmFsTWV0aG9kID0gZGVzY3JpcHRvci52YWx1ZTtcbiAgICAgICAgICAgIHZhciBtZXRob2RXcmFwcGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBhcmdzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGlmICghY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JzXzEuQ3JpdGljYWxFcnJvcihcIk1pc3NpbmcgQ2FsbGJhY2tcIik7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSB0aGlzLm5hbWUgJiYgdGhpcy5uYW1lICE9PSAnRnVuY3Rpb24nID8gdGhpcy5uYW1lIDogdGhpcy5jb25zdHJ1Y3RvciAmJiB0aGlzLmNvbnN0cnVjdG9yLm5hbWUgfHwgdGhpcztcbiAgICAgICAgICAgICAgICAoMCwgbG9nZ2luZ18xLmdldExvZ2dlcikoKS5yZXBvcnQoXCJbezB9XSAtIEVudGVyaW5nIE1ldGhvZCB7MX0gd2l0aCBhcmdzOiB7Mn1cIiwgbGV2ZWwsIG5hbWUsIHByb3BlcnR5S2V5LCBhcmdzLm1hcChmdW5jdGlvbiAoYSkgeyByZXR1cm4gYS50b1N0cmluZygpOyB9KS5qb2luKCcgfCAnKSk7XG4gICAgICAgICAgICAgICAgdmFyIHN0b3BXYXRjaDtcbiAgICAgICAgICAgICAgICB2YXIgY2IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdG9wV2F0Y2gpXG4gICAgICAgICAgICAgICAgICAgICAgICAoMCwgbG9nZ2luZ18xLmdldExvZ2dlcikoKS5yZXBvcnQoXCJbezB9XVtCRU5DSE1BUktdIC0gTGVhdmluZyBNZXRob2QgezF9IGFmdGVyIHsyfW1zXCIsIGxldmVsLCBuYW1lLCBwcm9wZXJ0eUtleSwgc3RvcFdhdGNoLnN0b3AoKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChcIlt7MH1dW0VSUk9SXSAtIExlYXZpbmcgTWV0aG9kIHsxfSB3aXRoIGVycm9yIHsyfVwiLCBsZXZlbCwgbmFtZSwgcHJvcGVydHlLZXksIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAoMCwgbG9nZ2luZ18xLmdldExvZ2dlcikoKS5yZXBvcnQoXCJbezB9XSAtIExlYXZpbmcgTWV0aG9kIHsxfSB3aXRoIHJlc3VsdHM6IHsyfVwiLCBsZXZlbCwgbmFtZSwgcHJvcGVydHlLZXksIHJlc3VsdHMgPyByZXN1bHRzLm1hcChmdW5jdGlvbiAoYSkgeyByZXR1cm4gYS50b1N0cmluZygpOyB9KS5qb2luKCcgfCAnKSA6IFwidm9pZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodm9pZCAwLCBfX3NwcmVhZEFycmF5KFt1bmRlZmluZWRdLCByZXN1bHRzLCBmYWxzZSkpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKGJlbmNobWFyaykge1xuICAgICAgICAgICAgICAgICAgICBzdG9wV2F0Y2ggPSBuZXcgU3RvcFdhdGNoKCk7XG4gICAgICAgICAgICAgICAgICAgIHN0b3BXYXRjaC5zdGFydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcmlnaW5hbE1ldGhvZC5jYWxsLmFwcGx5KG9yaWdpbmFsTWV0aG9kLCBfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW3RoaXMuX19vcmlnaW5hbE9iamVjdCB8fCB0aGlzXSwgYXJncywgZmFsc2UpLCBbY2JdLCBmYWxzZSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGRlc2NyaXB0b3IudmFsdWUgPSBtZXRob2RXcmFwcGVyO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBleHBvcnRzLmxvZ0FzeW5jID0gbG9nQXN5bmM7XG4gICAgZnVuY3Rpb24gbG9nU3luYyhsZXZlbCwgYmVuY2htYXJrKSB7XG4gICAgICAgIGlmIChsZXZlbCA9PT0gdm9pZCAwKSB7IGxldmVsID0gY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5ERUJVRzsgfVxuICAgICAgICBpZiAoIWJlbmNobWFyayAmJiB0eXBlb2YgbGV2ZWwgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgYmVuY2htYXJrID0gbGV2ZWw7XG4gICAgICAgICAgICBsZXZlbCA9IGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuREVCVUc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIHByb3BlcnR5S2V5LCBkZXNjcmlwdG9yKSB7XG4gICAgICAgICAgICB2YXIgb3JpZ2luYWxNZXRob2QgPSBkZXNjcmlwdG9yLnZhbHVlO1xuICAgICAgICAgICAgdmFyIG1ldGhvZFdyYXBwZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gdGhpcy5uYW1lICYmIHRoaXMubmFtZSAhPT0gJ0Z1bmN0aW9uJyA/IHRoaXMubmFtZSA6IHRoaXMuY29uc3RydWN0b3IgJiYgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lIHx8IHRoaXM7XG4gICAgICAgICAgICAgICAgKDAsIGxvZ2dpbmdfMS5nZXRMb2dnZXIpKCkucmVwb3J0KFwiW3swfV0gLSBFbnRlcmluZyBNZXRob2QgezF9IHdpdGggYXJnczogezJ9XCIsIGxldmVsLCBuYW1lLCBwcm9wZXJ0eUtleSwgYXJncy5tYXAoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGEudG9TdHJpbmcoKTsgfSkuam9pbignIHwgJykpO1xuICAgICAgICAgICAgICAgIHZhciBzdG9wV2F0Y2ggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAoYmVuY2htYXJrKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0b3BXYXRjaCA9IG5ldyBTdG9wV2F0Y2goKTtcbiAgICAgICAgICAgICAgICAgICAgc3RvcFdhdGNoLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG9yaWdpbmFsTWV0aG9kLmNhbGwuYXBwbHkob3JpZ2luYWxNZXRob2QsIF9fc3ByZWFkQXJyYXkoW3RoaXMuX19vcmlnaW5hbE9iamVjdCB8fCB0aGlzXSwgYXJncywgZmFsc2UpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3BXYXRjaClcbiAgICAgICAgICAgICAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChcIlt7MH1dW0JFTkNITUFSS10gLSBMZWF2aW5nIE1ldGhvZCB7MX0gYWZ0ZXIgezJ9bXNcIiwgbGV2ZWwsIG5hbWUsIHByb3BlcnR5S2V5LCBzdG9wV2F0Y2guc3RvcCgpKTtcbiAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ2dpbmdfMS5nZXRMb2dnZXIpKCkucmVwb3J0KFwiW3swfV1bRVJST1JdIC0gTGVhdmluZyBNZXRob2QgezF9IHdpdGggZXJyb3IgezJ9XCIsIGxldmVsLCBuYW1lLCBwcm9wZXJ0eUtleSwgZSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzdG9wV2F0Y2gpXG4gICAgICAgICAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChcIlt7MH1dW0JFTkNITUFSS10gLSBMZWF2aW5nIE1ldGhvZCB7MX0gYWZ0ZXIgezJ9bXNcIiwgbGV2ZWwsIG5hbWUsIHByb3BlcnR5S2V5LCBzdG9wV2F0Y2guc3RvcCgpKTtcbiAgICAgICAgICAgICAgICAoMCwgbG9nZ2luZ18xLmdldExvZ2dlcikoKS5yZXBvcnQoXCJbezB9XSAtIExlYXZpbmcgTWV0aG9kIHsxfSB3aXRoIHJlc3VsdHM6IHsyfVwiLCBsZXZlbCwgbmFtZSwgcHJvcGVydHlLZXksIHJlc3VsdCA/IHJlc3VsdCA6IFwidm9pZFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGRlc2NyaXB0b3IudmFsdWUgPSBtZXRob2RXcmFwcGVyO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBleHBvcnRzLmxvZ1N5bmMgPSBsb2dTeW5jO1xufSk7IiwiLyoqXG4gKiBAbmFtZXNwYWNlIGRiLWRlY29yYXRvcnMuZXJyb3JzXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9yc1xuICovXG5cbmV4cG9ydCAqIGZyb20gJy4vZXJyb3JzJzsiLCIoZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgdmFyIHYgPSBmYWN0b3J5KHJlcXVpcmUsIGV4cG9ydHMpO1xuICAgICAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSBtb2R1bGUuZXhwb3J0cyA9IHY7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiXSwgZmFjdG9yeSk7XG4gICAgfVxufSkoZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZXhwb3J0cy5EQVlTX09GX1dFRUtfTkFNRVMgPSBleHBvcnRzLk1PTlRIX05BTUVTID0gZXhwb3J0cy5ERUZBVUxUX1RJTUVTVEFNUF9GT1JNQVQgPSBleHBvcnRzLkxPR0dJTkdfTVNHID0gZXhwb3J0cy5MT0dHRVJfTEVWRUxTID0gdm9pZCAwO1xuICAgIGV4cG9ydHMuTE9HR0VSX0xFVkVMUyA9IHtcbiAgICAgICAgQUxMOiAwLFxuICAgICAgICBERUJVRzogMSxcbiAgICAgICAgSU5GTzogMixcbiAgICAgICAgV0FSTjogMyxcbiAgICAgICAgRVJST1I6IDQsXG4gICAgICAgIENSSVRJQ0FMOiA1XG4gICAgfTtcbiAgICBleHBvcnRzLkxPR0dJTkdfTVNHID0ge1xuICAgICAgICBMRVZFTF9DSEFOR0VEOiBcIkxvZ2dlciBMZXZlbCBjaGFuZ2VkIGZyb20gezB9IHRvIHsxfVwiLFxuICAgICAgICBMT0dHRVJfQ0hBTkdFRDogXCJMb2dnZXIgY2hhbmdlZFwiXG4gICAgfTtcbiAgICBleHBvcnRzLkRFRkFVTFRfVElNRVNUQU1QX0ZPUk1BVCA9IFwiZGQvTU0veXl5eSBISDptbTpzczpTXCI7XG4gICAgZXhwb3J0cy5NT05USF9OQU1FUyA9IFtcbiAgICAgICAgXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIixcbiAgICAgICAgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXG4gICAgXTtcbiAgICBleHBvcnRzLkRBWVNfT0ZfV0VFS19OQU1FUyA9IFtcbiAgICAgICAgXCJTdW5kYXlcIiwgXCJNb25kYXlcIiwgXCJUdWVzZGF5XCIsXG4gICAgICAgIFwiV2VkbmVzZGF5XCIsIFwiVGh1cnNkYXlcIiwgXCJGcmlkYXlcIiwgXCJTYXR1cmRheVwiXG4gICAgXTtcbn0pOyIsIi8qKlxuICogQGVudW0gTE9HR0VSX0xFVkVMU1xuICpcbiAqIEBjYXRlZ29yeSBDb25zdGFudHNcbiAqL1xuZXhwb3J0IGNvbnN0IExPR0dFUl9MRVZFTFMgPSB7XG4gICAgQUxMOiAwLFxuICAgIERFQlVHOiAxLFxuICAgIElORk86IDIsXG4gICAgV0FSTjogMyxcbiAgICBFUlJPUjogNCxcbiAgICBDUklUSUNBTDogNVxufVxuXG4vKipcbiAqIERlZmF1bHQgbWVzc2FnZXNcbiAqXG4gKiBjb25zdGFudCBMT0dHSU5HX01TR1xuICpcbiAqIEBtZW1iZXJPZiBsb2dnaW5nLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IExPR0dJTkdfTVNHID0ge1xuICAgIExFVkVMX0NIQU5HRUQ6IFwiTG9nZ2VyIExldmVsIGNoYW5nZWQgZnJvbSB7MH0gdG8gezF9XCIsXG4gICAgTE9HR0VSX0NIQU5HRUQ6IFwiTG9nZ2VyIGNoYW5nZWRcIlxufVxuXG4vKipcbiAqIEB0eXBlZGVmIEVyclxuICogQG1lbWJlck9mIGxvZ2dpbmcubG9nZ2luZ1xuICogKi9cbmV4cG9ydCB0eXBlIEVyciA9IEVycm9yIHwgc3RyaW5nIHwgdW5kZWZpbmVkO1xuLyoqXG4gKiBAdHlwZWRlZiBDYWxsYmFja1xuICogQG1lbWJlck9mIGxvZ2dpbmcubG9nZ2luZ1xuICogKi9cbmV4cG9ydCB0eXBlIENhbGxiYWNrID0gKGVycj86IEVyciwgLi4uYXJnczogYW55W10pID0+IHZvaWQ7XG5cbi8qKlxuICogQGNvbnN0YW50IERFRkFVTFRfVElNRVNUQU1QX0ZPUk1BVFxuICogQGNhdGVnb3J5IENvbnN0YW50c1xuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9USU1FU1RBTVBfRk9STUFUID0gXCJkZC9NTS95eXl5IEhIOm1tOnNzOlNcIjtcblxuLyoqXG4gKiBDYW4gYmUgY2hhbmdlZCBmb3IgbG9jYWxpemF0aW9uIHB1cnBvc2VzXG4gKlxuICogQGNvbnN0YW50IE1PTlRIX05BTUVTXG4gKi9cbmV4cG9ydCBjb25zdCBNT05USF9OQU1FUyA9IFtcbiAgICBcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCIsIFwiSnVseVwiLFxuICAgIFwiQXVndXN0XCIsIFwiU2VwdGVtYmVyXCIsIFwiT2N0b2JlclwiLCBcIk5vdmVtYmVyXCIsIFwiRGVjZW1iZXJcIlxuXTtcblxuLyoqXG4gKiBDYW4gYmUgY2hhbmdlZCBmb3IgbG9jYWxpemF0aW9uIHB1cnBvc2VzXG4gKlxuICogQGNvbnN0YW50IERBWVNfT0ZfV0VFS19OQU1FU1xuICovXG5leHBvcnQgY29uc3QgREFZU19PRl9XRUVLX05BTUVTID0gW1xuICAgIFwiU3VuZGF5XCIsIFwiTW9uZGF5XCIsIFwiVHVlc2RheVwiLFxuICAgIFwiV2VkbmVzZGF5XCIsIFwiVGh1cnNkYXlcIiwgXCJGcmlkYXlcIiwgXCJTYXR1cmRheVwiXG5dOyIsInZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19leHBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2V4cG9ydFN0YXIpIHx8IGZ1bmN0aW9uKG0sIGV4cG9ydHMpIHtcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGV4cG9ydHMsIHApKSBfX2NyZWF0ZUJpbmRpbmcoZXhwb3J0cywgbSwgcCk7XG59O1xuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHZhciB2ID0gZmFjdG9yeShyZXF1aXJlLCBleHBvcnRzKTtcbiAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZCkgbW9kdWxlLmV4cG9ydHMgPSB2O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2NvbnN0YW50c1wiLCBcIi4vbG9nZ2luZ1wiLCBcIi4vZGVjb3JhdG9yc1wiLCBcIi4vdXRpbHNcIl0sIGZhY3RvcnkpO1xuICAgIH1cbn0pKGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9jb25zdGFudHNcIiksIGV4cG9ydHMpO1xuICAgIF9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9sb2dnaW5nXCIpLCBleHBvcnRzKTtcbiAgICBfX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZGVjb3JhdG9yc1wiKSwgZXhwb3J0cyk7XG4gICAgX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3V0aWxzXCIpLCBleHBvcnRzKTtcbn0pOyIsImltcG9ydCB7Q3JpdGljYWxFcnJvcn0gZnJvbSBcIi4uL2Vycm9yc1wiO1xuaW1wb3J0IHtnZXRMb2dnZXJ9IGZyb20gXCIuL2xvZ2dpbmdcIjtcbmltcG9ydCB7Q2FsbGJhY2ssIEVyciwgTE9HR0VSX0xFVkVMU30gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5cbi8qKlxuICogVXRpbCBjbGFzcyB0byBtZWFzdXJlIHRpbWUgYmV0d2VlbiB0d28gcG9pbnRzIGluIHRpbWU7XG4gKlxuICogQGNsYXNzIFN0b3BXYXRjaFxuICpcbiAqL1xuZXhwb3J0IGNsYXNzIFN0b3BXYXRjaHtcbiAgICBwcml2YXRlIHN0YXJ0VGltZT86IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgc3RhcnQgdGltZVxuICAgICAqL1xuICAgIHN0YXJ0KCl7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gbm93IGFuZCB0aGUgc3RhcnQgdGltZVxuICAgICAqL1xuICAgIGNoZWNrKCk6IG51bWJlciB7XG4gICAgICAgIGlmICghdGhpcy5zdGFydFRpbWUpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0b3BXYXRjaCBkaWRudCBzdGFydCcpO1xuICAgICAgICByZXR1cm4gRGF0ZS5ub3coKSAtIHRoaXMuc3RhcnRUaW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBub3cgYW5kIHRoZSBzdGFydCB0aW1lXG4gICAgICogc3RvcHMgdGhlIFRpbWVXYXRjaFxuICAgICAqL1xuICAgIHN0b3AoKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5jaGVjaygpO1xuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5cbi8qKlxuICogQXN5bmMgTWV0aG9kIGRlY29yYXRvciB0byBsb2cgdGhlIGlucHV0IGFuZCBvdXRwdXQgb2YgdGhhdCBtZXRob2RcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gW2xldmVsXSBMb2dnaW5nIExldmVsIGFzIGluIHtAbGluayBMT0dHRVJfTEVWRUxTfSBkZWZhdWx0cyB0byB7QGxpbmsgTE9HR0VSX0xFVkVMUy5ERUJVR31cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2JlbmNobWFya10gZGV0ZXJtaW5lcyBpZiB0aGUgbG9nZ2luZyBpbmNsdWRlcyB0aGUgZHVyYXRpb24gaW4gbXMuIGRlZmF1bHRzIHRvIGZhbHNlXG4gKlxuICogQGRlY29yYXRvciBsb2dBc3luY1xuICpcbiAqIEBjYXRlZ29yeSBEZWNvcmF0b3JzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2dBc3luYyhsZXZlbDogbnVtYmVyIHwgYm9vbGVhbiA9IExPR0dFUl9MRVZFTFMuREVCVUcsIGJlbmNobWFyaz86IGJvb2xlYW4pIHtcblxuICAgIGlmICghYmVuY2htYXJrICYmIHR5cGVvZiBsZXZlbCA9PT0gJ2Jvb2xlYW4nKXtcbiAgICAgICAgYmVuY2htYXJrID0gbGV2ZWw7XG4gICAgICAgIGxldmVsID0gTE9HR0VSX0xFVkVMUy5ERUJVRztcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldDogYW55LCBwcm9wZXJ0eUtleTogc3RyaW5nLCBkZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3IpIHtcblxuICAgICAgICBjb25zdCBvcmlnaW5hbE1ldGhvZCA9IGRlc2NyaXB0b3IudmFsdWU7XG5cbiAgICAgICAgY29uc3QgbWV0aG9kV3JhcHBlciA9IGZ1bmN0aW9uKHRoaXM6IGFueSwgLi4uYXJnczogYW55W10pe1xuICAgICAgICAgICAgbGV0IGNhbGxiYWNrOiBDYWxsYmFjayA9IGFyZ3MucG9wKCk7XG4gICAgICAgICAgICBpZiAoIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ3JpdGljYWxFcnJvcihgTWlzc2luZyBDYWxsYmFja2ApO1xuXG4gICAgICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5uYW1lICYmIHRoaXMubmFtZSAhPT0gJ0Z1bmN0aW9uJyA/IHRoaXMubmFtZSA6IHRoaXMuY29uc3RydWN0b3IgJiYgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lIHx8IHRoaXM7XG4gICAgICAgICAgICBnZXRMb2dnZXIoKS5yZXBvcnQoYFt7MH1dIC0gRW50ZXJpbmcgTWV0aG9kIHsxfSB3aXRoIGFyZ3M6IHsyfWAsIGxldmVsIGFzIG51bWJlciwgbmFtZSwgcHJvcGVydHlLZXksIGFyZ3MubWFwKGEgPT4gYS50b1N0cmluZygpKS5qb2luKCcgfCAnKSk7XG5cbiAgICAgICAgICAgIGxldCBzdG9wV2F0Y2g6IFN0b3BXYXRjaDtcblxuICAgICAgICAgICAgY29uc3QgY2IgPSAoZXJyOiBFcnIsIC4uLnJlc3VsdHM6IGFueVtdKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHN0b3BXYXRjaClcbiAgICAgICAgICAgICAgICAgICAgZ2V0TG9nZ2VyKCkucmVwb3J0KGBbezB9XVtCRU5DSE1BUktdIC0gTGVhdmluZyBNZXRob2QgezF9IGFmdGVyIHsyfW1zYCwgbGV2ZWwgYXMgbnVtYmVyLCBuYW1lLCBwcm9wZXJ0eUtleSwgc3RvcFdhdGNoLnN0b3AoKSk7XG4gICAgICAgICAgICAgICAgaWYgKGVycil7XG4gICAgICAgICAgICAgICAgICAgIGdldExvZ2dlcigpLnJlcG9ydChgW3swfV1bRVJST1JdIC0gTGVhdmluZyBNZXRob2QgezF9IHdpdGggZXJyb3IgezJ9YCwgbGV2ZWwgYXMgbnVtYmVyLCBuYW1lLCBwcm9wZXJ0eUtleSwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZ2V0TG9nZ2VyKCkucmVwb3J0KGBbezB9XSAtIExlYXZpbmcgTWV0aG9kIHsxfSB3aXRoIHJlc3VsdHM6IHsyfWAsIGxldmVsIGFzIG51bWJlciwgbmFtZSwgcHJvcGVydHlLZXksIHJlc3VsdHMgPyByZXN1bHRzLm1hcChhID0+IGEudG9TdHJpbmcoKSkuam9pbignIHwgJykgOiBcInZvaWRcIik7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCAuLi5yZXN1bHRzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGJlbmNobWFyayl7XG4gICAgICAgICAgICAgICAgc3RvcFdhdGNoID0gbmV3IFN0b3BXYXRjaCgpO1xuICAgICAgICAgICAgICAgIHN0b3BXYXRjaC5zdGFydCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvcmlnaW5hbE1ldGhvZC5jYWxsKHRoaXMuX19vcmlnaW5hbE9iamVjdCB8fCB0aGlzLCAuLi5hcmdzLCBjYik7XG4gICAgICAgIH1cblxuICAgICAgICBkZXNjcmlwdG9yLnZhbHVlID0gbWV0aG9kV3JhcHBlcjtcbiAgICB9XG59XG5cbi8qKlxuICogU3luYyBNZXRob2QgZGVjb3JhdG9yIHRvIGxvZyB0aGUgaW5wdXQgYW5kIG91dHB1dCBvZiB0aGF0IG1ldGhvZFxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbGV2ZWxdIExvZ2dpbmcgTGV2ZWwgYXMgaW4ge0BsaW5rIExPR0dFUl9MRVZFTFN9IGRlZmF1bHRzIHRvIHtAbGluayBMT0dHRVJfTEVWRUxTLkRFQlVHfVxuICogQHBhcmFtIHtib29sZWFufSBbYmVuY2htYXJrXSBkZXRlcm1pbmVzIGlmIHRoZSBsb2dnaW5nIGluY2x1ZGVzIHRoZSBkdXJhdGlvbiBpbiBtcy4gZGVmYXVsdHMgdG8gZmFsc2VcbiAqXG4gKiBAZGVjb3JhdG9yIGxvZ1N5bmNcbiAqXG4gKiBAY2F0ZWdvcnkgRGVjb3JhdG9yc1xuICovXG5leHBvcnQgZnVuY3Rpb24gbG9nU3luYyhsZXZlbDogbnVtYmVyIHwgYm9vbGVhbiA9IExPR0dFUl9MRVZFTFMuREVCVUcsIGJlbmNobWFyaz86IGJvb2xlYW4pIHtcblxuICAgIGlmICghYmVuY2htYXJrICYmIHR5cGVvZiBsZXZlbCA9PT0gJ2Jvb2xlYW4nKXtcbiAgICAgICAgYmVuY2htYXJrID0gbGV2ZWw7XG4gICAgICAgIGxldmVsID0gTE9HR0VSX0xFVkVMUy5ERUJVRztcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldDogYW55LCBwcm9wZXJ0eUtleTogc3RyaW5nLCBkZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3IpIHtcblxuICAgICAgICBjb25zdCBvcmlnaW5hbE1ldGhvZCA9IGRlc2NyaXB0b3IudmFsdWU7XG5cbiAgICAgICAgY29uc3QgbWV0aG9kV3JhcHBlciA9IGZ1bmN0aW9uKHRoaXM6IGFueSwgLi4uYXJnczogYW55W10pe1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMubmFtZSAmJiB0aGlzLm5hbWUgIT09ICdGdW5jdGlvbicgPyB0aGlzLm5hbWUgOiB0aGlzLmNvbnN0cnVjdG9yICYmIHRoaXMuY29uc3RydWN0b3IubmFtZSB8fCB0aGlzO1xuXG4gICAgICAgICAgICBnZXRMb2dnZXIoKS5yZXBvcnQoYFt7MH1dIC0gRW50ZXJpbmcgTWV0aG9kIHsxfSB3aXRoIGFyZ3M6IHsyfWAsIGxldmVsIGFzIG51bWJlciwgbmFtZSwgcHJvcGVydHlLZXksIGFyZ3MubWFwKGEgPT4gYS50b1N0cmluZygpKS5qb2luKCcgfCAnKSk7XG4gICAgICAgICAgICBsZXQgc3RvcFdhdGNoOiBTdG9wV2F0Y2ggfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgICAgICBpZiAoYmVuY2htYXJrKXtcbiAgICAgICAgICAgICAgICBzdG9wV2F0Y2ggPSBuZXcgU3RvcFdhdGNoKCk7XG4gICAgICAgICAgICAgICAgc3RvcFdhdGNoLnN0YXJ0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gb3JpZ2luYWxNZXRob2QuY2FsbCh0aGlzLl9fb3JpZ2luYWxPYmplY3QgfHwgdGhpcywgLi4uYXJncyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0b3BXYXRjaClcbiAgICAgICAgICAgICAgICAgICAgZ2V0TG9nZ2VyKCkucmVwb3J0KGBbezB9XVtCRU5DSE1BUktdIC0gTGVhdmluZyBNZXRob2QgezF9IGFmdGVyIHsyfW1zYCwgbGV2ZWwgYXMgbnVtYmVyLCBuYW1lLCBwcm9wZXJ0eUtleSwgc3RvcFdhdGNoLnN0b3AoKSk7XG4gICAgICAgICAgICAgICAgZ2V0TG9nZ2VyKCkucmVwb3J0KGBbezB9XVtFUlJPUl0gLSBMZWF2aW5nIE1ldGhvZCB7MX0gd2l0aCBlcnJvciB7Mn1gLCBsZXZlbCBhcyBudW1iZXIsIG5hbWUsIHByb3BlcnR5S2V5LCBlKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0b3BXYXRjaClcbiAgICAgICAgICAgICAgICBnZXRMb2dnZXIoKS5yZXBvcnQoYFt7MH1dW0JFTkNITUFSS10gLSBMZWF2aW5nIE1ldGhvZCB7MX0gYWZ0ZXIgezJ9bXNgLCBsZXZlbCBhcyBudW1iZXIsIG5hbWUsIHByb3BlcnR5S2V5LCBzdG9wV2F0Y2guc3RvcCgpKTtcbiAgICAgICAgICAgIGdldExvZ2dlcigpLnJlcG9ydChgW3swfV0gLSBMZWF2aW5nIE1ldGhvZCB7MX0gd2l0aCByZXN1bHRzOiB7Mn1gLCBsZXZlbCBhcyBudW1iZXIsIG5hbWUsIHByb3BlcnR5S2V5LCByZXN1bHQgPyByZXN1bHQgOiBcInZvaWRcIik7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG5cbiAgICAgICAgZGVzY3JpcHRvci52YWx1ZSA9IG1ldGhvZFdyYXBwZXI7XG4gICAgfVxufVxuIiwidmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSwgcGFjaykge1xuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XG59O1xuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHZhciB2ID0gZmFjdG9yeShyZXF1aXJlLCBleHBvcnRzKTtcbiAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZCkgbW9kdWxlLmV4cG9ydHMgPSB2O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2NvbnN0YW50c1wiLCBcIi4uL2Vycm9yc1wiLCBcIi4vdXRpbHNcIl0sIGZhY3RvcnkpO1xuICAgIH1cbn0pKGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIGV4cG9ydHMuY3JpdGljYWwgPSBleHBvcnRzLmVycm9yID0gZXhwb3J0cy53YXJuID0gZXhwb3J0cy5kZWJ1ZyA9IGV4cG9ydHMuYWxsID0gZXhwb3J0cy5pbmZvID0gZXhwb3J0cy5zZXRMb2dnZXIgPSBleHBvcnRzLmdldExvZ2dlciA9IGV4cG9ydHMuTG9nZ2VySW1wID0gdm9pZCAwO1xuICAgIHZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbiAgICB2YXIgZXJyb3JzXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JzXCIpO1xuICAgIHZhciB1dGlsc18xID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG4gICAgdmFyIExvZ2dlckltcCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIExvZ2dlckltcChkZWZhdWx0TGV2ZWwsIHVzZVRpbWVzdGFtcCwgbG9nTGV2ZWwsIGxvZ1N0YWNrVHJhY2UsIHRpbWVzdGFtcEZvcm1hdCkge1xuICAgICAgICAgICAgaWYgKGRlZmF1bHRMZXZlbCA9PT0gdm9pZCAwKSB7IGRlZmF1bHRMZXZlbCA9IGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuSU5GTzsgfVxuICAgICAgICAgICAgaWYgKHVzZVRpbWVzdGFtcCA9PT0gdm9pZCAwKSB7IHVzZVRpbWVzdGFtcCA9IHRydWU7IH1cbiAgICAgICAgICAgIGlmIChsb2dMZXZlbCA9PT0gdm9pZCAwKSB7IGxvZ0xldmVsID0gdHJ1ZTsgfVxuICAgICAgICAgICAgaWYgKGxvZ1N0YWNrVHJhY2UgPT09IHZvaWQgMCkgeyBsb2dTdGFja1RyYWNlID0gZmFsc2U7IH1cbiAgICAgICAgICAgIGlmICh0aW1lc3RhbXBGb3JtYXQgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXBGb3JtYXQgPSBjb25zdGFudHNfMS5ERUZBVUxUX1RJTUVTVEFNUF9GT1JNQVQ7IH1cbiAgICAgICAgICAgIHRoaXMubGV2ZWwgPSBkZWZhdWx0TGV2ZWw7XG4gICAgICAgICAgICB0aGlzLnVzZVRpbWVzdGFtcCA9IHVzZVRpbWVzdGFtcDtcbiAgICAgICAgICAgIHRoaXMubG9nTGV2ZWwgPSBsb2dMZXZlbDtcbiAgICAgICAgICAgIHRoaXMubG9nU3RhY2tUcmFjZSA9IGxvZ1N0YWNrVHJhY2U7XG4gICAgICAgICAgICB0aGlzLnRpbWVzdGFtcEZvcm1hdCA9IHRpbWVzdGFtcEZvcm1hdDtcbiAgICAgICAgfVxuICAgICAgICBMb2dnZXJJbXAucHJvdG90eXBlLmJ1aWxkTWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlLCBsb2dMZXZlbCwgaXNzdWVyKSB7XG4gICAgICAgICAgICBpZiAoaXNzdWVyID09PSB2b2lkIDApIHsgaXNzdWVyID0gdW5kZWZpbmVkOyB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAzOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHN0YWNrc1RyYWNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIHN0YWNrc1RyYWNlID0gbWVzc2FnZS5zdGFjaztcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZS5tZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubG9nTGV2ZWwpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiW1wiLmNvbmNhdChPYmplY3Qua2V5cyhjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTKVtsb2dMZXZlbF0sIFwiXSAtIFwiKS5jb25jYXQobWVzc2FnZSk7XG4gICAgICAgICAgICBpZiAoaXNzdWVyKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIltcIi5jb25jYXQoaXNzdWVyLnRvU3RyaW5nKCksIFwiXVwiKS5jb25jYXQobWVzc2FnZSk7XG4gICAgICAgICAgICBpZiAodGhpcy51c2VUaW1lc3RhbXApXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiW1wiLmNvbmNhdCgoMCwgdXRpbHNfMS5mb3JtYXREYXRlKShuZXcgRGF0ZSgpLCB0aGlzLnRpbWVzdGFtcEZvcm1hdCksIFwiXVwiKS5jb25jYXQobWVzc2FnZSk7XG4gICAgICAgICAgICByZXR1cm4gdXRpbHNfMS5zdHJpbmdGb3JtYXQuYXBwbHkodm9pZCAwLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlXSwgYXJncywgZmFsc2UpKTtcbiAgICAgICAgfTtcbiAgICAgICAgTG9nZ2VySW1wLnByb3RvdHlwZS5yZXBvcnQgPSBmdW5jdGlvbiAobWVzc2FnZSwgbGV2ZWwpIHtcbiAgICAgICAgICAgIGlmIChsZXZlbCA9PT0gdm9pZCAwKSB7IGxldmVsID0gY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5JTkZPOyB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxldmVsIDwgdGhpcy5sZXZlbClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIGVycm9yc18xLkxvZ2dlZEVycm9yICYmIG1lc3NhZ2UubG9nZ2VkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciByZXBvcnRNZXRob2Q7XG4gICAgICAgICAgICBzd2l0Y2ggKGxldmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLldBUk46XG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydE1ldGhvZCA9IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkVSUk9SOlxuICAgICAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5DUklUSUNBTDpcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0TWV0aG9kID0gY29uc29sZS5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLklORk86XG4gICAgICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkRFQlVHOlxuICAgICAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5BTEw6XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0TWV0aG9kID0gY29uc29sZS5sb2c7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZpbmFsTWVzc2FnZSA9IHRoaXMuYnVpbGRNZXNzYWdlLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIGxldmVsLCB1bmRlZmluZWRdLCBhcmdzLCBmYWxzZSkpO1xuICAgICAgICAgICAgcmVwb3J0TWV0aG9kKGZpbmFsTWVzc2FnZSk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEVycm9yICYmIG1lc3NhZ2Uuc3RhY2sgJiYgdGhpcy5sb2dTdGFja1RyYWNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVwb3J0TWV0aG9kKHRoaXMuYnVpbGRNZXNzYWdlKFwiXFxuLS0gU3RhY2tTdHJhY2U6XFxuXCIuY29uY2F0KG1lc3NhZ2Uuc3RhY2spLCBsZXZlbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBlcnJvcnNfMS5Mb2dnZWRFcnJvcilcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmxvZ2dlZCA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIExvZ2dlckltcC5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXBvcnQuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheShbbWVzc2FnZSwgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5JTkZPXSwgYXJncywgZmFsc2UpKTtcbiAgICAgICAgfTtcbiAgICAgICAgTG9nZ2VySW1wLnByb3RvdHlwZS5hbGwgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVwb3J0LmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuQUxMXSwgYXJncywgZmFsc2UpKTtcbiAgICAgICAgfTtcbiAgICAgICAgTG9nZ2VySW1wLnByb3RvdHlwZS5kZWJ1ZyA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXBvcnQuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheShbbWVzc2FnZSwgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5ERUJVR10sIGFyZ3MsIGZhbHNlKSk7XG4gICAgICAgIH07XG4gICAgICAgIExvZ2dlckltcC5wcm90b3R5cGUud2FybiA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXBvcnQuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheShbbWVzc2FnZSwgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5XQVJOXSwgYXJncywgZmFsc2UpKTtcbiAgICAgICAgfTtcbiAgICAgICAgTG9nZ2VySW1wLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXBvcnQuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheShbbWVzc2FnZSwgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5FUlJPUl0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgICAgIH07XG4gICAgICAgIExvZ2dlckltcC5wcm90b3R5cGUuY3JpdGljYWwgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVwb3J0LmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuQ1JJVElDQUxdLCBhcmdzLCBmYWxzZSkpO1xuICAgICAgICB9O1xuICAgICAgICBMb2dnZXJJbXAucHJvdG90eXBlLnNldExldmVsID0gZnVuY3Rpb24gKGxldmVsKSB7XG4gICAgICAgICAgICB0aGlzLmRlYnVnKCgwLCB1dGlsc18xLnN0cmluZ0Zvcm1hdCkoY29uc3RhbnRzXzEuTE9HR0lOR19NU0cuTEVWRUxfQ0hBTkdFRCwgdGhpcy5sZXZlbC50b1N0cmluZygpLCBsZXZlbC50b1N0cmluZygpKSk7XG4gICAgICAgICAgICB0aGlzLmxldmVsID0gbGV2ZWw7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBMb2dnZXJJbXA7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkxvZ2dlckltcCA9IExvZ2dlckltcDtcbiAgICB2YXIgY3VycmVudExvZ2dlcjtcbiAgICBmdW5jdGlvbiBnZXRMb2dnZXIoKSB7XG4gICAgICAgIGlmICghY3VycmVudExvZ2dlcilcbiAgICAgICAgICAgIGN1cnJlbnRMb2dnZXIgPSBuZXcgTG9nZ2VySW1wKCk7XG4gICAgICAgIHJldHVybiBjdXJyZW50TG9nZ2VyO1xuICAgIH1cbiAgICBleHBvcnRzLmdldExvZ2dlciA9IGdldExvZ2dlcjtcbiAgICBmdW5jdGlvbiBzZXRMb2dnZXIobG9nZ2VyKSB7XG4gICAgICAgIGN1cnJlbnRMb2dnZXIgPSBsb2dnZXI7XG4gICAgICAgIGdldExvZ2dlcigpLmRlYnVnKGNvbnN0YW50c18xLkxPR0dJTkdfTVNHLkxPR0dFUl9DSEFOR0VEKTtcbiAgICB9XG4gICAgZXhwb3J0cy5zZXRMb2dnZXIgPSBzZXRMb2dnZXI7XG4gICAgdmFyIGluZm8gPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoX2EgPSBnZXRMb2dnZXIoKSkuaW5mby5hcHBseShfYSwgX19zcHJlYWRBcnJheShbbWVzc2FnZV0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgfTtcbiAgICBleHBvcnRzLmluZm8gPSBpbmZvO1xuICAgIHZhciBhbGwgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoX2EgPSBnZXRMb2dnZXIoKSkuYWxsLmFwcGx5KF9hLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlXSwgYXJncywgZmFsc2UpKTtcbiAgICB9O1xuICAgIGV4cG9ydHMuYWxsID0gYWxsO1xuICAgIHZhciBkZWJ1ZyA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChfYSA9IGdldExvZ2dlcigpKS5kZWJ1Zy5hcHBseShfYSwgX19zcHJlYWRBcnJheShbbWVzc2FnZV0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgfTtcbiAgICBleHBvcnRzLmRlYnVnID0gZGVidWc7XG4gICAgdmFyIHdhcm4gPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoX2EgPSBnZXRMb2dnZXIoKSkud2Fybi5hcHBseShfYSwgX19zcHJlYWRBcnJheShbbWVzc2FnZV0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgfTtcbiAgICBleHBvcnRzLndhcm4gPSB3YXJuO1xuICAgIHZhciBlcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChfYSA9IGdldExvZ2dlcigpKS5lcnJvci5hcHBseShfYSwgX19zcHJlYWRBcnJheShbbWVzc2FnZV0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgfTtcbiAgICBleHBvcnRzLmVycm9yID0gZXJyb3I7XG4gICAgdmFyIGNyaXRpY2FsID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKF9hID0gZ2V0TG9nZ2VyKCkpLmNyaXRpY2FsLmFwcGx5KF9hLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlXSwgYXJncywgZmFsc2UpKTtcbiAgICB9O1xuICAgIGV4cG9ydHMuY3JpdGljYWwgPSBjcml0aWNhbDtcbn0pOyIsIi8qKlxuICogQG5hbWVzcGFjZSBsb2dnaW5nLmxvZ2dpbmdcbiAqIEBtZW1iZXJPZiBsb2dnaW5nXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9jb25zdGFudHMnO1xuZXhwb3J0ICogZnJvbSAnLi9sb2dnaW5nJztcbmV4cG9ydCAqIGZyb20gJy4vZGVjb3JhdG9ycyc7XG5leHBvcnQgKiBmcm9tICcuL3V0aWxzJzsiLCJpbXBvcnQge0RFRkFVTFRfVElNRVNUQU1QX0ZPUk1BVCwgTE9HR0VSX0xFVkVMUywgTE9HR0lOR19NU0d9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuaW1wb3J0IHtMb2dnZWRFcnJvcn0gZnJvbSBcIi4uL2Vycm9yc1wiO1xuaW1wb3J0IHtmb3JtYXREYXRlLCBzdHJpbmdGb3JtYXR9IGZyb20gXCIuL3V0aWxzXCI7XG5cbi8qKlxuICogQHR5cGVkZWYgTG9nZ2VyTWVzc2FnZVxuICogQG1lbWJlck9mIGxvZ2dpbmcubG9nZ2luZ1xuICovXG5leHBvcnQgdHlwZSBMb2dnZXJNZXNzYWdlID0gRXJyb3IgfCBzdHJpbmc7XG5cbi8qKlxuICogQGludGVyZmFjZSBMb2dnZXJcbiAqIEBtZW1iZXJPZiBsb2dnaW5nLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMb2dnZXIge1xuICAgIC8qKlxuICAgICAqIFJlcG9ydHMgYSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxldmVsXG4gICAgICogQHBhcmFtIHthbnlbXX0gW2FyZ3NdXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgTG9nZ2VyXG4gICAgICovXG4gICAgcmVwb3J0KG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGxldmVsOiBudW1iZXIsIC4uLmFyZ3M6IGFueVtdKTogdm9pZDtcbiAgICAvKipcbiAgICAgKiB7QGxpbmsgTG9nZ2VyI3JlcG9ydH1zIGEgbWVzc2FnZSB1bmRlciB7QGxpbmsgTE9HR0VSX0xFVkVMUy5BTEx9XG4gICAgICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHthbnlbXX0gW2FyZ3NdXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgTG9nZ2VyXG4gICAgICovXG4gICAgYWxsKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKTogdm9pZDtcbiAgICAvKipcbiAgICAgKiB7QGxpbmsgTG9nZ2VyI3JlcG9ydH1zIGEgbWVzc2FnZSB1bmRlciB7QGxpbmsgTE9HR0VSX0xFVkVMUy5JTkZPfVxuICAgICAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICAgICAqXG4gICAgICogQG1lbWJlck9mIExvZ2dlclxuICAgICAqL1xuICAgIGluZm8obWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pOiB2b2lkO1xuICAgIC8qKlxuICAgICAqIHtAbGluayBMb2dnZXIjcmVwb3J0fXMgYSBtZXNzYWdlIHVuZGVyIHtAbGluayBMT0dHRVJfTEVWRUxTLkRFQlVHfVxuICAgICAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICAgICAqXG4gICAgICogQG1lbWJlck9mIExvZ2dlclxuICAgICAqL1xuICAgIGRlYnVnKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKTogdm9pZDtcbiAgICAvKipcbiAgICAgKiB7QGxpbmsgTG9nZ2VyI3JlcG9ydH1zIGEgbWVzc2FnZSB1bmRlciB7QGxpbmsgTE9HR0VSX0xFVkVMUy5XQVJOfVxuICAgICAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICAgICAqXG4gICAgICogQG1lbWJlck9mIExvZ2dlclxuICAgICAqL1xuICAgIHdhcm4obWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pOiB2b2lkO1xuICAgIC8qKlxuICAgICAqIHtAbGluayBMb2dnZXIjcmVwb3J0fXMgYSBtZXNzYWdlIHVuZGVyIHtAbGluayBMT0dHRVJfTEVWRUxTLkVSUk9SfVxuICAgICAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICAgICAqXG4gICAgICogQG1lbWJlck9mIExvZ2dlclxuICAgICAqL1xuICAgIGVycm9yKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKTogdm9pZDtcbiAgICAvKipcbiAgICAgKiB7QGxpbmsgTG9nZ2VyI3JlcG9ydH1zIGEgbWVzc2FnZSB1bmRlciB7QGxpbmsgTE9HR0VSX0xFVkVMUy5DUklUSUNBTH1cbiAgICAgKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBMb2dnZXJcbiAgICAgKi9cbiAgICBjcml0aWNhbChtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG4gICAgLyoqXG4gICAgICogRGVmaW5lcyB0aGUgTG9nZ2VyIGxldmVsXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGV2ZWxcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBhcmdzXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgTG9nZ2VyXG4gICAgICovXG4gICAgc2V0TGV2ZWwobGV2ZWw6IG51bWJlciwgLi4uYXJnczogYW55W10pOiB2b2lkO1xufVxuXG4vKipcbiAqIERlZmF1bHQgTG9nZ2VyIEltcGxlbWVudGF0aW9uXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGRlZmF1bHRMZXZlbCBkZWZhdWx0cyB0byB7QGxpbmsgTE9HR0VSX0xFVkVMUy5JTkZPfVxuICogQHBhcmFtIHtib29sZWFufSB1c2VUaW1lc3RhbXAgZGVmYXVsdHMgdG8gdHJ1ZVxuICogQHBhcmFtIHtib29sZWFufSBsb2dMZXZlbFxuICogQHBhcmFtIHtib29sZWFufSBsb2dTdGFja1RyYWNlXG4gKiBAcGFyYW0ge3N0cmluZ30gdGltZXN0YW1wRm9ybWF0XG4gKlxuICogQGNsYXNzIExvZ2dlckltcFxuICogQGltcGxlbWVudHMgTG9nZ2VyXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2dnZXJJbXAgaW1wbGVtZW50cyBMb2dnZXIge1xuICAgIHByaXZhdGUgbGV2ZWw6IG51bWJlcjtcblxuICAgIHByaXZhdGUgcmVhZG9ubHkgdXNlVGltZXN0YW1wOiBib29sZWFuO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgbG9nTGV2ZWw6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSByZWFkb25seSB0aW1lc3RhbXBGb3JtYXQ6IHN0cmluZztcbiAgICBwcml2YXRlIHJlYWRvbmx5IGxvZ1N0YWNrVHJhY2U6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihkZWZhdWx0TGV2ZWw6IG51bWJlciA9IExPR0dFUl9MRVZFTFMuSU5GTywgdXNlVGltZXN0YW1wID0gdHJ1ZSwgbG9nTGV2ZWw6IGJvb2xlYW4gPSB0cnVlLCBsb2dTdGFja1RyYWNlOiBib29sZWFuID0gZmFsc2UsIHRpbWVzdGFtcEZvcm1hdCA9IERFRkFVTFRfVElNRVNUQU1QX0ZPUk1BVCl7XG4gICAgICAgIHRoaXMubGV2ZWwgPSBkZWZhdWx0TGV2ZWw7XG4gICAgICAgIHRoaXMudXNlVGltZXN0YW1wID0gdXNlVGltZXN0YW1wO1xuICAgICAgICB0aGlzLmxvZ0xldmVsID0gbG9nTGV2ZWw7XG4gICAgICAgIHRoaXMubG9nU3RhY2tUcmFjZSA9IGxvZ1N0YWNrVHJhY2U7XG4gICAgICAgIHRoaXMudGltZXN0YW1wRm9ybWF0ID0gdGltZXN0YW1wRm9ybWF0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJ1aWx0cyB0aGUgYWN0dWFsIGxvZ2dpbmcgbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsb2dMZXZlbCBpZiB0aGUgbGV2ZWwgaXMgdG8gYmUgbG9nZ2VkXG4gICAgICogQHBhcmFtIHthbnl9IGlzc3VlciB3aG8gaXMgbG9nZ2luZyB0aGUgbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGJ1aWxkTWVzc2FnZShtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBsb2dMZXZlbDogbnVtYmVyLCBpc3N1ZXI6IGFueSA9IHVuZGVmaW5lZCwgLi4uYXJnczogYW55W10pe1xuICAgICAgICBsZXQgc3RhY2tzVHJhY2U6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvcil7XG4gICAgICAgICAgICBzdGFja3NUcmFjZSA9IG1lc3NhZ2Uuc3RhY2s7XG4gICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZS5tZXNzYWdlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubG9nTGV2ZWwpXG4gICAgICAgICAgICBtZXNzYWdlID0gYFske09iamVjdC5rZXlzKExPR0dFUl9MRVZFTFMpW2xvZ0xldmVsXX1dIC0gJHttZXNzYWdlfWA7XG4gICAgICAgIGlmIChpc3N1ZXIpXG4gICAgICAgICAgICBtZXNzYWdlID0gYFske2lzc3Vlci50b1N0cmluZygpfV0ke21lc3NhZ2V9YDtcbiAgICAgICAgaWYgKHRoaXMudXNlVGltZXN0YW1wKVxuICAgICAgICAgICAgbWVzc2FnZSA9IGBbJHtmb3JtYXREYXRlKG5ldyBEYXRlKCksIHRoaXMudGltZXN0YW1wRm9ybWF0KX1dJHttZXNzYWdlfWA7XG4gICAgICAgIHJldHVybiBzdHJpbmdGb3JtYXQobWVzc2FnZSwgLi4uYXJncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGV2ZWwgZGVmYXVsdHMgdG8ge0BsaW5rIExPR0dFUl9MRVZFTFMuSU5GT31cbiAgICAgKiBAcGFyYW0ge2FueVtdfSBhcmdzXG4gICAgICovXG4gICAgcmVwb3J0KG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGxldmVsOiBudW1iZXIgPSBMT0dHRVJfTEVWRUxTLklORk8sIC4uLmFyZ3M6IGFueVtdKSA6IHZvaWQge1xuICAgICAgICBpZiAobGV2ZWwgPCB0aGlzLmxldmVsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIExvZ2dlZEVycm9yICYmIG1lc3NhZ2UubG9nZ2VkKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIGxldCByZXBvcnRNZXRob2Q6IEZ1bmN0aW9uO1xuICAgICAgICBzd2l0Y2ggKGxldmVsKXtcbiAgICAgICAgICAgIGNhc2UgTE9HR0VSX0xFVkVMUy5XQVJOOlxuICAgICAgICAgICAgICAgIHJlcG9ydE1ldGhvZCA9IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTE9HR0VSX0xFVkVMUy5FUlJPUjpcbiAgICAgICAgICAgIGNhc2UgTE9HR0VSX0xFVkVMUy5DUklUSUNBTDpcbiAgICAgICAgICAgICAgICByZXBvcnRNZXRob2QgPSBjb25zb2xlLmVycm9yO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBMT0dHRVJfTEVWRUxTLklORk86XG4gICAgICAgICAgICBjYXNlIExPR0dFUl9MRVZFTFMuREVCVUc6XG4gICAgICAgICAgICBjYXNlIExPR0dFUl9MRVZFTFMuQUxMOlxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXBvcnRNZXRob2QgPSBjb25zb2xlLmxvZztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBmaW5hbE1lc3NhZ2UgPSB0aGlzLmJ1aWxkTWVzc2FnZShtZXNzYWdlLCBsZXZlbCwgdW5kZWZpbmVkLCAuLi5hcmdzKTtcbiAgICAgICAgcmVwb3J0TWV0aG9kKGZpbmFsTWVzc2FnZSk7XG5cbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvciAmJiBtZXNzYWdlLnN0YWNrICYmIHRoaXMubG9nU3RhY2tUcmFjZSl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgICAgICAgICAgIHJlcG9ydE1ldGhvZCh0aGlzLmJ1aWxkTWVzc2FnZShgXFxuLS0gU3RhY2tTdHJhY2U6XFxuJHttZXNzYWdlLnN0YWNrfWAsIGxldmVsKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIExvZ2dlZEVycm9yKVxuICAgICAgICAgICAgbWVzc2FnZS5sb2dnZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgaW5mbyhtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlcG9ydChtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLklORk8sIC4uLmFyZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIGFsbChtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlcG9ydChtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLkFMTCwgLi4uYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgZGVidWcobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXBvcnQobWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5ERUJVRywgLi4uYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgd2FybihtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlcG9ydChtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLldBUk4sIC4uLmFyZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIGVycm9yKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVwb3J0KG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuRVJST1IsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIGNyaXRpY2FsKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVwb3J0KG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuQ1JJVElDQUwsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIHNldExldmVsKGxldmVsOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kZWJ1ZyhzdHJpbmdGb3JtYXQoTE9HR0lOR19NU0cuTEVWRUxfQ0hBTkdFRCwgdGhpcy5sZXZlbC50b1N0cmluZygpLCBsZXZlbC50b1N0cmluZygpKSk7XG4gICAgICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcbiAgICB9XG59XG5cbmxldCBjdXJyZW50TG9nZ2VyOiBMb2dnZXI7XG5cbi8qKlxuICogZ2V0cyB0aGUgY3VycmVudCBMb2dnZXJcbiAqXG4gKiBAZnVuY3Rpb24gZ2V0TG9nZ2VyXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMubG9nZ2luZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9nZ2VyKCl7XG4gICAgaWYgKCFjdXJyZW50TG9nZ2VyKVxuICAgICAgICBjdXJyZW50TG9nZ2VyID0gbmV3IExvZ2dlckltcCgpO1xuICAgIHJldHVybiBjdXJyZW50TG9nZ2VyO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGxvZ2dlclxuICpcbiAqIEBwYXJhbSB7TG9nZ2VyfSBsb2dnZXJcbiAqXG4gKiBAZnVuY3Rpb24gc2V0TG9nZ2VyXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMubG9nZ2luZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0TG9nZ2VyKGxvZ2dlcjogTG9nZ2VyKXtcbiAgICBjdXJyZW50TG9nZ2VyID0gbG9nZ2VyO1xuICAgIGdldExvZ2dlcigpLmRlYnVnKExPR0dJTkdfTVNHLkxPR0dFUl9DSEFOR0VEKTtcbn1cblxuLyoqXG4gKiBSZXBvcnRzIGEgbWVzc2FnZSB0byB0aGUgbG9nZ2VyIHVuZGVyIHRoZSBsZXZlbCB7QGxpbmsgTE9HR0VSX0xFVkVMUy5JTkZPfVxuICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gKiBAcGFyYW0ge2FueVtdfSBhcmdzXG4gKlxuICogQGZ1bmN0aW9uIGluZm9cbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBjb25zdCBpbmZvID0gKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKSA9PiBnZXRMb2dnZXIoKS5pbmZvKG1lc3NhZ2UsIC4uLmFyZ3MpO1xuLyoqXG4gKiBSZXBvcnRzIGEgbWVzc2FnZSB0byB0aGUgbG9nZ2VyIHVuZGVyIHRoZSBsZXZlbCB7QGxpbmsgTE9HR0VSX0xFVkVMUy5BTEx9XG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAqXG4gKiBAZnVuY3Rpb24gYWxsXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMubG9nZ2luZ1xuICovXG5leHBvcnQgY29uc3QgYWxsID0gKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKSA9PiBnZXRMb2dnZXIoKS5hbGwobWVzc2FnZSwgLi4uYXJncyk7XG4vKipcbiAqIFJlcG9ydHMgYSBtZXNzYWdlIHRvIHRoZSBsb2dnZXIgdW5kZXIgdGhlIGxldmVsIHtAbGluayBMT0dHRVJfTEVWRUxTLkRFQlVHfVxuICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gKiBAcGFyYW0ge2FueVtdfSBhcmdzXG4gKlxuICogQGZ1bmN0aW9uIGRlYnVnXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMubG9nZ2luZ1xuICovXG5leHBvcnQgY29uc3QgZGVidWcgPSAobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pID0+IGdldExvZ2dlcigpLmRlYnVnKG1lc3NhZ2UsIC4uLmFyZ3MpO1xuLyoqXG4gKiBSZXBvcnRzIGEgbWVzc2FnZSB0byB0aGUgbG9nZ2VyIHVuZGVyIHRoZSBsZXZlbCB7QGxpbmsgTE9HR0VSX0xFVkVMUy5XQVJOfVxuICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gKiBAcGFyYW0ge2FueVtdfSBhcmdzXG4gKlxuICogQGZ1bmN0aW9uIHdhcm5cbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBjb25zdCB3YXJuID0gKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKSA9PiBnZXRMb2dnZXIoKS53YXJuKG1lc3NhZ2UsIC4uLmFyZ3MpO1xuLyoqXG4gKiBSZXBvcnRzIGEgbWVzc2FnZSB0byB0aGUgbG9nZ2VyIHVuZGVyIHRoZSBsZXZlbCB7QGxpbmsgTE9HR0VSX0xFVkVMUy5FUlJPUn1cbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICpcbiAqIEBmdW5jdGlvbiBlcnJvclxuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IGVycm9yID0gKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKSA9PiBnZXRMb2dnZXIoKS5lcnJvcihtZXNzYWdlLCAuLi5hcmdzKTtcbi8qKlxuICogUmVwb3J0cyBhIG1lc3NhZ2UgdG8gdGhlIGxvZ2dlciB1bmRlciB0aGUgbGV2ZWwge0BsaW5rIExPR0dFUl9MRVZFTFMuQ1JJVElDQUx9XG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAqXG4gKiBAZnVuY3Rpb24gY3JpdGljYWxcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBjb25zdCBjcml0aWNhbCA9IChtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSkgPT4gZ2V0TG9nZ2VyKCkuY3JpdGljYWwobWVzc2FnZSwgLi4uYXJncyk7IiwiKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHZhciB2ID0gZmFjdG9yeShyZXF1aXJlLCBleHBvcnRzKTtcbiAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZCkgbW9kdWxlLmV4cG9ydHMgPSB2O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2NvbnN0YW50c1wiXSwgZmFjdG9yeSk7XG4gICAgfVxufSkoZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZXhwb3J0cy50d29EaWdpdFBhZCA9IGV4cG9ydHMuZm9ybWF0RGF0ZSA9IGV4cG9ydHMuc3RyaW5nRm9ybWF0ID0gdm9pZCAwO1xuICAgIHZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbiAgICBmdW5jdGlvbiBzdHJpbmdGb3JtYXQoc3RyaW5nKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgveyhcXGQrKX0vZywgZnVuY3Rpb24gKG1hdGNoLCBudW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgYXJnc1tudW1iZXJdICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgID8gYXJnc1tudW1iZXJdXG4gICAgICAgICAgICAgICAgOiBtYXRjaDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4cG9ydHMuc3RyaW5nRm9ybWF0ID0gc3RyaW5nRm9ybWF0O1xuICAgIGZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZSwgcGF0dGVyblN0cikge1xuICAgICAgICBpZiAocGF0dGVyblN0ciA9PT0gdm9pZCAwKSB7IHBhdHRlcm5TdHIgPSAneXl5eS9NTS9kZCc7IH1cbiAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF0ZSgpLCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSwgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKSwgaG91ciA9IGRhdGUuZ2V0SG91cnMoKSwgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCksIHNlY29uZCA9IGRhdGUuZ2V0U2Vjb25kcygpLCBtaWxpc2Vjb25kcyA9IGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCksIGggPSBob3VyICUgMTIsIGhoID0gdHdvRGlnaXRQYWQoaCksIEhIID0gdHdvRGlnaXRQYWQoaG91ciksIG1tID0gdHdvRGlnaXRQYWQobWludXRlKSwgc3MgPSB0d29EaWdpdFBhZChzZWNvbmQpLCBhYWEgPSBob3VyIDwgMTIgPyAnQU0nIDogJ1BNJywgRUVFRSA9IGNvbnN0YW50c18xLkRBWVNfT0ZfV0VFS19OQU1FU1tkYXRlLmdldERheSgpXSwgRUVFID0gRUVFRS5zdWJzdHIoMCwgMyksIGRkID0gdHdvRGlnaXRQYWQoZGF5KSwgTSA9IG1vbnRoICsgMSwgTU0gPSB0d29EaWdpdFBhZChNKSwgTU1NTSA9IGNvbnN0YW50c18xLk1PTlRIX05BTUVTW21vbnRoXSwgTU1NID0gTU1NTS5zdWJzdHIoMCwgMyksIHl5eXkgPSB5ZWFyICsgXCJcIiwgeXkgPSB5eXl5LnN1YnN0cigyLCAyKTtcbiAgICAgICAgcGF0dGVyblN0ciA9IHBhdHRlcm5TdHJcbiAgICAgICAgICAgIC5yZXBsYWNlKCdoaCcsIGhoKS5yZXBsYWNlKCdoJywgaC50b1N0cmluZygpKVxuICAgICAgICAgICAgLnJlcGxhY2UoJ0hIJywgSEgpLnJlcGxhY2UoJ0gnLCBob3VyLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAucmVwbGFjZSgnbW0nLCBtbSkucmVwbGFjZSgnbScsIG1pbnV0ZS50b1N0cmluZygpKVxuICAgICAgICAgICAgLnJlcGxhY2UoJ3NzJywgc3MpLnJlcGxhY2UoJ3MnLCBzZWNvbmQudG9TdHJpbmcoKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCdTJywgbWlsaXNlY29uZHMudG9TdHJpbmcoKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCdkZCcsIGRkKS5yZXBsYWNlKCdkJywgZGF5LnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAucmVwbGFjZSgnRUVFRScsIEVFRUUpLnJlcGxhY2UoJ0VFRScsIEVFRSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCd5eXl5JywgeXl5eSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCd5eScsIHl5KVxuICAgICAgICAgICAgLnJlcGxhY2UoJ2FhYScsIGFhYSk7XG4gICAgICAgIGlmIChwYXR0ZXJuU3RyLmluZGV4T2YoJ01NTScpID4gLTEpIHtcbiAgICAgICAgICAgIHBhdHRlcm5TdHIgPSBwYXR0ZXJuU3RyXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoJ01NTU0nLCBNTU1NKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKCdNTU0nLCBNTU0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGF0dGVyblN0ciA9IHBhdHRlcm5TdHJcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgnTU0nLCBNTSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgnTScsIE0udG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhdHRlcm5TdHI7XG4gICAgfVxuICAgIGV4cG9ydHMuZm9ybWF0RGF0ZSA9IGZvcm1hdERhdGU7XG4gICAgZnVuY3Rpb24gdHdvRGlnaXRQYWQobnVtKSB7XG4gICAgICAgIHJldHVybiBudW0gPCAxMCA/IFwiMFwiICsgbnVtIDogbnVtLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGV4cG9ydHMudHdvRGlnaXRQYWQgPSB0d29EaWdpdFBhZDtcbn0pOyIsIi8qKlxuICogVXRpbCBmdW5jdGlvbiB0byBwcm92aWRlIHN0cmluZyBmb3JtYXQgZnVuY3Rpb25hbGl0eSBzaW1pbGFyIHRvIEMjJ3Mgc3RyaW5nLmZvcm1hdFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBhcmdzIHJlcGxhY2VtZW50cyBtYWRlIGJ5IG9yZGVyIG9mIGFwcGVhcmFuY2UgKHJlcGxhY2VtZW50MCB3aWwgcmVwbGFjZSB7MH0gYW5kIHNvIG9uKVxuICogQHJldHVybiB7c3RyaW5nfSBmb3JtYXR0ZWQgc3RyaW5nXG4gKlxuICogQGZ1bmN0aW9uIHN0cmluZ0Zvcm1hdFxuICpcbiAqIEBtZW1iZXJPZiBsb2dnaW5nLmxvZ2dpbmdcbiAqL1xuaW1wb3J0IHtEQVlTX09GX1dFRUtfTkFNRVMsIE1PTlRIX05BTUVTfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ0Zvcm1hdChzdHJpbmc6IHN0cmluZywgLi4uYXJnczogc3RyaW5nW10pe1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgveyhcXGQrKX0vZywgZnVuY3Rpb24obWF0Y2gsIG51bWJlcikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGFyZ3NbbnVtYmVyXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgID8gYXJnc1tudW1iZXJdXG4gICAgICAgICAgICA6IG1hdGNoO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIERhdGUgRm9ybWF0IEhhbmRsaW5nXG4gKiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zNTUyNDYxL2hvdy10by1mb3JtYXQtYS1qYXZhc2NyaXB0LWRhdGVcbiAqXG4gKiA8cHJlPlxuICogICAgICBVc2luZyBzaW1pbGFyIGZvcm1hdHRpbmcgYXMgTW9tZW50LmpzLCBDbGFzcyBEYXRlVGltZUZvcm1hdHRlciAoSmF2YSksIGFuZCBDbGFzcyBTaW1wbGVEYXRlRm9ybWF0IChKYXZhKSxcbiAqICAgICAgSSBpbXBsZW1lbnRlZCBhIGNvbXByZWhlbnNpdmUgc29sdXRpb24gZm9ybWF0RGF0ZShkYXRlLCBwYXR0ZXJuU3RyKSB3aGVyZSB0aGUgY29kZSBpcyBlYXN5IHRvIHJlYWQgYW5kIG1vZGlmeS5cbiAqICAgICAgWW91IGNhbiBkaXNwbGF5IGRhdGUsIHRpbWUsIEFNL1BNLCBldGMuXG4gKlxuICogICAgICBEYXRlIGFuZCBUaW1lIFBhdHRlcm5zXG4gKiAgICAgIHl5ID0gMi1kaWdpdCB5ZWFyOyB5eXl5ID0gZnVsbCB5ZWFyXG4gKiAgICAgIE0gPSBkaWdpdCBtb250aDsgTU0gPSAyLWRpZ2l0IG1vbnRoOyBNTU0gPSBzaG9ydCBtb250aCBuYW1lOyBNTU1NID0gZnVsbCBtb250aCBuYW1lXG4gKiAgICAgIEVFRUUgPSBmdWxsIHdlZWtkYXkgbmFtZTsgRUVFID0gc2hvcnQgd2Vla2RheSBuYW1lXG4gKiAgICAgIGQgPSBkaWdpdCBkYXk7IGRkID0gMi1kaWdpdCBkYXlcbiAqICAgICAgaCA9IGhvdXJzIGFtL3BtOyBoaCA9IDItZGlnaXQgaG91cnMgYW0vcG07IEggPSBob3VyczsgSEggPSAyLWRpZ2l0IGhvdXJzXG4gKiAgICAgIG0gPSBtaW51dGVzOyBtbSA9IDItZGlnaXQgbWludXRlczsgYWFhID0gQU0vUE1cbiAqICAgICAgcyA9IHNlY29uZHM7IHNzID0gMi1kaWdpdCBzZWNvbmRzXG4gKiAgICAgIFMgPSBtaWxpc2Vjb25kc1xuICogPC9wcmU+XG4gKlxuICogQHBhcmFtIHtEYXRlfSBkYXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gW3BhdHRlcm5TdHJdIGRlZmF1bHRzIHRvICd5eXl5L01NL2RkJ1xuICogQHJldHVybiB7c3RyaW5nfSB0aGUgZm9ybWF0dGVkIGRhdGVcbiAqXG4gKiBAZnVuY3Rpb24gZm9ybWF0RGF0ZVxuICpcbiAqIEBtZW1iZXJPZiBsb2dnaW5nLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSwgcGF0dGVyblN0cjogc3RyaW5nID0gJ3l5eXkvTU0vZGQnKXtcbiAgICBjb25zdCBkYXk6IG51bWJlciA9IGRhdGUuZ2V0RGF0ZSgpLFxuICAgICAgICBtb250aDogbnVtYmVyID0gZGF0ZS5nZXRNb250aCgpLFxuICAgICAgICB5ZWFyOiBudW1iZXIgPSBkYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICAgIGhvdXI6IG51bWJlciA9IGRhdGUuZ2V0SG91cnMoKSxcbiAgICAgICAgbWludXRlOiBudW1iZXIgPSBkYXRlLmdldE1pbnV0ZXMoKSxcbiAgICAgICAgc2Vjb25kOiBudW1iZXIgPSBkYXRlLmdldFNlY29uZHMoKSxcbiAgICAgICAgbWlsaXNlY29uZHM6IG51bWJlciA9IGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCksXG4gICAgICAgIGg6IG51bWJlciA9IGhvdXIgJSAxMixcbiAgICAgICAgaGg6IHN0cmluZyA9IHR3b0RpZ2l0UGFkKGgpLFxuICAgICAgICBISDogc3RyaW5nID0gdHdvRGlnaXRQYWQoaG91ciksXG4gICAgICAgIG1tOiBzdHJpbmcgPSB0d29EaWdpdFBhZChtaW51dGUpLFxuICAgICAgICBzczogc3RyaW5nID0gdHdvRGlnaXRQYWQoc2Vjb25kKSxcbiAgICAgICAgYWFhOiBzdHJpbmcgPSBob3VyIDwgMTIgPyAnQU0nIDogJ1BNJyxcbiAgICAgICAgRUVFRTogc3RyaW5nID0gREFZU19PRl9XRUVLX05BTUVTW2RhdGUuZ2V0RGF5KCldLFxuICAgICAgICBFRUU6IHN0cmluZyA9IEVFRUUuc3Vic3RyKDAsIDMpLFxuICAgICAgICBkZDogc3RyaW5nID0gdHdvRGlnaXRQYWQoZGF5KSxcbiAgICAgICAgTTogbnVtYmVyID0gbW9udGggKyAxLFxuICAgICAgICBNTTogc3RyaW5nID0gdHdvRGlnaXRQYWQoTSksXG4gICAgICAgIE1NTU06IHN0cmluZyA9IE1PTlRIX05BTUVTW21vbnRoXSxcbiAgICAgICAgTU1NIDogc3RyaW5nPSBNTU1NLnN1YnN0cigwLCAzKSxcbiAgICAgICAgeXl5eTogc3RyaW5nID0geWVhciArIFwiXCIsXG4gICAgICAgIHl5OiBzdHJpbmcgPSB5eXl5LnN1YnN0cigyLCAyKVxuICAgIDtcbiAgICAvLyBjaGVja3MgdG8gc2VlIGlmIG1vbnRoIG5hbWUgd2lsbCBiZSB1c2VkXG4gICAgcGF0dGVyblN0ciA9IHBhdHRlcm5TdHJcbiAgICAgICAgLnJlcGxhY2UoJ2hoJywgaGgpLnJlcGxhY2UoJ2gnLCBoLnRvU3RyaW5nKCkpXG4gICAgICAgIC5yZXBsYWNlKCdISCcsIEhIKS5yZXBsYWNlKCdIJywgaG91ci50b1N0cmluZygpKVxuICAgICAgICAucmVwbGFjZSgnbW0nLCBtbSkucmVwbGFjZSgnbScsIG1pbnV0ZS50b1N0cmluZygpKVxuICAgICAgICAucmVwbGFjZSgnc3MnLCBzcykucmVwbGFjZSgncycsIHNlY29uZC50b1N0cmluZygpKVxuICAgICAgICAucmVwbGFjZSgnUycsIG1pbGlzZWNvbmRzLnRvU3RyaW5nKCkpXG4gICAgICAgIC5yZXBsYWNlKCdkZCcsIGRkKS5yZXBsYWNlKCdkJywgZGF5LnRvU3RyaW5nKCkpXG5cbiAgICAgICAgLnJlcGxhY2UoJ0VFRUUnLCBFRUVFKS5yZXBsYWNlKCdFRUUnLCBFRUUpXG4gICAgICAgIC5yZXBsYWNlKCd5eXl5JywgeXl5eSlcbiAgICAgICAgLnJlcGxhY2UoJ3l5JywgeXkpXG4gICAgICAgIC5yZXBsYWNlKCdhYWEnLCBhYWEpO1xuICAgIGlmIChwYXR0ZXJuU3RyLmluZGV4T2YoJ01NTScpID4gLTEpIHtcbiAgICAgICAgcGF0dGVyblN0ciA9IHBhdHRlcm5TdHJcbiAgICAgICAgICAgIC5yZXBsYWNlKCdNTU1NJywgTU1NTSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCdNTU0nLCBNTU0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcGF0dGVyblN0ciA9IHBhdHRlcm5TdHJcbiAgICAgICAgICAgIC5yZXBsYWNlKCdNTScsIE1NKVxuICAgICAgICAgICAgLnJlcGxhY2UoJ00nLCBNLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICByZXR1cm4gcGF0dGVyblN0cjtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IG51bVxuICpcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqXG4gKiBAZnVuY3Rpb24gdHdvRGlnaXRQYWRcbiAqXG4gKiBAbWVtYmVyT2YgbG9nZ2luZy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0d29EaWdpdFBhZChudW06IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIG51bSA8IDEwID8gXCIwXCIgKyBudW0gOiBudW0udG9TdHJpbmcoKTtcbn0iXX0=
