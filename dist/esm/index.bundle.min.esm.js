"use strict";var __createBinding=Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){e[o=void 0===o?r:o]=t[r]},__exportStar=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||__createBinding(t,e,r)},__extends=(!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","./errors","./logging"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),__exportStar(e("./errors"),t),__exportStar(e("./logging"),t)}),function(){var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__createBinding=(!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","../logging"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CriticalError=t.LoggedError=t.criticalCallback=t.errorCallback=t.warningCallback=t.infoCallback=t.debugCallback=t.allCallback=t.loggedCallback=void 0;var o=e("../logging");function r(e,t,r){r||(r=t,t=o.LOGGER_LEVELS.INFO),(0,o.getLogger)().report(e instanceof Error?e:new i(e),t,this&&"loggedCallback"!==this.name?this:void 0),r(e)}t.loggedCallback=r,t.allCallback=function(e,t){r.call(this,e,o.LOGGER_LEVELS.ALL,t)},t.debugCallback=function(e,t){r.call(this,e,o.LOGGER_LEVELS.DEBUG,t)},t.infoCallback=function(e,t){r.call(this,e,o.LOGGER_LEVELS.INFO,t)},t.warningCallback=function(e,t){r.call(this,e,o.LOGGER_LEVELS.WARN,t)},t.errorCallback=function(e,t){r.call(this,e,o.LOGGER_LEVELS.ERROR,t)},t.criticalCallback=function(e,t){r.call(this,e,o.LOGGER_LEVELS.CRITICAL,t)};n=Error,__extends(a,n);var n,i=a;function a(e,t){void 0===t&&(t=o.LOGGER_LEVELS.ERROR);var r=n.call(this,e instanceof Error?e.message:e)||this;return r.logged=!1,r.logged=e instanceof a&&e.logged,r.logged||(0,o.getLogger)().report(e,t),r}t.LoggedError=i;__extends(l,c=i);var c,e=l;function l(e){return c.call(this,e,o.LOGGER_LEVELS.CRITICAL)||this}t.CriticalError=e}),Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){e[o=void 0===o?r:o]=t[r]}),__exportStar=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||__createBinding(t,e,r)},__spreadArray=(!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","./errors"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),__exportStar(e("./errors"),t)}),function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DAYS_OF_WEEK_NAMES=t.MONTH_NAMES=t.DEFAULT_TIMESTAMP_FORMAT=t.LOGGING_MSG=t.LOGGER_LEVELS=void 0,t.LOGGER_LEVELS={ALL:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,CRITICAL:5},t.LOGGING_MSG={LEVEL_CHANGED:"Logger Level changed from {0} to {1}",LOGGER_CHANGED:"Logger changed"},t.DEFAULT_TIMESTAMP_FORMAT="dd/MM/yyyy HH:mm:ss:S",t.MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"],t.DAYS_OF_WEEK_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}),function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}),__createBinding=(!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","../errors","./logging","./constants"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.logSync=t.logAsync=t.StopWatch=void 0;var s=e("../errors"),p=e("./logging"),r=e("./constants"),u=(o.prototype.start=function(){this.startTime=Date.now()},o.prototype.check=function(){if(!this.startTime)throw new Error("StopWatch didnt start");return Date.now()-this.startTime},o.prototype.stop=function(){var e=this.check();return this.startTime=void 0,e},o);function o(){}t.StopWatch=u,t.logAsync=function(c,l){return void 0===c&&(c=r.LOGGER_LEVELS.DEBUG),l||"boolean"!=typeof c||(l=c,c=r.LOGGER_LEVELS.DEBUG),function(e,a,t){var r=t.value;t.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=e.pop();if(!o||"function"!=typeof o)throw new s.CriticalError("Missing Callback");var n,i=this.name&&"Function"!==this.name?this.name:this.constructor&&this.constructor.name||this;(0,p.getLogger)().report("[{0}] - Entering Method {1} with args: {2}",c,i,a,e.map(function(e){return e.toString()}).join(" | "));l&&(n=new u).start(),r.call.apply(r,__spreadArray(__spreadArray([this.__originalObject||this],e,!1),[function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n&&(0,p.getLogger)().report("[{0}][BENCHMARK] - Leaving Method {1} after {2}ms",c,i,a,n.stop()),e)return(0,p.getLogger)().report("[{0}][ERROR] - Leaving Method {1} with error {2}",c,i,a,e),o(e);(0,p.getLogger)().report("[{0}] - Leaving Method {1} with results: {2}",c,i,a,t?t.map(function(e){return e.toString()}).join(" | "):"void"),o.apply(void 0,__spreadArray([void 0],t,!1))}],!1))}}},t.logSync=function(c,l){return void 0===c&&(c=r.LOGGER_LEVELS.DEBUG),l||"boolean"!=typeof c||(l=c,c=r.LOGGER_LEVELS.DEBUG),function(e,i,t){var a=t.value;t.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r,o=this.name&&"Function"!==this.name?this.name:this.constructor&&this.constructor.name||this,n=((0,p.getLogger)().report("[{0}] - Entering Method {1} with args: {2}",c,o,i,e.map(function(e){return e.toString()}).join(" | ")),void 0);l&&(n=new u).start();try{r=a.call.apply(a,__spreadArray([this.__originalObject||this],e,!1))}catch(e){throw n&&(0,p.getLogger)().report("[{0}][BENCHMARK] - Leaving Method {1} after {2}ms",c,o,i,n.stop()),(0,p.getLogger)().report("[{0}][ERROR] - Leaving Method {1} with error {2}",c,o,i,e),e}return n&&(0,p.getLogger)().report("[{0}][BENCHMARK] - Leaving Method {1} after {2}ms",c,o,i,n.stop()),(0,p.getLogger)().report("[{0}] - Leaving Method {1} with results: {2}",c,o,i,r||"void"),r}}}}),Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){e[o=void 0===o?r:o]=t[r]}),__exportStar=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||__createBinding(t,e,r)},__spreadArray=(!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","./constants","./logging","./decorators","./utils"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),__exportStar(e("./constants"),t),__exportStar(e("./logging"),t),__exportStar(e("./decorators"),t),__exportStar(e("./utils"),t)}),function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))});!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","./constants","../errors","./utils"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.critical=t.error=t.warn=t.debug=t.all=t.info=t.setLogger=t.getLogger=t.LoggerImp=void 0;var r,i=e("./constants"),a=e("../errors"),c=e("./utils"),o=(n.prototype.buildMessage=function(e,t,r){void 0===r&&(r=void 0);for(var o=[],n=3;n<arguments.length;n++)o[n-3]=arguments[n];return e instanceof Error&&(e.stack,e=e.message),this.logLevel&&(e="[".concat(Object.keys(i.LOGGER_LEVELS)[t],"] - ").concat(e)),r&&(e="[".concat(r.toString(),"]").concat(e)),this.useTimestamp&&(e="[".concat((0,c.formatDate)(new Date,this.timestampFormat),"]").concat(e)),c.stringFormat.apply(void 0,__spreadArray([e],o,!1))},n.prototype.report=function(e,t){void 0===t&&(t=i.LOGGER_LEVELS.INFO);for(var r,o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];if(!(t<this.level||e instanceof a.LoggedError&&e.logged)){switch(t){case i.LOGGER_LEVELS.WARN:r=console.warn;break;case i.LOGGER_LEVELS.ERROR:case i.LOGGER_LEVELS.CRITICAL:r=console.error;break;case i.LOGGER_LEVELS.INFO:case i.LOGGER_LEVELS.DEBUG:case i.LOGGER_LEVELS.ALL:default:r=console.log}r(this.buildMessage.apply(this,__spreadArray([e,t,void 0],o,!1))),e instanceof Error&&e.stack&&this.logStackTrace&&(console.log(e),r(this.buildMessage("\n-- StackStrace:\n".concat(e.stack),t))),e instanceof a.LoggedError&&(e.logged=!0)}},n.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.report.apply(this,__spreadArray([e,i.LOGGER_LEVELS.INFO],t,!1))},n.prototype.all=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.report.apply(this,__spreadArray([e,i.LOGGER_LEVELS.ALL],t,!1))},n.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.report.apply(this,__spreadArray([e,i.LOGGER_LEVELS.DEBUG],t,!1))},n.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.report.apply(this,__spreadArray([e,i.LOGGER_LEVELS.WARN],t,!1))},n.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.report.apply(this,__spreadArray([e,i.LOGGER_LEVELS.ERROR],t,!1))},n.prototype.critical=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.report.apply(this,__spreadArray([e,i.LOGGER_LEVELS.CRITICAL],t,!1))},n.prototype.setLevel=function(e){this.debug((0,c.stringFormat)(i.LOGGING_MSG.LEVEL_CHANGED,this.level.toString(),e.toString())),this.level=e},n);function n(e,t,r,o,n){void 0===e&&(e=i.LOGGER_LEVELS.INFO),void 0===t&&(t=!0),void 0===r&&(r=!0),void 0===o&&(o=!1),void 0===n&&(n=i.DEFAULT_TIMESTAMP_FORMAT),this.level=e,this.useTimestamp=t,this.logLevel=r,this.logStackTrace=o,this.timestampFormat=n}function l(){return r=r||new o}t.LoggerImp=o,t.getLogger=l,t.setLogger=function(e){r=e,l().debug(i.LOGGING_MSG.LOGGER_CHANGED)};t.info=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return(t=l()).info.apply(t,__spreadArray([e],r,!1))},t.all=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return(t=l()).all.apply(t,__spreadArray([e],r,!1))},t.debug=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return(t=l()).debug.apply(t,__spreadArray([e],r,!1))},t.warn=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return(t=l()).warn.apply(t,__spreadArray([e],r,!1))},t.error=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return(t=l()).error.apply(t,__spreadArray([e],r,!1))};t.critical=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return(t=l()).critical.apply(t,__spreadArray([e],r,!1))}}),function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd&&define(["require","exports","./constants"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.twoDigitPad=t.formatDate=t.stringFormat=void 0;var G=e("./constants");function O(e){return e<10?"0"+e:e.toString()}t.stringFormat=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return e.replace(/{(\d+)}/g,function(e,t){return void 0!==r[t]?r[t]:e})},t.formatDate=function(e,t){void 0===t&&(t="yyyy/MM/dd");var r=e.getDate(),o=e.getMonth(),n=e.getFullYear(),i=e.getHours(),a=e.getMinutes(),c=e.getSeconds(),p=e.getMilliseconds(),l=i%12,u=O(l),f=O(i),g=O(a),d=O(c),_=i<12?"AM":"PM",E=(e=G.DAYS_OF_WEEK_NAMES[e.getDay()]).substr(0,3),L=O(r),s=o+1,y=O(s),h=(o=G.MONTH_NAMES[o]).substr(0,3),v=(n=n+"").substr(2,2);return t=-1<(t=t.replace("hh",u).replace("h",l.toString()).replace("HH",f).replace("H",i.toString()).replace("mm",g).replace("m",a.toString()).replace("ss",d).replace("s",c.toString()).replace("S",p.toString()).replace("dd",L).replace("d",r.toString()).replace("EEEE",e).replace("EEE",E).replace("yyyy",n).replace("yy",v).replace("aaa",_)).indexOf("MMM")?t.replace("MMMM",o).replace("MMM",h):t.replace("MM",y).replace("M",s.toString())},t.twoDigitPad=O});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiZXJyb3JzL2Vycm9ycy5qcyIsImluZGV4LnRzIiwiZXJyb3JzL2luZGV4LmpzIiwiZXJyb3JzL2Vycm9ycy50cyIsImxvZ2dpbmcvZGVjb3JhdG9ycy5qcyIsImVycm9ycy9pbmRleC50cyIsImxvZ2dpbmcvY29uc3RhbnRzLmpzIiwibG9nZ2luZy9jb25zdGFudHMudHMiLCJsb2dnaW5nL2luZGV4LmpzIiwibG9nZ2luZy9kZWNvcmF0b3JzLnRzIiwibG9nZ2luZy9sb2dnaW5nLmpzIiwibG9nZ2luZy9pbmRleC50cyIsImxvZ2dpbmcvbG9nZ2luZy50cyIsImxvZ2dpbmcvdXRpbHMuanMiLCJsb2dnaW5nL3V0aWxzLnRzIl0sIm5hbWVzIjpbIl9fY3JlYXRlQmluZGluZyIsIk9iamVjdCIsImNyZWF0ZSIsIm8iLCJtIiwiayIsImsyIiwidW5kZWZpbmVkIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiX19leHBvcnRTdGFyIiwiZXhwb3J0cyIsInAiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJfX2V4dGVuZHMiLCJmYWN0b3J5IiwibW9kdWxlIiwicmVxdWlyZSIsImRlZmluZSIsImFtZCIsInZhbHVlIiwiZXh0ZW5kU3RhdGljcyIsImQiLCJiIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsIlR5cGVFcnJvciIsIlN0cmluZyIsIl9fIiwidGhpcyIsImNvbnN0cnVjdG9yIiwiQ3JpdGljYWxFcnJvciIsIkxvZ2dlZEVycm9yIiwiY3JpdGljYWxDYWxsYmFjayIsImVycm9yQ2FsbGJhY2siLCJ3YXJuaW5nQ2FsbGJhY2siLCJpbmZvQ2FsbGJhY2siLCJkZWJ1Z0NhbGxiYWNrIiwiYWxsQ2FsbGJhY2siLCJsb2dnZWRDYWxsYmFjayIsImxvZ2dpbmdfMSIsIm1lc3NhZ2UiLCJsZXZlbCIsImNhbGxiYWNrIiwiTE9HR0VSX0xFVkVMUyIsIklORk8iLCJnZXRMb2dnZXIiLCJyZXBvcnQiLCJFcnJvciIsIm5hbWUiLCJBTEwiLCJERUJVRyIsIldBUk4iLCJFUlJPUiIsIkNSSVRJQ0FMIiwiX3N1cGVyIiwiZXJyb3IiLCJfdGhpcyIsImxvZ2dlZCIsIl9fc3ByZWFkQXJyYXkiLCJEQVlTX09GX1dFRUtfTkFNRVMiLCJNT05USF9OQU1FUyIsIkRFRkFVTFRfVElNRVNUQU1QX0ZPUk1BVCIsIkxPR0dJTkdfTVNHIiwiTEVWRUxfQ0hBTkdFRCIsIkxPR0dFUl9DSEFOR0VEIiwidG8iLCJmcm9tIiwicGFjayIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFyIiwiaSIsImwiLCJzbGljZSIsImNvbmNhdCIsImxvZ1N5bmMiLCJsb2dBc3luYyIsIlN0b3BXYXRjaCIsImVycm9yc18xIiwiY29uc3RhbnRzXzEiLCJzdGFydCIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJjaGVjayIsInN0b3AiLCJyZXN1bHQiLCJiZW5jaG1hcmsiLCJ0YXJnZXQiLCJwcm9wZXJ0eUtleSIsImRlc2NyaXB0b3IiLCJvcmlnaW5hbE1ldGhvZCIsImFyZ3MiLCJfaSIsInBvcCIsInN0b3BXYXRjaCIsIm1hcCIsImEiLCJ0b1N0cmluZyIsImpvaW4iLCJhcHBseSIsIl9fb3JpZ2luYWxPYmplY3QiLCJlcnIiLCJyZXN1bHRzIiwiZSIsImNyaXRpY2FsIiwid2FybiIsImRlYnVnIiwiYWxsIiwiaW5mbyIsInNldExvZ2dlciIsIkxvZ2dlckltcCIsImN1cnJlbnRMb2dnZXIiLCJ1dGlsc18xIiwiYnVpbGRNZXNzYWdlIiwibG9nTGV2ZWwiLCJpc3N1ZXIiLCJzdGFjayIsImtleXMiLCJ1c2VUaW1lc3RhbXAiLCJmb3JtYXREYXRlIiwidGltZXN0YW1wRm9ybWF0Iiwic3RyaW5nRm9ybWF0IiwicmVwb3J0TWV0aG9kIiwiY29uc29sZSIsImxvZyIsImxvZ1N0YWNrVHJhY2UiLCJzZXRMZXZlbCIsImRlZmF1bHRMZXZlbCIsImxvZ2dlciIsIl9hIiwidHdvRGlnaXRQYWQiLCJudW0iLCJzdHJpbmciLCJyZXBsYWNlIiwibWF0Y2giLCJudW1iZXIiLCJkYXRlIiwicGF0dGVyblN0ciIsImRheSIsImdldERhdGUiLCJtb250aCIsImdldE1vbnRoIiwieWVhciIsImdldEZ1bGxZZWFyIiwiaG91ciIsImdldEhvdXJzIiwibWludXRlIiwiZ2V0TWludXRlcyIsInNlY29uZCIsImdldFNlY29uZHMiLCJtaWxpc2Vjb25kcyIsImdldE1pbGxpc2Vjb25kcyIsImgiLCJoaCIsIkhIIiwibW0iLCJzcyIsImFhYSIsIkVFRSIsIkVFRUUiLCJnZXREYXkiLCJzdWJzdHIiLCJkZCIsIk0iLCJNTSIsIk1NTSIsIk1NTU0iLCJ5eSIsInl5eXkiLCJpbmRleE9mIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFJQSxnQkFBcURDLE9BQU9DLE9BQVUsU0FBU0MsRUFBR0MsRUFBR0MsRUFBR0MsUUFDN0VDLElBQVBELElBQWtCQSxFQUFLRCxHQUMzQkosT0FBT08sZUFBZUwsRUFBR0csRUFBSSxDQUFFRyxZQUFZLEVBQU1DLElBQUssV0FBYSxPQUFPTixFQUFFQyxPQUMxRSxTQUFTRixFQUFHQyxFQUFHQyxFQUFHQyxHQUVwQkgsRUFEc0JHLE9BQVhDLElBQVBELEVBQXVCRCxFQUN6QkMsR0FBTUYsRUFBRUMsSUFFVk0sYUFBOEMsU0FBU1AsRUFBR1EsR0FDMUQsSUFBSyxJQUFJQyxLQUFLVCxFQUFhLFlBQU5TLEdBQW9CWixPQUFPYSxVQUFVQyxlQUFlQyxLQUFLSixFQUFTQyxJQUFJYixnQkFBZ0JZLEVBQVNSLEVBQUdTLElDUnZISSxZRFVKLFNBQVdDLEdBQ2UsaUJBQVhDLFFBQWlELGlCQUFuQkEsT0FBT1AsUUFDcENNLEVBQVFFLFFBQVNSLFNBR0YsbUJBQVhTLFFBQXlCQSxPQUFPQyxLQUM1Q0QsT0FBTyxDQUFDLFVBQVcsVUFBVyxXQUFZLGFBQWNILEdBTmhFLENBUUcsU0FBVUUsRUFBU1IsR0FFbEJYLE9BQU9PLGVBQWVJLEVBQVMsYUFBYyxDQUFFVyxPQUFPLElFaEIxRFosYUFBQVMsRUFBQSxZQUFBUixHQUNBRCxhQUFBUyxF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QUssS0FBTyxLQUVqQ2MsR0FBY0MsRUFEQ2pGLEVBQUFwQixtQkFBbUI4RSxFQUFLd0IsV0FDcEJDLE9BQU8sRUFBRyxHQUM3QkMsRUFBYWhDLEVBQVlRLEdBQ3pCeUIsRUFBWXZCLEVBQVEsRUFDcEJ3QixFQUFhbEMsRUFBWWlDLEdBRXpCRSxHQUFjQyxFQURDeEYsRUFBQW5CLFlBQVlpRixJQUNScUIsT0FBTyxFQUFHLEdBRTdCTSxHQUFhQyxFQURFMUIsRUFBTyxJQUNKbUIsT0FBTyxFQUFHLEdBeUJoQyxPQVRJeEIsR0FENkIsR0FaakNBLEVBQWFBLEVBQ1JKLFFBQVEsS0FBTW9CLEdBQUlwQixRQUFRLElBQUttQixFQUFFdkQsWUFDakNvQyxRQUFRLEtBQU1xQixHQUFJckIsUUFBUSxJQUFLVyxFQUFLL0MsWUFDcENvQyxRQUFRLEtBQU1zQixHQUFJdEIsUUFBUSxJQUFLYSxFQUFPakQsWUFDdENvQyxRQUFRLEtBQU11QixHQUFJdkIsUUFBUSxJQUFLZSxFQUFPbkQsWUFDdENvQyxRQUFRLElBQUtpQixFQUFZckQsWUFDekJvQyxRQUFRLEtBQU02QixHQUFJN0IsUUFBUSxJQUFLSyxFQUFJekMsWUFFbkNvQyxRQUFRLE9BQVEwQixHQUFNMUIsUUFBUSxNQUFPeUIsR0FDckN6QixRQUFRLE9BQVFtQyxHQUNoQm5DLFFBQVEsS0FBTWtDLEdBQ2RsQyxRQUFRLE1BQU93QixJQUNMWSxRQUFRLE9BQ05oQyxFQUNSSixRQUFRLE9BQVFpQyxHQUNoQmpDLFFBQVEsTUFBT2dDLEdBR1A1QixFQUNSSixRQUFRLEtBQU0rQixHQUNkL0IsUUFBUSxJQUFLOEIsRUFBRWxFLGFBZTVCM0YsRUFBQTRILFlBQUFBIiwiZmlsZSI6ImluZGV4LmJ1bmRsZS5taW4uZXNtLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX2V4cG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9fZXhwb3J0U3RhcikgfHwgZnVuY3Rpb24obSwgZXhwb3J0cykge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZXhwb3J0cywgcCkpIF9fY3JlYXRlQmluZGluZyhleHBvcnRzLCBtLCBwKTtcbn07XG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgdmFyIHYgPSBmYWN0b3J5KHJlcXVpcmUsIGV4cG9ydHMpO1xuICAgICAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSBtb2R1bGUuZXhwb3J0cyA9IHY7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vZXJyb3JzXCIsIFwiLi9sb2dnaW5nXCJdLCBmYWN0b3J5KTtcbiAgICB9XG59KShmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZXJyb3JzXCIpLCBleHBvcnRzKTtcbiAgICBfX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vbG9nZ2luZ1wiKSwgZXhwb3J0cyk7XG59KTsiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHZhciB2ID0gZmFjdG9yeShyZXF1aXJlLCBleHBvcnRzKTtcbiAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZCkgbW9kdWxlLmV4cG9ydHMgPSB2O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi9sb2dnaW5nXCJdLCBmYWN0b3J5KTtcbiAgICB9XG59KShmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBleHBvcnRzLkNyaXRpY2FsRXJyb3IgPSBleHBvcnRzLkxvZ2dlZEVycm9yID0gZXhwb3J0cy5jcml0aWNhbENhbGxiYWNrID0gZXhwb3J0cy5lcnJvckNhbGxiYWNrID0gZXhwb3J0cy53YXJuaW5nQ2FsbGJhY2sgPSBleHBvcnRzLmluZm9DYWxsYmFjayA9IGV4cG9ydHMuZGVidWdDYWxsYmFjayA9IGV4cG9ydHMuYWxsQ2FsbGJhY2sgPSBleHBvcnRzLmxvZ2dlZENhbGxiYWNrID0gdm9pZCAwO1xuICAgIHZhciBsb2dnaW5nXzEgPSByZXF1aXJlKFwiLi4vbG9nZ2luZ1wiKTtcbiAgICBmdW5jdGlvbiBsb2dnZWRDYWxsYmFjayhtZXNzYWdlLCBsZXZlbCwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBsZXZlbDtcbiAgICAgICAgICAgIGxldmVsID0gbG9nZ2luZ18xLkxPR0dFUl9MRVZFTFMuSU5GTztcbiAgICAgICAgfVxuICAgICAgICAoMCwgbG9nZ2luZ18xLmdldExvZ2dlcikoKS5yZXBvcnQobWVzc2FnZSBpbnN0YW5jZW9mIEVycm9yID8gbWVzc2FnZSA6IG5ldyBMb2dnZWRFcnJvcihtZXNzYWdlKSwgbGV2ZWwsIHRoaXMgJiYgdGhpcy5uYW1lICE9PSBcImxvZ2dlZENhbGxiYWNrXCIgPyB0aGlzIDogdW5kZWZpbmVkKTtcbiAgICAgICAgY2FsbGJhY2sobWVzc2FnZSk7XG4gICAgfVxuICAgIGV4cG9ydHMubG9nZ2VkQ2FsbGJhY2sgPSBsb2dnZWRDYWxsYmFjaztcbiAgICBmdW5jdGlvbiBhbGxDYWxsYmFjayhtZXNzYWdlLCBjYWxsYmFjaykge1xuICAgICAgICBsb2dnZWRDYWxsYmFjay5jYWxsKHRoaXMsIG1lc3NhZ2UsIGxvZ2dpbmdfMS5MT0dHRVJfTEVWRUxTLkFMTCwgY2FsbGJhY2spO1xuICAgIH1cbiAgICBleHBvcnRzLmFsbENhbGxiYWNrID0gYWxsQ2FsbGJhY2s7XG4gICAgZnVuY3Rpb24gZGVidWdDYWxsYmFjayhtZXNzYWdlLCBjYWxsYmFjaykge1xuICAgICAgICBsb2dnZWRDYWxsYmFjay5jYWxsKHRoaXMsIG1lc3NhZ2UsIGxvZ2dpbmdfMS5MT0dHRVJfTEVWRUxTLkRFQlVHLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGV4cG9ydHMuZGVidWdDYWxsYmFjayA9IGRlYnVnQ2FsbGJhY2s7XG4gICAgZnVuY3Rpb24gaW5mb0NhbGxiYWNrKG1lc3NhZ2UsIGNhbGxiYWNrKSB7XG4gICAgICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwodGhpcywgbWVzc2FnZSwgbG9nZ2luZ18xLkxPR0dFUl9MRVZFTFMuSU5GTywgY2FsbGJhY2spO1xuICAgIH1cbiAgICBleHBvcnRzLmluZm9DYWxsYmFjayA9IGluZm9DYWxsYmFjaztcbiAgICBmdW5jdGlvbiB3YXJuaW5nQ2FsbGJhY2sobWVzc2FnZSwgY2FsbGJhY2spIHtcbiAgICAgICAgbG9nZ2VkQ2FsbGJhY2suY2FsbCh0aGlzLCBtZXNzYWdlLCBsb2dnaW5nXzEuTE9HR0VSX0xFVkVMUy5XQVJOLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGV4cG9ydHMud2FybmluZ0NhbGxiYWNrID0gd2FybmluZ0NhbGxiYWNrO1xuICAgIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2sobWVzc2FnZSwgY2FsbGJhY2spIHtcbiAgICAgICAgbG9nZ2VkQ2FsbGJhY2suY2FsbCh0aGlzLCBtZXNzYWdlLCBsb2dnaW5nXzEuTE9HR0VSX0xFVkVMUy5FUlJPUiwgY2FsbGJhY2spO1xuICAgIH1cbiAgICBleHBvcnRzLmVycm9yQ2FsbGJhY2sgPSBlcnJvckNhbGxiYWNrO1xuICAgIGZ1bmN0aW9uIGNyaXRpY2FsQ2FsbGJhY2sobWVzc2FnZSwgY2FsbGJhY2spIHtcbiAgICAgICAgbG9nZ2VkQ2FsbGJhY2suY2FsbCh0aGlzLCBtZXNzYWdlLCBsb2dnaW5nXzEuTE9HR0VSX0xFVkVMUy5DUklUSUNBTCwgY2FsbGJhY2spO1xuICAgIH1cbiAgICBleHBvcnRzLmNyaXRpY2FsQ2FsbGJhY2sgPSBjcml0aWNhbENhbGxiYWNrO1xuICAgIHZhciBMb2dnZWRFcnJvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhMb2dnZWRFcnJvciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gTG9nZ2VkRXJyb3IoZXJyb3IsIGxldmVsKSB7XG4gICAgICAgICAgICBpZiAobGV2ZWwgPT09IHZvaWQgMCkgeyBsZXZlbCA9IGxvZ2dpbmdfMS5MT0dHRVJfTEVWRUxTLkVSUk9SOyB9XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IGVycm9yKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMubG9nZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5sb2dnZWQgPSBlcnJvciBpbnN0YW5jZW9mIExvZ2dlZEVycm9yICYmIGVycm9yLmxvZ2dlZDtcbiAgICAgICAgICAgIGlmICghX3RoaXMubG9nZ2VkKVxuICAgICAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChlcnJvciwgbGV2ZWwpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBMb2dnZWRFcnJvcjtcbiAgICB9KEVycm9yKSk7XG4gICAgZXhwb3J0cy5Mb2dnZWRFcnJvciA9IExvZ2dlZEVycm9yO1xuICAgIHZhciBDcml0aWNhbEVycm9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKENyaXRpY2FsRXJyb3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIENyaXRpY2FsRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBlcnJvciwgbG9nZ2luZ18xLkxPR0dFUl9MRVZFTFMuQ1JJVElDQUwpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENyaXRpY2FsRXJyb3I7XG4gICAgfShMb2dnZWRFcnJvcikpO1xuICAgIGV4cG9ydHMuQ3JpdGljYWxFcnJvciA9IENyaXRpY2FsRXJyb3I7XG59KTsiLCIvKipcbiAqIEBtb2R1bGUgbG9nZ2luZ1xuICovXG5cbmV4cG9ydCAqIGZyb20gJy4vZXJyb3JzJztcbmV4cG9ydCAqIGZyb20gJy4vbG9nZ2luZyc7IiwidmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX2V4cG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9fZXhwb3J0U3RhcikgfHwgZnVuY3Rpb24obSwgZXhwb3J0cykge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZXhwb3J0cywgcCkpIF9fY3JlYXRlQmluZGluZyhleHBvcnRzLCBtLCBwKTtcbn07XG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgdmFyIHYgPSBmYWN0b3J5KHJlcXVpcmUsIGV4cG9ydHMpO1xuICAgICAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSBtb2R1bGUuZXhwb3J0cyA9IHY7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vZXJyb3JzXCJdLCBmYWN0b3J5KTtcbiAgICB9XG59KShmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZXJyb3JzXCIpLCBleHBvcnRzKTtcbn0pOyIsImltcG9ydCB7Q2FsbGJhY2ssIGdldExvZ2dlciwgTE9HR0VSX0xFVkVMUywgTG9nZ2VyTWVzc2FnZX0gZnJvbSBcIi4uL2xvZ2dpbmdcIjtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7bnVtYmVyfSBsZXZlbFxuICogQHBhcmFtIHtDYWxsYmFja30gY2FsbGJhY2tcbiAqXG4gKiBAZnVuY3Rpb24gbG9nZ2VkQ2FsbGJhY2tcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5lcnJvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvZ2dlZENhbGxiYWNrKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgbGV2ZWw6IG51bWJlciB8IENhbGxiYWNrLCBjYWxsYmFjazogQ2FsbGJhY2spe1xuICAgIGlmICghY2FsbGJhY2spe1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNhbGxiYWNrID0gbGV2ZWw7XG4gICAgICAgIGxldmVsID0gTE9HR0VSX0xFVkVMUy5JTkZPO1xuICAgIH1cblxuICAgIGdldExvZ2dlcigpLnJlcG9ydChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IgPyBtZXNzYWdlIDogbmV3IExvZ2dlZEVycm9yKG1lc3NhZ2UpLCBsZXZlbCBhcyBudW1iZXIsdGhpcyAmJiB0aGlzLm5hbWUgIT09IFwibG9nZ2VkQ2FsbGJhY2tcIiA/IHRoaXMgOiB1bmRlZmluZWQpO1xuICAgIGNhbGxiYWNrKG1lc3NhZ2UpO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKlxuICogQGZ1bmN0aW9uIGFsbENhbGxiYWNrXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMuZXJyb3JzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhbGxDYWxsYmFjayh0aGlzOiBhbnksIG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIGNhbGxiYWNrOiBDYWxsYmFjayl7XG4gICAgbG9nZ2VkQ2FsbGJhY2suY2FsbCh0aGlzLCBtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLkFMTCwgY2FsbGJhY2spO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKlxuICogQGZ1bmN0aW9uIGRlYnVnQ2FsbGJhY2tcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5lcnJvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlYnVnQ2FsbGJhY2sodGhpczogYW55LCBtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBjYWxsYmFjazogQ2FsbGJhY2spe1xuICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwodGhpcywgbWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5ERUJVRywgY2FsbGJhY2spO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKlxuICogQGZ1bmN0aW9uIGluZm9DYWxsYmFja1xuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmVycm9yc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mb0NhbGxiYWNrKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgY2FsbGJhY2s6IENhbGxiYWNrKXtcbiAgICBsb2dnZWRDYWxsYmFjay5jYWxsKHRoaXMsIG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuSU5GTywgY2FsbGJhY2spO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKlxuICogQGZ1bmN0aW9uIHdhcm5pbmdDYWxsYmFja1xuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmVycm9yc1xuICovXG5leHBvcnQgZnVuY3Rpb24gd2FybmluZ0NhbGxiYWNrKHRoaXM6IGFueSwgbWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgY2FsbGJhY2s6IENhbGxiYWNrKXtcbiAgICBsb2dnZWRDYWxsYmFjay5jYWxsKHRoaXMsIG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuV0FSTiwgY2FsbGJhY2spO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKlxuICogQGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2tcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5lcnJvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2sodGhpczogYW55LCBtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBjYWxsYmFjazogQ2FsbGJhY2spe1xuICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwodGhpcywgbWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5FUlJPUiwgY2FsbGJhY2spO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxiYWNrXG4gKlxuICogQGZ1bmN0aW9uIGNyaXRpY2FsQ2FsbGJhY2tcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5lcnJvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyaXRpY2FsQ2FsbGJhY2sodGhpczogYW55LCBtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBjYWxsYmFjazogQ2FsbGJhY2spe1xuICAgIGxvZ2dlZENhbGxiYWNrLmNhbGwodGhpcywgbWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5DUklUSUNBTCwgY2FsbGJhY2spO1xufVxuXG4vKipcbiAqIFdyYXBwZXIgQ2xhc3MgZm9yIExvZ2dlZCBFcnJvcnNcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IGVycm9yXG4gKiBAcGFyYW0ge251bWJlcn0gbGV2ZWwgZGVmYXVsdHMgdG8ge0BsaW5rIExPR0dFUl9MRVZFTFMuRVJST1J9XG4gKlxuICogQGNsYXNzIExvZ2dlZEVycm9yXG4gKiBAZXh0ZW5kcyBFcnJvclxuICpcbiAqL1xuZXhwb3J0IGNsYXNzIExvZ2dlZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIC8qKlxuICAgICAqIEBwcm9wZXJ0eSBsb2dnZWRcbiAgICAgKi9cbiAgICBsb2dnZWQgPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKGVycm9yOiBMb2dnZXJNZXNzYWdlLCBsZXZlbDogbnVtYmVyID0gTE9HR0VSX0xFVkVMUy5FUlJPUikge1xuICAgICAgICBzdXBlcihlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IGVycm9yKTtcbiAgICAgICAgdGhpcy5sb2dnZWQgPSBlcnJvciBpbnN0YW5jZW9mIExvZ2dlZEVycm9yICYmIGVycm9yLmxvZ2dlZDtcbiAgICAgICAgaWYgKCF0aGlzLmxvZ2dlZClcbiAgICAgICAgICAgIGdldExvZ2dlcigpLnJlcG9ydChlcnJvciwgbGV2ZWwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBXcmFwcGVyIENsYXNzIGZvciBDcml0aWNhbCBFcnJvcnNcbiAqXG4gKiBAY2xhc3MgQ3JpdGljYWxFcnJvclxuICogQGV4dGVuZHMgTG9nZ2VkRXJyb3JcbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBDcml0aWNhbEVycm9yIGV4dGVuZHMgTG9nZ2VkRXJyb3J7XG4gICAgY29uc3RydWN0b3IoZXJyb3I6IExvZ2dlck1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIoZXJyb3IsIExPR0dFUl9MRVZFTFMuQ1JJVElDQUwpO1xuICAgIH1cbn0iLCJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgdmFyIHYgPSBmYWN0b3J5KHJlcXVpcmUsIGV4cG9ydHMpO1xuICAgICAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSBtb2R1bGUuZXhwb3J0cyA9IHY7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL2Vycm9yc1wiLCBcIi4vbG9nZ2luZ1wiLCBcIi4vY29uc3RhbnRzXCJdLCBmYWN0b3J5KTtcbiAgICB9XG59KShmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBleHBvcnRzLmxvZ1N5bmMgPSBleHBvcnRzLmxvZ0FzeW5jID0gZXhwb3J0cy5TdG9wV2F0Y2ggPSB2b2lkIDA7XG4gICAgdmFyIGVycm9yc18xID0gcmVxdWlyZShcIi4uL2Vycm9yc1wiKTtcbiAgICB2YXIgbG9nZ2luZ18xID0gcmVxdWlyZShcIi4vbG9nZ2luZ1wiKTtcbiAgICB2YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG4gICAgdmFyIFN0b3BXYXRjaCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFN0b3BXYXRjaCgpIHtcbiAgICAgICAgfVxuICAgICAgICBTdG9wV2F0Y2gucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICB9O1xuICAgICAgICBTdG9wV2F0Y2gucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXJ0VGltZSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0b3BXYXRjaCBkaWRudCBzdGFydCcpO1xuICAgICAgICAgICAgcmV0dXJuIERhdGUubm93KCkgLSB0aGlzLnN0YXJ0VGltZTtcbiAgICAgICAgfTtcbiAgICAgICAgU3RvcFdhdGNoLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuY2hlY2soKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFN0b3BXYXRjaDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU3RvcFdhdGNoID0gU3RvcFdhdGNoO1xuICAgIGZ1bmN0aW9uIGxvZ0FzeW5jKGxldmVsLCBiZW5jaG1hcmspIHtcbiAgICAgICAgaWYgKGxldmVsID09PSB2b2lkIDApIHsgbGV2ZWwgPSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkRFQlVHOyB9XG4gICAgICAgIGlmICghYmVuY2htYXJrICYmIHR5cGVvZiBsZXZlbCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICBiZW5jaG1hcmsgPSBsZXZlbDtcbiAgICAgICAgICAgIGxldmVsID0gY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5ERUJVRztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXksIGRlc2NyaXB0b3IpIHtcbiAgICAgICAgICAgIHZhciBvcmlnaW5hbE1ldGhvZCA9IGRlc2NyaXB0b3IudmFsdWU7XG4gICAgICAgICAgICB2YXIgbWV0aG9kV3JhcHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gYXJncy5wb3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yc18xLkNyaXRpY2FsRXJyb3IoXCJNaXNzaW5nIENhbGxiYWNrXCIpO1xuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gdGhpcy5uYW1lICYmIHRoaXMubmFtZSAhPT0gJ0Z1bmN0aW9uJyA/IHRoaXMubmFtZSA6IHRoaXMuY29uc3RydWN0b3IgJiYgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lIHx8IHRoaXM7XG4gICAgICAgICAgICAgICAgKDAsIGxvZ2dpbmdfMS5nZXRMb2dnZXIpKCkucmVwb3J0KFwiW3swfV0gLSBFbnRlcmluZyBNZXRob2QgezF9IHdpdGggYXJnczogezJ9XCIsIGxldmVsLCBuYW1lLCBwcm9wZXJ0eUtleSwgYXJncy5tYXAoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGEudG9TdHJpbmcoKTsgfSkuam9pbignIHwgJykpO1xuICAgICAgICAgICAgICAgIHZhciBzdG9wV2F0Y2g7XG4gICAgICAgICAgICAgICAgdmFyIGNiID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcFdhdGNoKVxuICAgICAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ2dpbmdfMS5nZXRMb2dnZXIpKCkucmVwb3J0KFwiW3swfV1bQkVOQ0hNQVJLXSAtIExlYXZpbmcgTWV0aG9kIHsxfSBhZnRlciB7Mn1tc1wiLCBsZXZlbCwgbmFtZSwgcHJvcGVydHlLZXksIHN0b3BXYXRjaC5zdG9wKCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoMCwgbG9nZ2luZ18xLmdldExvZ2dlcikoKS5yZXBvcnQoXCJbezB9XVtFUlJPUl0gLSBMZWF2aW5nIE1ldGhvZCB7MX0gd2l0aCBlcnJvciB7Mn1cIiwgbGV2ZWwsIG5hbWUsIHByb3BlcnR5S2V5LCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ2dpbmdfMS5nZXRMb2dnZXIpKCkucmVwb3J0KFwiW3swfV0gLSBMZWF2aW5nIE1ldGhvZCB7MX0gd2l0aCByZXN1bHRzOiB7Mn1cIiwgbGV2ZWwsIG5hbWUsIHByb3BlcnR5S2V5LCByZXN1bHRzID8gcmVzdWx0cy5tYXAoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGEudG9TdHJpbmcoKTsgfSkuam9pbignIHwgJykgOiBcInZvaWRcIik7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbdW5kZWZpbmVkXSwgcmVzdWx0cywgZmFsc2UpKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChiZW5jaG1hcmspIHtcbiAgICAgICAgICAgICAgICAgICAgc3RvcFdhdGNoID0gbmV3IFN0b3BXYXRjaCgpO1xuICAgICAgICAgICAgICAgICAgICBzdG9wV2F0Y2guc3RhcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxNZXRob2QuY2FsbC5hcHBseShvcmlnaW5hbE1ldGhvZCwgX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFt0aGlzLl9fb3JpZ2luYWxPYmplY3QgfHwgdGhpc10sIGFyZ3MsIGZhbHNlKSwgW2NiXSwgZmFsc2UpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkZXNjcmlwdG9yLnZhbHVlID0gbWV0aG9kV3JhcHBlcjtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZXhwb3J0cy5sb2dBc3luYyA9IGxvZ0FzeW5jO1xuICAgIGZ1bmN0aW9uIGxvZ1N5bmMobGV2ZWwsIGJlbmNobWFyaykge1xuICAgICAgICBpZiAobGV2ZWwgPT09IHZvaWQgMCkgeyBsZXZlbCA9IGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuREVCVUc7IH1cbiAgICAgICAgaWYgKCFiZW5jaG1hcmsgJiYgdHlwZW9mIGxldmVsID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIGJlbmNobWFyayA9IGxldmVsO1xuICAgICAgICAgICAgbGV2ZWwgPSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkRFQlVHO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSwgZGVzY3JpcHRvcikge1xuICAgICAgICAgICAgdmFyIG9yaWdpbmFsTWV0aG9kID0gZGVzY3JpcHRvci52YWx1ZTtcbiAgICAgICAgICAgIHZhciBtZXRob2RXcmFwcGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHRoaXMubmFtZSAmJiB0aGlzLm5hbWUgIT09ICdGdW5jdGlvbicgPyB0aGlzLm5hbWUgOiB0aGlzLmNvbnN0cnVjdG9yICYmIHRoaXMuY29uc3RydWN0b3IubmFtZSB8fCB0aGlzO1xuICAgICAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChcIlt7MH1dIC0gRW50ZXJpbmcgTWV0aG9kIHsxfSB3aXRoIGFyZ3M6IHsyfVwiLCBsZXZlbCwgbmFtZSwgcHJvcGVydHlLZXksIGFyZ3MubWFwKGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLnRvU3RyaW5nKCk7IH0pLmpvaW4oJyB8ICcpKTtcbiAgICAgICAgICAgICAgICB2YXIgc3RvcFdhdGNoID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKGJlbmNobWFyaykge1xuICAgICAgICAgICAgICAgICAgICBzdG9wV2F0Y2ggPSBuZXcgU3RvcFdhdGNoKCk7XG4gICAgICAgICAgICAgICAgICAgIHN0b3BXYXRjaC5zdGFydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBvcmlnaW5hbE1ldGhvZC5jYWxsLmFwcGx5KG9yaWdpbmFsTWV0aG9kLCBfX3NwcmVhZEFycmF5KFt0aGlzLl9fb3JpZ2luYWxPYmplY3QgfHwgdGhpc10sIGFyZ3MsIGZhbHNlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdG9wV2F0Y2gpXG4gICAgICAgICAgICAgICAgICAgICAgICAoMCwgbG9nZ2luZ18xLmdldExvZ2dlcikoKS5yZXBvcnQoXCJbezB9XVtCRU5DSE1BUktdIC0gTGVhdmluZyBNZXRob2QgezF9IGFmdGVyIHsyfW1zXCIsIGxldmVsLCBuYW1lLCBwcm9wZXJ0eUtleSwgc3RvcFdhdGNoLnN0b3AoKSk7XG4gICAgICAgICAgICAgICAgICAgICgwLCBsb2dnaW5nXzEuZ2V0TG9nZ2VyKSgpLnJlcG9ydChcIlt7MH1dW0VSUk9SXSAtIExlYXZpbmcgTWV0aG9kIHsxfSB3aXRoIGVycm9yIHsyfVwiLCBsZXZlbCwgbmFtZSwgcHJvcGVydHlLZXksIGUpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc3RvcFdhdGNoKVxuICAgICAgICAgICAgICAgICAgICAoMCwgbG9nZ2luZ18xLmdldExvZ2dlcikoKS5yZXBvcnQoXCJbezB9XVtCRU5DSE1BUktdIC0gTGVhdmluZyBNZXRob2QgezF9IGFmdGVyIHsyfW1zXCIsIGxldmVsLCBuYW1lLCBwcm9wZXJ0eUtleSwgc3RvcFdhdGNoLnN0b3AoKSk7XG4gICAgICAgICAgICAgICAgKDAsIGxvZ2dpbmdfMS5nZXRMb2dnZXIpKCkucmVwb3J0KFwiW3swfV0gLSBMZWF2aW5nIE1ldGhvZCB7MX0gd2l0aCByZXN1bHRzOiB7Mn1cIiwgbGV2ZWwsIG5hbWUsIHByb3BlcnR5S2V5LCByZXN1bHQgPyByZXN1bHQgOiBcInZvaWRcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkZXNjcmlwdG9yLnZhbHVlID0gbWV0aG9kV3JhcHBlcjtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZXhwb3J0cy5sb2dTeW5jID0gbG9nU3luYztcbn0pOyIsIi8qKlxuICogQG5hbWVzcGFjZSBkYi1kZWNvcmF0b3JzLmVycm9yc1xuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnNcbiAqL1xuXG5leHBvcnQgKiBmcm9tICcuL2Vycm9ycyc7IiwiKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHZhciB2ID0gZmFjdG9yeShyZXF1aXJlLCBleHBvcnRzKTtcbiAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZCkgbW9kdWxlLmV4cG9ydHMgPSB2O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIl0sIGZhY3RvcnkpO1xuICAgIH1cbn0pKGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIGV4cG9ydHMuREFZU19PRl9XRUVLX05BTUVTID0gZXhwb3J0cy5NT05USF9OQU1FUyA9IGV4cG9ydHMuREVGQVVMVF9USU1FU1RBTVBfRk9STUFUID0gZXhwb3J0cy5MT0dHSU5HX01TRyA9IGV4cG9ydHMuTE9HR0VSX0xFVkVMUyA9IHZvaWQgMDtcbiAgICBleHBvcnRzLkxPR0dFUl9MRVZFTFMgPSB7XG4gICAgICAgIEFMTDogMCxcbiAgICAgICAgREVCVUc6IDEsXG4gICAgICAgIElORk86IDIsXG4gICAgICAgIFdBUk46IDMsXG4gICAgICAgIEVSUk9SOiA0LFxuICAgICAgICBDUklUSUNBTDogNVxuICAgIH07XG4gICAgZXhwb3J0cy5MT0dHSU5HX01TRyA9IHtcbiAgICAgICAgTEVWRUxfQ0hBTkdFRDogXCJMb2dnZXIgTGV2ZWwgY2hhbmdlZCBmcm9tIHswfSB0byB7MX1cIixcbiAgICAgICAgTE9HR0VSX0NIQU5HRUQ6IFwiTG9nZ2VyIGNoYW5nZWRcIlxuICAgIH07XG4gICAgZXhwb3J0cy5ERUZBVUxUX1RJTUVTVEFNUF9GT1JNQVQgPSBcImRkL01NL3l5eXkgSEg6bW06c3M6U1wiO1xuICAgIGV4cG9ydHMuTU9OVEhfTkFNRVMgPSBbXG4gICAgICAgIFwiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCIsXG4gICAgICAgIFwiQXVndXN0XCIsIFwiU2VwdGVtYmVyXCIsIFwiT2N0b2JlclwiLCBcIk5vdmVtYmVyXCIsIFwiRGVjZW1iZXJcIlxuICAgIF07XG4gICAgZXhwb3J0cy5EQVlTX09GX1dFRUtfTkFNRVMgPSBbXG4gICAgICAgIFwiU3VuZGF5XCIsIFwiTW9uZGF5XCIsIFwiVHVlc2RheVwiLFxuICAgICAgICBcIldlZG5lc2RheVwiLCBcIlRodXJzZGF5XCIsIFwiRnJpZGF5XCIsIFwiU2F0dXJkYXlcIlxuICAgIF07XG59KTsiLCIvKipcbiAqIEBlbnVtIExPR0dFUl9MRVZFTFNcbiAqXG4gKiBAY2F0ZWdvcnkgQ29uc3RhbnRzXG4gKi9cbmV4cG9ydCBjb25zdCBMT0dHRVJfTEVWRUxTID0ge1xuICAgIEFMTDogMCxcbiAgICBERUJVRzogMSxcbiAgICBJTkZPOiAyLFxuICAgIFdBUk46IDMsXG4gICAgRVJST1I6IDQsXG4gICAgQ1JJVElDQUw6IDVcbn1cblxuLyoqXG4gKiBEZWZhdWx0IG1lc3NhZ2VzXG4gKlxuICogY29uc3RhbnQgTE9HR0lOR19NU0dcbiAqXG4gKiBAbWVtYmVyT2YgbG9nZ2luZy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBjb25zdCBMT0dHSU5HX01TRyA9IHtcbiAgICBMRVZFTF9DSEFOR0VEOiBcIkxvZ2dlciBMZXZlbCBjaGFuZ2VkIGZyb20gezB9IHRvIHsxfVwiLFxuICAgIExPR0dFUl9DSEFOR0VEOiBcIkxvZ2dlciBjaGFuZ2VkXCJcbn1cblxuLyoqXG4gKiBAdHlwZWRlZiBFcnJcbiAqIEBtZW1iZXJPZiBsb2dnaW5nLmxvZ2dpbmdcbiAqICovXG5leHBvcnQgdHlwZSBFcnIgPSBFcnJvciB8IHN0cmluZyB8IHVuZGVmaW5lZDtcbi8qKlxuICogQHR5cGVkZWYgQ2FsbGJhY2tcbiAqIEBtZW1iZXJPZiBsb2dnaW5nLmxvZ2dpbmdcbiAqICovXG5leHBvcnQgdHlwZSBDYWxsYmFjayA9IChlcnI/OiBFcnIsIC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkO1xuXG4vKipcbiAqIEBjb25zdGFudCBERUZBVUxUX1RJTUVTVEFNUF9GT1JNQVRcbiAqIEBjYXRlZ29yeSBDb25zdGFudHNcbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfVElNRVNUQU1QX0ZPUk1BVCA9IFwiZGQvTU0veXl5eSBISDptbTpzczpTXCI7XG5cbi8qKlxuICogQ2FuIGJlIGNoYW5nZWQgZm9yIGxvY2FsaXphdGlvbiBwdXJwb3Nlc1xuICpcbiAqIEBjb25zdGFudCBNT05USF9OQU1FU1xuICovXG5leHBvcnQgY29uc3QgTU9OVEhfTkFNRVMgPSBbXG4gICAgXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIixcbiAgICBcIkF1Z3VzdFwiLCBcIlNlcHRlbWJlclwiLCBcIk9jdG9iZXJcIiwgXCJOb3ZlbWJlclwiLCBcIkRlY2VtYmVyXCJcbl07XG5cbi8qKlxuICogQ2FuIGJlIGNoYW5nZWQgZm9yIGxvY2FsaXphdGlvbiBwdXJwb3Nlc1xuICpcbiAqIEBjb25zdGFudCBEQVlTX09GX1dFRUtfTkFNRVNcbiAqL1xuZXhwb3J0IGNvbnN0IERBWVNfT0ZfV0VFS19OQU1FUyA9IFtcbiAgICBcIlN1bmRheVwiLCBcIk1vbmRheVwiLCBcIlR1ZXNkYXlcIixcbiAgICBcIldlZG5lc2RheVwiLCBcIlRodXJzZGF5XCIsIFwiRnJpZGF5XCIsIFwiU2F0dXJkYXlcIlxuXTsiLCJ2YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fZXhwb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19leHBvcnRTdGFyKSB8fCBmdW5jdGlvbihtLCBleHBvcnRzKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChleHBvcnRzLCBwKSkgX19jcmVhdGVCaW5kaW5nKGV4cG9ydHMsIG0sIHApO1xufTtcbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICB2YXIgdiA9IGZhY3RvcnkocmVxdWlyZSwgZXhwb3J0cyk7XG4gICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIG1vZHVsZS5leHBvcnRzID0gdjtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9jb25zdGFudHNcIiwgXCIuL2xvZ2dpbmdcIiwgXCIuL2RlY29yYXRvcnNcIiwgXCIuL3V0aWxzXCJdLCBmYWN0b3J5KTtcbiAgICB9XG59KShmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vY29uc3RhbnRzXCIpLCBleHBvcnRzKTtcbiAgICBfX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vbG9nZ2luZ1wiKSwgZXhwb3J0cyk7XG4gICAgX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2RlY29yYXRvcnNcIiksIGV4cG9ydHMpO1xuICAgIF9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi91dGlsc1wiKSwgZXhwb3J0cyk7XG59KTsiLCJpbXBvcnQge0NyaXRpY2FsRXJyb3J9IGZyb20gXCIuLi9lcnJvcnNcIjtcbmltcG9ydCB7Z2V0TG9nZ2VyfSBmcm9tIFwiLi9sb2dnaW5nXCI7XG5pbXBvcnQge0NhbGxiYWNrLCBFcnIsIExPR0dFUl9MRVZFTFN9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuXG4vKipcbiAqIFV0aWwgY2xhc3MgdG8gbWVhc3VyZSB0aW1lIGJldHdlZW4gdHdvIHBvaW50cyBpbiB0aW1lO1xuICpcbiAqIEBjbGFzcyBTdG9wV2F0Y2hcbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBTdG9wV2F0Y2h7XG4gICAgcHJpdmF0ZSBzdGFydFRpbWU/OiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIHN0YXJ0IHRpbWVcbiAgICAgKi9cbiAgICBzdGFydCgpe1xuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIG5vdyBhbmQgdGhlIHN0YXJ0IHRpbWVcbiAgICAgKi9cbiAgICBjaGVjaygpOiBudW1iZXIge1xuICAgICAgICBpZiAoIXRoaXMuc3RhcnRUaW1lKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdG9wV2F0Y2ggZGlkbnQgc3RhcnQnKTtcbiAgICAgICAgcmV0dXJuIERhdGUubm93KCkgLSB0aGlzLnN0YXJ0VGltZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gbm93IGFuZCB0aGUgc3RhcnQgdGltZVxuICAgICAqIHN0b3BzIHRoZSBUaW1lV2F0Y2hcbiAgICAgKi9cbiAgICBzdG9wKCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuY2hlY2soKTtcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEFzeW5jIE1ldGhvZCBkZWNvcmF0b3IgdG8gbG9nIHRoZSBpbnB1dCBhbmQgb3V0cHV0IG9mIHRoYXQgbWV0aG9kXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtsZXZlbF0gTG9nZ2luZyBMZXZlbCBhcyBpbiB7QGxpbmsgTE9HR0VSX0xFVkVMU30gZGVmYXVsdHMgdG8ge0BsaW5rIExPR0dFUl9MRVZFTFMuREVCVUd9XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtiZW5jaG1hcmtdIGRldGVybWluZXMgaWYgdGhlIGxvZ2dpbmcgaW5jbHVkZXMgdGhlIGR1cmF0aW9uIGluIG1zLiBkZWZhdWx0cyB0byBmYWxzZVxuICpcbiAqIEBkZWNvcmF0b3IgbG9nQXN5bmNcbiAqXG4gKiBAY2F0ZWdvcnkgRGVjb3JhdG9yc1xuICovXG5leHBvcnQgZnVuY3Rpb24gbG9nQXN5bmMobGV2ZWw6IG51bWJlciB8IGJvb2xlYW4gPSBMT0dHRVJfTEVWRUxTLkRFQlVHLCBiZW5jaG1hcms/OiBib29sZWFuKSB7XG5cbiAgICBpZiAoIWJlbmNobWFyayAmJiB0eXBlb2YgbGV2ZWwgPT09ICdib29sZWFuJyl7XG4gICAgICAgIGJlbmNobWFyayA9IGxldmVsO1xuICAgICAgICBsZXZlbCA9IExPR0dFUl9MRVZFTFMuREVCVUc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQ6IGFueSwgcHJvcGVydHlLZXk6IHN0cmluZywgZGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yKSB7XG5cbiAgICAgICAgY29uc3Qgb3JpZ2luYWxNZXRob2QgPSBkZXNjcmlwdG9yLnZhbHVlO1xuXG4gICAgICAgIGNvbnN0IG1ldGhvZFdyYXBwZXIgPSBmdW5jdGlvbih0aGlzOiBhbnksIC4uLmFyZ3M6IGFueVtdKXtcbiAgICAgICAgICAgIGxldCBjYWxsYmFjazogQ2FsbGJhY2sgPSBhcmdzLnBvcCgpO1xuICAgICAgICAgICAgaWYgKCFjYWxsYmFjayB8fCB0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IENyaXRpY2FsRXJyb3IoYE1pc3NpbmcgQ2FsbGJhY2tgKTtcblxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMubmFtZSAmJiB0aGlzLm5hbWUgIT09ICdGdW5jdGlvbicgPyB0aGlzLm5hbWUgOiB0aGlzLmNvbnN0cnVjdG9yICYmIHRoaXMuY29uc3RydWN0b3IubmFtZSB8fCB0aGlzO1xuICAgICAgICAgICAgZ2V0TG9nZ2VyKCkucmVwb3J0KGBbezB9XSAtIEVudGVyaW5nIE1ldGhvZCB7MX0gd2l0aCBhcmdzOiB7Mn1gLCBsZXZlbCBhcyBudW1iZXIsIG5hbWUsIHByb3BlcnR5S2V5LCBhcmdzLm1hcChhID0+IGEudG9TdHJpbmcoKSkuam9pbignIHwgJykpO1xuXG4gICAgICAgICAgICBsZXQgc3RvcFdhdGNoOiBTdG9wV2F0Y2g7XG5cbiAgICAgICAgICAgIGNvbnN0IGNiID0gKGVycjogRXJyLCAuLi5yZXN1bHRzOiBhbnlbXSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzdG9wV2F0Y2gpXG4gICAgICAgICAgICAgICAgICAgIGdldExvZ2dlcigpLnJlcG9ydChgW3swfV1bQkVOQ0hNQVJLXSAtIExlYXZpbmcgTWV0aG9kIHsxfSBhZnRlciB7Mn1tc2AsIGxldmVsIGFzIG51bWJlciwgbmFtZSwgcHJvcGVydHlLZXksIHN0b3BXYXRjaC5zdG9wKCkpO1xuICAgICAgICAgICAgICAgIGlmIChlcnIpe1xuICAgICAgICAgICAgICAgICAgICBnZXRMb2dnZXIoKS5yZXBvcnQoYFt7MH1dW0VSUk9SXSAtIExlYXZpbmcgTWV0aG9kIHsxfSB3aXRoIGVycm9yIHsyfWAsIGxldmVsIGFzIG51bWJlciwgbmFtZSwgcHJvcGVydHlLZXksIGVycik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGdldExvZ2dlcigpLnJlcG9ydChgW3swfV0gLSBMZWF2aW5nIE1ldGhvZCB7MX0gd2l0aCByZXN1bHRzOiB7Mn1gLCBsZXZlbCBhcyBudW1iZXIsIG5hbWUsIHByb3BlcnR5S2V5LCByZXN1bHRzID8gcmVzdWx0cy5tYXAoYSA9PiBhLnRvU3RyaW5nKCkpLmpvaW4oJyB8ICcpIDogXCJ2b2lkXCIpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCwgLi4ucmVzdWx0cyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChiZW5jaG1hcmspe1xuICAgICAgICAgICAgICAgIHN0b3BXYXRjaCA9IG5ldyBTdG9wV2F0Y2goKTtcbiAgICAgICAgICAgICAgICBzdG9wV2F0Y2guc3RhcnQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb3JpZ2luYWxNZXRob2QuY2FsbCh0aGlzLl9fb3JpZ2luYWxPYmplY3QgfHwgdGhpcywgLi4uYXJncywgY2IpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVzY3JpcHRvci52YWx1ZSA9IG1ldGhvZFdyYXBwZXI7XG4gICAgfVxufVxuXG4vKipcbiAqIFN5bmMgTWV0aG9kIGRlY29yYXRvciB0byBsb2cgdGhlIGlucHV0IGFuZCBvdXRwdXQgb2YgdGhhdCBtZXRob2RcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gW2xldmVsXSBMb2dnaW5nIExldmVsIGFzIGluIHtAbGluayBMT0dHRVJfTEVWRUxTfSBkZWZhdWx0cyB0byB7QGxpbmsgTE9HR0VSX0xFVkVMUy5ERUJVR31cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2JlbmNobWFya10gZGV0ZXJtaW5lcyBpZiB0aGUgbG9nZ2luZyBpbmNsdWRlcyB0aGUgZHVyYXRpb24gaW4gbXMuIGRlZmF1bHRzIHRvIGZhbHNlXG4gKlxuICogQGRlY29yYXRvciBsb2dTeW5jXG4gKlxuICogQGNhdGVnb3J5IERlY29yYXRvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvZ1N5bmMobGV2ZWw6IG51bWJlciB8IGJvb2xlYW4gPSBMT0dHRVJfTEVWRUxTLkRFQlVHLCBiZW5jaG1hcms/OiBib29sZWFuKSB7XG5cbiAgICBpZiAoIWJlbmNobWFyayAmJiB0eXBlb2YgbGV2ZWwgPT09ICdib29sZWFuJyl7XG4gICAgICAgIGJlbmNobWFyayA9IGxldmVsO1xuICAgICAgICBsZXZlbCA9IExPR0dFUl9MRVZFTFMuREVCVUc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQ6IGFueSwgcHJvcGVydHlLZXk6IHN0cmluZywgZGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yKSB7XG5cbiAgICAgICAgY29uc3Qgb3JpZ2luYWxNZXRob2QgPSBkZXNjcmlwdG9yLnZhbHVlO1xuXG4gICAgICAgIGNvbnN0IG1ldGhvZFdyYXBwZXIgPSBmdW5jdGlvbih0aGlzOiBhbnksIC4uLmFyZ3M6IGFueVtdKXtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLm5hbWUgJiYgdGhpcy5uYW1lICE9PSAnRnVuY3Rpb24nID8gdGhpcy5uYW1lIDogdGhpcy5jb25zdHJ1Y3RvciAmJiB0aGlzLmNvbnN0cnVjdG9yLm5hbWUgfHwgdGhpcztcblxuICAgICAgICAgICAgZ2V0TG9nZ2VyKCkucmVwb3J0KGBbezB9XSAtIEVudGVyaW5nIE1ldGhvZCB7MX0gd2l0aCBhcmdzOiB7Mn1gLCBsZXZlbCBhcyBudW1iZXIsIG5hbWUsIHByb3BlcnR5S2V5LCBhcmdzLm1hcChhID0+IGEudG9TdHJpbmcoKSkuam9pbignIHwgJykpO1xuICAgICAgICAgICAgbGV0IHN0b3BXYXRjaDogU3RvcFdhdGNoIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICAgICAgaWYgKGJlbmNobWFyayl7XG4gICAgICAgICAgICAgICAgc3RvcFdhdGNoID0gbmV3IFN0b3BXYXRjaCgpO1xuICAgICAgICAgICAgICAgIHN0b3BXYXRjaC5zdGFydCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IG9yaWdpbmFsTWV0aG9kLmNhbGwodGhpcy5fX29yaWdpbmFsT2JqZWN0IHx8IHRoaXMsIC4uLmFyZ3MpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChzdG9wV2F0Y2gpXG4gICAgICAgICAgICAgICAgICAgIGdldExvZ2dlcigpLnJlcG9ydChgW3swfV1bQkVOQ0hNQVJLXSAtIExlYXZpbmcgTWV0aG9kIHsxfSBhZnRlciB7Mn1tc2AsIGxldmVsIGFzIG51bWJlciwgbmFtZSwgcHJvcGVydHlLZXksIHN0b3BXYXRjaC5zdG9wKCkpO1xuICAgICAgICAgICAgICAgIGdldExvZ2dlcigpLnJlcG9ydChgW3swfV1bRVJST1JdIC0gTGVhdmluZyBNZXRob2QgezF9IHdpdGggZXJyb3IgezJ9YCwgbGV2ZWwgYXMgbnVtYmVyLCBuYW1lLCBwcm9wZXJ0eUtleSwgZSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdG9wV2F0Y2gpXG4gICAgICAgICAgICAgICAgZ2V0TG9nZ2VyKCkucmVwb3J0KGBbezB9XVtCRU5DSE1BUktdIC0gTGVhdmluZyBNZXRob2QgezF9IGFmdGVyIHsyfW1zYCwgbGV2ZWwgYXMgbnVtYmVyLCBuYW1lLCBwcm9wZXJ0eUtleSwgc3RvcFdhdGNoLnN0b3AoKSk7XG4gICAgICAgICAgICBnZXRMb2dnZXIoKS5yZXBvcnQoYFt7MH1dIC0gTGVhdmluZyBNZXRob2QgezF9IHdpdGggcmVzdWx0czogezJ9YCwgbGV2ZWwgYXMgbnVtYmVyLCBuYW1lLCBwcm9wZXJ0eUtleSwgcmVzdWx0ID8gcmVzdWx0IDogXCJ2b2lkXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlc2NyaXB0b3IudmFsdWUgPSBtZXRob2RXcmFwcGVyO1xuICAgIH1cbn1cbiIsInZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20sIHBhY2spIHtcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xufTtcbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICB2YXIgdiA9IGZhY3RvcnkocmVxdWlyZSwgZXhwb3J0cyk7XG4gICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIG1vZHVsZS5leHBvcnRzID0gdjtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9jb25zdGFudHNcIiwgXCIuLi9lcnJvcnNcIiwgXCIuL3V0aWxzXCJdLCBmYWN0b3J5KTtcbiAgICB9XG59KShmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBleHBvcnRzLmNyaXRpY2FsID0gZXhwb3J0cy5lcnJvciA9IGV4cG9ydHMud2FybiA9IGV4cG9ydHMuZGVidWcgPSBleHBvcnRzLmFsbCA9IGV4cG9ydHMuaW5mbyA9IGV4cG9ydHMuc2V0TG9nZ2VyID0gZXhwb3J0cy5nZXRMb2dnZXIgPSBleHBvcnRzLkxvZ2dlckltcCA9IHZvaWQgMDtcbiAgICB2YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG4gICAgdmFyIGVycm9yc18xID0gcmVxdWlyZShcIi4uL2Vycm9yc1wiKTtcbiAgICB2YXIgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuICAgIHZhciBMb2dnZXJJbXAgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBMb2dnZXJJbXAoZGVmYXVsdExldmVsLCB1c2VUaW1lc3RhbXAsIGxvZ0xldmVsLCBsb2dTdGFja1RyYWNlLCB0aW1lc3RhbXBGb3JtYXQpIHtcbiAgICAgICAgICAgIGlmIChkZWZhdWx0TGV2ZWwgPT09IHZvaWQgMCkgeyBkZWZhdWx0TGV2ZWwgPSBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLklORk87IH1cbiAgICAgICAgICAgIGlmICh1c2VUaW1lc3RhbXAgPT09IHZvaWQgMCkgeyB1c2VUaW1lc3RhbXAgPSB0cnVlOyB9XG4gICAgICAgICAgICBpZiAobG9nTGV2ZWwgPT09IHZvaWQgMCkgeyBsb2dMZXZlbCA9IHRydWU7IH1cbiAgICAgICAgICAgIGlmIChsb2dTdGFja1RyYWNlID09PSB2b2lkIDApIHsgbG9nU3RhY2tUcmFjZSA9IGZhbHNlOyB9XG4gICAgICAgICAgICBpZiAodGltZXN0YW1wRm9ybWF0ID09PSB2b2lkIDApIHsgdGltZXN0YW1wRm9ybWF0ID0gY29uc3RhbnRzXzEuREVGQVVMVF9USU1FU1RBTVBfRk9STUFUOyB9XG4gICAgICAgICAgICB0aGlzLmxldmVsID0gZGVmYXVsdExldmVsO1xuICAgICAgICAgICAgdGhpcy51c2VUaW1lc3RhbXAgPSB1c2VUaW1lc3RhbXA7XG4gICAgICAgICAgICB0aGlzLmxvZ0xldmVsID0gbG9nTGV2ZWw7XG4gICAgICAgICAgICB0aGlzLmxvZ1N0YWNrVHJhY2UgPSBsb2dTdGFja1RyYWNlO1xuICAgICAgICAgICAgdGhpcy50aW1lc3RhbXBGb3JtYXQgPSB0aW1lc3RhbXBGb3JtYXQ7XG4gICAgICAgIH1cbiAgICAgICAgTG9nZ2VySW1wLnByb3RvdHlwZS5idWlsZE1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSwgbG9nTGV2ZWwsIGlzc3Vlcikge1xuICAgICAgICAgICAgaWYgKGlzc3VlciA9PT0gdm9pZCAwKSB7IGlzc3VlciA9IHVuZGVmaW5lZDsgfVxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMzsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaSAtIDNdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzdGFja3NUcmFjZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBzdGFja3NUcmFjZSA9IG1lc3NhZ2Uuc3RhY2s7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UubWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmxvZ0xldmVsKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIltcIi5jb25jYXQoT2JqZWN0LmtleXMoY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUylbbG9nTGV2ZWxdLCBcIl0gLSBcIikuY29uY2F0KG1lc3NhZ2UpO1xuICAgICAgICAgICAgaWYgKGlzc3VlcilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gXCJbXCIuY29uY2F0KGlzc3Vlci50b1N0cmluZygpLCBcIl1cIikuY29uY2F0KG1lc3NhZ2UpO1xuICAgICAgICAgICAgaWYgKHRoaXMudXNlVGltZXN0YW1wKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIltcIi5jb25jYXQoKDAsIHV0aWxzXzEuZm9ybWF0RGF0ZSkobmV3IERhdGUoKSwgdGhpcy50aW1lc3RhbXBGb3JtYXQpLCBcIl1cIikuY29uY2F0KG1lc3NhZ2UpO1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxzXzEuc3RyaW5nRm9ybWF0LmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbbWVzc2FnZV0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgICAgIH07XG4gICAgICAgIExvZ2dlckltcC5wcm90b3R5cGUucmVwb3J0ID0gZnVuY3Rpb24gKG1lc3NhZ2UsIGxldmVsKSB7XG4gICAgICAgICAgICBpZiAobGV2ZWwgPT09IHZvaWQgMCkgeyBsZXZlbCA9IGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuSU5GTzsgfVxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsZXZlbCA8IHRoaXMubGV2ZWwpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBlcnJvcnNfMS5Mb2dnZWRFcnJvciAmJiBtZXNzYWdlLmxvZ2dlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIgcmVwb3J0TWV0aG9kO1xuICAgICAgICAgICAgc3dpdGNoIChsZXZlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5XQVJOOlxuICAgICAgICAgICAgICAgICAgICByZXBvcnRNZXRob2QgPSBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5FUlJPUjpcbiAgICAgICAgICAgICAgICBjYXNlIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuQ1JJVElDQUw6XG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydE1ldGhvZCA9IGNvbnNvbGUuZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5JTkZPOlxuICAgICAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuTE9HR0VSX0xFVkVMUy5ERUJVRzpcbiAgICAgICAgICAgICAgICBjYXNlIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuQUxMOlxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydE1ldGhvZCA9IGNvbnNvbGUubG9nO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmaW5hbE1lc3NhZ2UgPSB0aGlzLmJ1aWxkTWVzc2FnZS5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCBsZXZlbCwgdW5kZWZpbmVkXSwgYXJncywgZmFsc2UpKTtcbiAgICAgICAgICAgIHJlcG9ydE1ldGhvZChmaW5hbE1lc3NhZ2UpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvciAmJiBtZXNzYWdlLnN0YWNrICYmIHRoaXMubG9nU3RhY2tUcmFjZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcG9ydE1ldGhvZCh0aGlzLmJ1aWxkTWVzc2FnZShcIlxcbi0tIFN0YWNrU3RyYWNlOlxcblwiLmNvbmNhdChtZXNzYWdlLnN0YWNrKSwgbGV2ZWwpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgZXJyb3JzXzEuTG9nZ2VkRXJyb3IpXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5sb2dnZWQgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBMb2dnZXJJbXAucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVwb3J0LmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuSU5GT10sIGFyZ3MsIGZhbHNlKSk7XG4gICAgICAgIH07XG4gICAgICAgIExvZ2dlckltcC5wcm90b3R5cGUuYWxsID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlcG9ydC5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkFMTF0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgICAgIH07XG4gICAgICAgIExvZ2dlckltcC5wcm90b3R5cGUuZGVidWcgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVwb3J0LmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuREVCVUddLCBhcmdzLCBmYWxzZSkpO1xuICAgICAgICB9O1xuICAgICAgICBMb2dnZXJJbXAucHJvdG90eXBlLndhcm4gPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVwb3J0LmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuV0FSTl0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgICAgIH07XG4gICAgICAgIExvZ2dlckltcC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVwb3J0LmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2UsIGNvbnN0YW50c18xLkxPR0dFUl9MRVZFTFMuRVJST1JdLCBhcmdzLCBmYWxzZSkpO1xuICAgICAgICB9O1xuICAgICAgICBMb2dnZXJJbXAucHJvdG90eXBlLmNyaXRpY2FsID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlcG9ydC5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlLCBjb25zdGFudHNfMS5MT0dHRVJfTEVWRUxTLkNSSVRJQ0FMXSwgYXJncywgZmFsc2UpKTtcbiAgICAgICAgfTtcbiAgICAgICAgTG9nZ2VySW1wLnByb3RvdHlwZS5zZXRMZXZlbCA9IGZ1bmN0aW9uIChsZXZlbCkge1xuICAgICAgICAgICAgdGhpcy5kZWJ1ZygoMCwgdXRpbHNfMS5zdHJpbmdGb3JtYXQpKGNvbnN0YW50c18xLkxPR0dJTkdfTVNHLkxFVkVMX0NIQU5HRUQsIHRoaXMubGV2ZWwudG9TdHJpbmcoKSwgbGV2ZWwudG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgdGhpcy5sZXZlbCA9IGxldmVsO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gTG9nZ2VySW1wO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Mb2dnZXJJbXAgPSBMb2dnZXJJbXA7XG4gICAgdmFyIGN1cnJlbnRMb2dnZXI7XG4gICAgZnVuY3Rpb24gZ2V0TG9nZ2VyKCkge1xuICAgICAgICBpZiAoIWN1cnJlbnRMb2dnZXIpXG4gICAgICAgICAgICBjdXJyZW50TG9nZ2VyID0gbmV3IExvZ2dlckltcCgpO1xuICAgICAgICByZXR1cm4gY3VycmVudExvZ2dlcjtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRMb2dnZXIgPSBnZXRMb2dnZXI7XG4gICAgZnVuY3Rpb24gc2V0TG9nZ2VyKGxvZ2dlcikge1xuICAgICAgICBjdXJyZW50TG9nZ2VyID0gbG9nZ2VyO1xuICAgICAgICBnZXRMb2dnZXIoKS5kZWJ1Zyhjb25zdGFudHNfMS5MT0dHSU5HX01TRy5MT0dHRVJfQ0hBTkdFRCk7XG4gICAgfVxuICAgIGV4cG9ydHMuc2V0TG9nZ2VyID0gc2V0TG9nZ2VyO1xuICAgIHZhciBpbmZvID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKF9hID0gZ2V0TG9nZ2VyKCkpLmluZm8uYXBwbHkoX2EsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2VdLCBhcmdzLCBmYWxzZSkpO1xuICAgIH07XG4gICAgZXhwb3J0cy5pbmZvID0gaW5mbztcbiAgICB2YXIgYWxsID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKF9hID0gZ2V0TG9nZ2VyKCkpLmFsbC5hcHBseShfYSwgX19zcHJlYWRBcnJheShbbWVzc2FnZV0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgfTtcbiAgICBleHBvcnRzLmFsbCA9IGFsbDtcbiAgICB2YXIgZGVidWcgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoX2EgPSBnZXRMb2dnZXIoKSkuZGVidWcuYXBwbHkoX2EsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2VdLCBhcmdzLCBmYWxzZSkpO1xuICAgIH07XG4gICAgZXhwb3J0cy5kZWJ1ZyA9IGRlYnVnO1xuICAgIHZhciB3YXJuID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKF9hID0gZ2V0TG9nZ2VyKCkpLndhcm4uYXBwbHkoX2EsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2VdLCBhcmdzLCBmYWxzZSkpO1xuICAgIH07XG4gICAgZXhwb3J0cy53YXJuID0gd2FybjtcbiAgICB2YXIgZXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoX2EgPSBnZXRMb2dnZXIoKSkuZXJyb3IuYXBwbHkoX2EsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2VdLCBhcmdzLCBmYWxzZSkpO1xuICAgIH07XG4gICAgZXhwb3J0cy5lcnJvciA9IGVycm9yO1xuICAgIHZhciBjcml0aWNhbCA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChfYSA9IGdldExvZ2dlcigpKS5jcml0aWNhbC5hcHBseShfYSwgX19zcHJlYWRBcnJheShbbWVzc2FnZV0sIGFyZ3MsIGZhbHNlKSk7XG4gICAgfTtcbiAgICBleHBvcnRzLmNyaXRpY2FsID0gY3JpdGljYWw7XG59KTsiLCIvKipcbiAqIEBuYW1lc3BhY2UgbG9nZ2luZy5sb2dnaW5nXG4gKiBAbWVtYmVyT2YgbG9nZ2luZ1xuICovXG5cbmV4cG9ydCAqIGZyb20gJy4vY29uc3RhbnRzJztcbmV4cG9ydCAqIGZyb20gJy4vbG9nZ2luZyc7XG5leHBvcnQgKiBmcm9tICcuL2RlY29yYXRvcnMnO1xuZXhwb3J0ICogZnJvbSAnLi91dGlscyc7IiwiaW1wb3J0IHtERUZBVUxUX1RJTUVTVEFNUF9GT1JNQVQsIExPR0dFUl9MRVZFTFMsIExPR0dJTkdfTVNHfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcbmltcG9ydCB7TG9nZ2VkRXJyb3J9IGZyb20gXCIuLi9lcnJvcnNcIjtcbmltcG9ydCB7Zm9ybWF0RGF0ZSwgc3RyaW5nRm9ybWF0fSBmcm9tIFwiLi91dGlsc1wiO1xuXG4vKipcbiAqIEB0eXBlZGVmIExvZ2dlck1lc3NhZ2VcbiAqIEBtZW1iZXJPZiBsb2dnaW5nLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IHR5cGUgTG9nZ2VyTWVzc2FnZSA9IEVycm9yIHwgc3RyaW5nO1xuXG4vKipcbiAqIEBpbnRlcmZhY2UgTG9nZ2VyXG4gKiBAbWVtYmVyT2YgbG9nZ2luZy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTG9nZ2VyIHtcbiAgICAvKipcbiAgICAgKiBSZXBvcnRzIGEgbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZXZlbFxuICAgICAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICAgICAqXG4gICAgICogQG1lbWJlck9mIExvZ2dlclxuICAgICAqL1xuICAgIHJlcG9ydChtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBsZXZlbDogbnVtYmVyLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG4gICAgLyoqXG4gICAgICoge0BsaW5rIExvZ2dlciNyZXBvcnR9cyBhIG1lc3NhZ2UgdW5kZXIge0BsaW5rIExPR0dFUl9MRVZFTFMuQUxMfVxuICAgICAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7YW55W119IFthcmdzXVxuICAgICAqXG4gICAgICogQG1lbWJlck9mIExvZ2dlclxuICAgICAqL1xuICAgIGFsbChtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG4gICAgLyoqXG4gICAgICoge0BsaW5rIExvZ2dlciNyZXBvcnR9cyBhIG1lc3NhZ2UgdW5kZXIge0BsaW5rIExPR0dFUl9MRVZFTFMuSU5GT31cbiAgICAgKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBMb2dnZXJcbiAgICAgKi9cbiAgICBpbmZvKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKTogdm9pZDtcbiAgICAvKipcbiAgICAgKiB7QGxpbmsgTG9nZ2VyI3JlcG9ydH1zIGEgbWVzc2FnZSB1bmRlciB7QGxpbmsgTE9HR0VSX0xFVkVMUy5ERUJVR31cbiAgICAgKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBMb2dnZXJcbiAgICAgKi9cbiAgICBkZWJ1ZyhtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG4gICAgLyoqXG4gICAgICoge0BsaW5rIExvZ2dlciNyZXBvcnR9cyBhIG1lc3NhZ2UgdW5kZXIge0BsaW5rIExPR0dFUl9MRVZFTFMuV0FSTn1cbiAgICAgKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBMb2dnZXJcbiAgICAgKi9cbiAgICB3YXJuKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKTogdm9pZDtcbiAgICAvKipcbiAgICAgKiB7QGxpbmsgTG9nZ2VyI3JlcG9ydH1zIGEgbWVzc2FnZSB1bmRlciB7QGxpbmsgTE9HR0VSX0xFVkVMUy5FUlJPUn1cbiAgICAgKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBbYXJnc11cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBMb2dnZXJcbiAgICAgKi9cbiAgICBlcnJvcihtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG4gICAgLyoqXG4gICAgICoge0BsaW5rIExvZ2dlciNyZXBvcnR9cyBhIG1lc3NhZ2UgdW5kZXIge0BsaW5rIExPR0dFUl9MRVZFTFMuQ1JJVElDQUx9XG4gICAgICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHthbnlbXX0gW2FyZ3NdXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgTG9nZ2VyXG4gICAgICovXG4gICAgY3JpdGljYWwobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pOiB2b2lkO1xuICAgIC8qKlxuICAgICAqIERlZmluZXMgdGhlIExvZ2dlciBsZXZlbFxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxldmVsXG4gICAgICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICAgICAqXG4gICAgICogQG1lbWJlck9mIExvZ2dlclxuICAgICAqL1xuICAgIHNldExldmVsKGxldmVsOiBudW1iZXIsIC4uLmFyZ3M6IGFueVtdKTogdm9pZDtcbn1cblxuLyoqXG4gKiBEZWZhdWx0IExvZ2dlciBJbXBsZW1lbnRhdGlvblxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWZhdWx0TGV2ZWwgZGVmYXVsdHMgdG8ge0BsaW5rIExPR0dFUl9MRVZFTFMuSU5GT31cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlVGltZXN0YW1wIGRlZmF1bHRzIHRvIHRydWVcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gbG9nTGV2ZWxcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gbG9nU3RhY2tUcmFjZVxuICogQHBhcmFtIHtzdHJpbmd9IHRpbWVzdGFtcEZvcm1hdFxuICpcbiAqIEBjbGFzcyBMb2dnZXJJbXBcbiAqIEBpbXBsZW1lbnRzIExvZ2dlclxuICovXG5leHBvcnQgY2xhc3MgTG9nZ2VySW1wIGltcGxlbWVudHMgTG9nZ2VyIHtcbiAgICBwcml2YXRlIGxldmVsOiBudW1iZXI7XG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IHVzZVRpbWVzdGFtcDogYm9vbGVhbjtcbiAgICBwcml2YXRlIHJlYWRvbmx5IGxvZ0xldmVsOiBib29sZWFuO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgdGltZXN0YW1wRm9ybWF0OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSByZWFkb25seSBsb2dTdGFja1RyYWNlOiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IoZGVmYXVsdExldmVsOiBudW1iZXIgPSBMT0dHRVJfTEVWRUxTLklORk8sIHVzZVRpbWVzdGFtcCA9IHRydWUsIGxvZ0xldmVsOiBib29sZWFuID0gdHJ1ZSwgbG9nU3RhY2tUcmFjZTogYm9vbGVhbiA9IGZhbHNlLCB0aW1lc3RhbXBGb3JtYXQgPSBERUZBVUxUX1RJTUVTVEFNUF9GT1JNQVQpe1xuICAgICAgICB0aGlzLmxldmVsID0gZGVmYXVsdExldmVsO1xuICAgICAgICB0aGlzLnVzZVRpbWVzdGFtcCA9IHVzZVRpbWVzdGFtcDtcbiAgICAgICAgdGhpcy5sb2dMZXZlbCA9IGxvZ0xldmVsO1xuICAgICAgICB0aGlzLmxvZ1N0YWNrVHJhY2UgPSBsb2dTdGFja1RyYWNlO1xuICAgICAgICB0aGlzLnRpbWVzdGFtcEZvcm1hdCA9IHRpbWVzdGFtcEZvcm1hdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCdWlsdHMgdGhlIGFjdHVhbCBsb2dnaW5nIG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbG9nTGV2ZWwgaWYgdGhlIGxldmVsIGlzIHRvIGJlIGxvZ2dlZFxuICAgICAqIEBwYXJhbSB7YW55fSBpc3N1ZXIgd2hvIGlzIGxvZ2dpbmcgdGhlIG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBhcmdzXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHByb3RlY3RlZCBidWlsZE1lc3NhZ2UobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgbG9nTGV2ZWw6IG51bWJlciwgaXNzdWVyOiBhbnkgPSB1bmRlZmluZWQsIC4uLmFyZ3M6IGFueVtdKXtcbiAgICAgICAgbGV0IHN0YWNrc1RyYWNlOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3Ipe1xuICAgICAgICAgICAgc3RhY2tzVHJhY2UgPSBtZXNzYWdlLnN0YWNrO1xuICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UubWVzc2FnZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmxvZ0xldmVsKVxuICAgICAgICAgICAgbWVzc2FnZSA9IGBbJHtPYmplY3Qua2V5cyhMT0dHRVJfTEVWRUxTKVtsb2dMZXZlbF19XSAtICR7bWVzc2FnZX1gO1xuICAgICAgICBpZiAoaXNzdWVyKVxuICAgICAgICAgICAgbWVzc2FnZSA9IGBbJHtpc3N1ZXIudG9TdHJpbmcoKX1dJHttZXNzYWdlfWA7XG4gICAgICAgIGlmICh0aGlzLnVzZVRpbWVzdGFtcClcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgWyR7Zm9ybWF0RGF0ZShuZXcgRGF0ZSgpLCB0aGlzLnRpbWVzdGFtcEZvcm1hdCl9XSR7bWVzc2FnZX1gO1xuICAgICAgICByZXR1cm4gc3RyaW5nRm9ybWF0KG1lc3NhZ2UsIC4uLmFyZ3MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxldmVsIGRlZmF1bHRzIHRvIHtAbGluayBMT0dHRVJfTEVWRUxTLklORk99XG4gICAgICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICAgICAqL1xuICAgIHJlcG9ydChtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCBsZXZlbDogbnVtYmVyID0gTE9HR0VSX0xFVkVMUy5JTkZPLCAuLi5hcmdzOiBhbnlbXSkgOiB2b2lkIHtcbiAgICAgICAgaWYgKGxldmVsIDwgdGhpcy5sZXZlbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBMb2dnZWRFcnJvciAmJiBtZXNzYWdlLmxvZ2dlZClcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICBsZXQgcmVwb3J0TWV0aG9kOiBGdW5jdGlvbjtcbiAgICAgICAgc3dpdGNoIChsZXZlbCl7XG4gICAgICAgICAgICBjYXNlIExPR0dFUl9MRVZFTFMuV0FSTjpcbiAgICAgICAgICAgICAgICByZXBvcnRNZXRob2QgPSBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIExPR0dFUl9MRVZFTFMuRVJST1I6XG4gICAgICAgICAgICBjYXNlIExPR0dFUl9MRVZFTFMuQ1JJVElDQUw6XG4gICAgICAgICAgICAgICAgcmVwb3J0TWV0aG9kID0gY29uc29sZS5lcnJvcjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTE9HR0VSX0xFVkVMUy5JTkZPOlxuICAgICAgICAgICAgY2FzZSBMT0dHRVJfTEVWRUxTLkRFQlVHOlxuICAgICAgICAgICAgY2FzZSBMT0dHRVJfTEVWRUxTLkFMTDpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmVwb3J0TWV0aG9kID0gY29uc29sZS5sb2c7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZmluYWxNZXNzYWdlID0gdGhpcy5idWlsZE1lc3NhZ2UobWVzc2FnZSwgbGV2ZWwsIHVuZGVmaW5lZCwgLi4uYXJncyk7XG4gICAgICAgIHJlcG9ydE1ldGhvZChmaW5hbE1lc3NhZ2UpO1xuXG4gICAgICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IgJiYgbWVzc2FnZS5zdGFjayAmJiB0aGlzLmxvZ1N0YWNrVHJhY2Upe1xuICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgICAgICAgICByZXBvcnRNZXRob2QodGhpcy5idWlsZE1lc3NhZ2UoYFxcbi0tIFN0YWNrU3RyYWNlOlxcbiR7bWVzc2FnZS5zdGFja31gLCBsZXZlbCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBMb2dnZWRFcnJvcilcbiAgICAgICAgICAgIG1lc3NhZ2UubG9nZ2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIGluZm8obWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXBvcnQobWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5JTkZPLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICBhbGwobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXBvcnQobWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5BTEwsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIGRlYnVnKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVwb3J0KG1lc3NhZ2UsIExPR0dFUl9MRVZFTFMuREVCVUcsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIHdhcm4obWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXBvcnQobWVzc2FnZSwgTE9HR0VSX0xFVkVMUy5XQVJOLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICBlcnJvcihtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlcG9ydChtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLkVSUk9SLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICBjcml0aWNhbChtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlcG9ydChtZXNzYWdlLCBMT0dHRVJfTEVWRUxTLkNSSVRJQ0FMLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICBzZXRMZXZlbChsZXZlbDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGVidWcoc3RyaW5nRm9ybWF0KExPR0dJTkdfTVNHLkxFVkVMX0NIQU5HRUQsIHRoaXMubGV2ZWwudG9TdHJpbmcoKSwgbGV2ZWwudG9TdHJpbmcoKSkpO1xuICAgICAgICB0aGlzLmxldmVsID0gbGV2ZWw7XG4gICAgfVxufVxuXG5sZXQgY3VycmVudExvZ2dlcjogTG9nZ2VyO1xuXG4vKipcbiAqIGdldHMgdGhlIGN1cnJlbnQgTG9nZ2VyXG4gKlxuICogQGZ1bmN0aW9uIGdldExvZ2dlclxuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExvZ2dlcigpe1xuICAgIGlmICghY3VycmVudExvZ2dlcilcbiAgICAgICAgY3VycmVudExvZ2dlciA9IG5ldyBMb2dnZXJJbXAoKTtcbiAgICByZXR1cm4gY3VycmVudExvZ2dlcjtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBsb2dnZXJcbiAqXG4gKiBAcGFyYW0ge0xvZ2dlcn0gbG9nZ2VyXG4gKlxuICogQGZ1bmN0aW9uIHNldExvZ2dlclxuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldExvZ2dlcihsb2dnZXI6IExvZ2dlcil7XG4gICAgY3VycmVudExvZ2dlciA9IGxvZ2dlcjtcbiAgICBnZXRMb2dnZXIoKS5kZWJ1ZyhMT0dHSU5HX01TRy5MT0dHRVJfQ0hBTkdFRCk7XG59XG5cbi8qKlxuICogUmVwb3J0cyBhIG1lc3NhZ2UgdG8gdGhlIGxvZ2dlciB1bmRlciB0aGUgbGV2ZWwge0BsaW5rIExPR0dFUl9MRVZFTFMuSU5GT31cbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICpcbiAqIEBmdW5jdGlvbiBpbmZvXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMubG9nZ2luZ1xuICovXG5leHBvcnQgY29uc3QgaW5mbyA9IChtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSkgPT4gZ2V0TG9nZ2VyKCkuaW5mbyhtZXNzYWdlLCAuLi5hcmdzKTtcbi8qKlxuICogUmVwb3J0cyBhIG1lc3NhZ2UgdG8gdGhlIGxvZ2dlciB1bmRlciB0aGUgbGV2ZWwge0BsaW5rIExPR0dFUl9MRVZFTFMuQUxMfVxuICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gKiBAcGFyYW0ge2FueVtdfSBhcmdzXG4gKlxuICogQGZ1bmN0aW9uIGFsbFxuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IGFsbCA9IChtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSkgPT4gZ2V0TG9nZ2VyKCkuYWxsKG1lc3NhZ2UsIC4uLmFyZ3MpO1xuLyoqXG4gKiBSZXBvcnRzIGEgbWVzc2FnZSB0byB0aGUgbG9nZ2VyIHVuZGVyIHRoZSBsZXZlbCB7QGxpbmsgTE9HR0VSX0xFVkVMUy5ERUJVR31cbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICpcbiAqIEBmdW5jdGlvbiBkZWJ1Z1xuICpcbiAqIEBtZW1iZXJPZiBkYi1kZWNvcmF0b3JzLmxvZ2dpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IGRlYnVnID0gKG1lc3NhZ2U6IExvZ2dlck1lc3NhZ2UsIC4uLmFyZ3M6IGFueVtdKSA9PiBnZXRMb2dnZXIoKS5kZWJ1ZyhtZXNzYWdlLCAuLi5hcmdzKTtcbi8qKlxuICogUmVwb3J0cyBhIG1lc3NhZ2UgdG8gdGhlIGxvZ2dlciB1bmRlciB0aGUgbGV2ZWwge0BsaW5rIExPR0dFUl9MRVZFTFMuV0FSTn1cbiAqIEBwYXJhbSB7TG9nZ2VyTWVzc2FnZX0gbWVzc2FnZVxuICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICpcbiAqIEBmdW5jdGlvbiB3YXJuXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMubG9nZ2luZ1xuICovXG5leHBvcnQgY29uc3Qgd2FybiA9IChtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSkgPT4gZ2V0TG9nZ2VyKCkud2FybihtZXNzYWdlLCAuLi5hcmdzKTtcbi8qKlxuICogUmVwb3J0cyBhIG1lc3NhZ2UgdG8gdGhlIGxvZ2dlciB1bmRlciB0aGUgbGV2ZWwge0BsaW5rIExPR0dFUl9MRVZFTFMuRVJST1J9XG4gKiBAcGFyYW0ge0xvZ2dlck1lc3NhZ2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAqXG4gKiBAZnVuY3Rpb24gZXJyb3JcbiAqXG4gKiBAbWVtYmVyT2YgZGItZGVjb3JhdG9ycy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBjb25zdCBlcnJvciA9IChtZXNzYWdlOiBMb2dnZXJNZXNzYWdlLCAuLi5hcmdzOiBhbnlbXSkgPT4gZ2V0TG9nZ2VyKCkuZXJyb3IobWVzc2FnZSwgLi4uYXJncyk7XG4vKipcbiAqIFJlcG9ydHMgYSBtZXNzYWdlIHRvIHRoZSBsb2dnZXIgdW5kZXIgdGhlIGxldmVsIHtAbGluayBMT0dHRVJfTEVWRUxTLkNSSVRJQ0FMfVxuICogQHBhcmFtIHtMb2dnZXJNZXNzYWdlfSBtZXNzYWdlXG4gKiBAcGFyYW0ge2FueVtdfSBhcmdzXG4gKlxuICogQGZ1bmN0aW9uIGNyaXRpY2FsXG4gKlxuICogQG1lbWJlck9mIGRiLWRlY29yYXRvcnMubG9nZ2luZ1xuICovXG5leHBvcnQgY29uc3QgY3JpdGljYWwgPSAobWVzc2FnZTogTG9nZ2VyTWVzc2FnZSwgLi4uYXJnczogYW55W10pID0+IGdldExvZ2dlcigpLmNyaXRpY2FsKG1lc3NhZ2UsIC4uLmFyZ3MpOyIsIihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICB2YXIgdiA9IGZhY3RvcnkocmVxdWlyZSwgZXhwb3J0cyk7XG4gICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIG1vZHVsZS5leHBvcnRzID0gdjtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9jb25zdGFudHNcIl0sIGZhY3RvcnkpO1xuICAgIH1cbn0pKGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIGV4cG9ydHMudHdvRGlnaXRQYWQgPSBleHBvcnRzLmZvcm1hdERhdGUgPSBleHBvcnRzLnN0cmluZ0Zvcm1hdCA9IHZvaWQgMDtcbiAgICB2YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG4gICAgZnVuY3Rpb24gc3RyaW5nRm9ybWF0KHN0cmluZykge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL3soXFxkKyl9L2csIGZ1bmN0aW9uIChtYXRjaCwgbnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGFyZ3NbbnVtYmVyXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICA/IGFyZ3NbbnVtYmVyXVxuICAgICAgICAgICAgICAgIDogbWF0Y2g7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBleHBvcnRzLnN0cmluZ0Zvcm1hdCA9IHN0cmluZ0Zvcm1hdDtcbiAgICBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUsIHBhdHRlcm5TdHIpIHtcbiAgICAgICAgaWYgKHBhdHRlcm5TdHIgPT09IHZvaWQgMCkgeyBwYXR0ZXJuU3RyID0gJ3l5eXkvTU0vZGQnOyB9XG4gICAgICAgIHZhciBkYXkgPSBkYXRlLmdldERhdGUoKSwgbW9udGggPSBkYXRlLmdldE1vbnRoKCksIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCksIGhvdXIgPSBkYXRlLmdldEhvdXJzKCksIG1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpLCBzZWNvbmQgPSBkYXRlLmdldFNlY29uZHMoKSwgbWlsaXNlY29uZHMgPSBkYXRlLmdldE1pbGxpc2Vjb25kcygpLCBoID0gaG91ciAlIDEyLCBoaCA9IHR3b0RpZ2l0UGFkKGgpLCBISCA9IHR3b0RpZ2l0UGFkKGhvdXIpLCBtbSA9IHR3b0RpZ2l0UGFkKG1pbnV0ZSksIHNzID0gdHdvRGlnaXRQYWQoc2Vjb25kKSwgYWFhID0gaG91ciA8IDEyID8gJ0FNJyA6ICdQTScsIEVFRUUgPSBjb25zdGFudHNfMS5EQVlTX09GX1dFRUtfTkFNRVNbZGF0ZS5nZXREYXkoKV0sIEVFRSA9IEVFRUUuc3Vic3RyKDAsIDMpLCBkZCA9IHR3b0RpZ2l0UGFkKGRheSksIE0gPSBtb250aCArIDEsIE1NID0gdHdvRGlnaXRQYWQoTSksIE1NTU0gPSBjb25zdGFudHNfMS5NT05USF9OQU1FU1ttb250aF0sIE1NTSA9IE1NTU0uc3Vic3RyKDAsIDMpLCB5eXl5ID0geWVhciArIFwiXCIsIHl5ID0geXl5eS5zdWJzdHIoMiwgMik7XG4gICAgICAgIHBhdHRlcm5TdHIgPSBwYXR0ZXJuU3RyXG4gICAgICAgICAgICAucmVwbGFjZSgnaGgnLCBoaCkucmVwbGFjZSgnaCcsIGgudG9TdHJpbmcoKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCdISCcsIEhIKS5yZXBsYWNlKCdIJywgaG91ci50b1N0cmluZygpKVxuICAgICAgICAgICAgLnJlcGxhY2UoJ21tJywgbW0pLnJlcGxhY2UoJ20nLCBtaW51dGUudG9TdHJpbmcoKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCdzcycsIHNzKS5yZXBsYWNlKCdzJywgc2Vjb25kLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAucmVwbGFjZSgnUycsIG1pbGlzZWNvbmRzLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAucmVwbGFjZSgnZGQnLCBkZCkucmVwbGFjZSgnZCcsIGRheS50b1N0cmluZygpKVxuICAgICAgICAgICAgLnJlcGxhY2UoJ0VFRUUnLCBFRUVFKS5yZXBsYWNlKCdFRUUnLCBFRUUpXG4gICAgICAgICAgICAucmVwbGFjZSgneXl5eScsIHl5eXkpXG4gICAgICAgICAgICAucmVwbGFjZSgneXknLCB5eSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCdhYWEnLCBhYWEpO1xuICAgICAgICBpZiAocGF0dGVyblN0ci5pbmRleE9mKCdNTU0nKSA+IC0xKSB7XG4gICAgICAgICAgICBwYXR0ZXJuU3RyID0gcGF0dGVyblN0clxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKCdNTU1NJywgTU1NTSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgnTU1NJywgTU1NKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhdHRlcm5TdHIgPSBwYXR0ZXJuU3RyXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoJ01NJywgTU0pXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoJ00nLCBNLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXR0ZXJuU3RyO1xuICAgIH1cbiAgICBleHBvcnRzLmZvcm1hdERhdGUgPSBmb3JtYXREYXRlO1xuICAgIGZ1bmN0aW9uIHR3b0RpZ2l0UGFkKG51bSkge1xuICAgICAgICByZXR1cm4gbnVtIDwgMTAgPyBcIjBcIiArIG51bSA6IG51bS50b1N0cmluZygpO1xuICAgIH1cbiAgICBleHBvcnRzLnR3b0RpZ2l0UGFkID0gdHdvRGlnaXRQYWQ7XG59KTsiLCIvKipcbiAqIFV0aWwgZnVuY3Rpb24gdG8gcHJvdmlkZSBzdHJpbmcgZm9ybWF0IGZ1bmN0aW9uYWxpdHkgc2ltaWxhciB0byBDIydzIHN0cmluZy5mb3JtYXRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gYXJncyByZXBsYWNlbWVudHMgbWFkZSBieSBvcmRlciBvZiBhcHBlYXJhbmNlIChyZXBsYWNlbWVudDAgd2lsIHJlcGxhY2UgezB9IGFuZCBzbyBvbilcbiAqIEByZXR1cm4ge3N0cmluZ30gZm9ybWF0dGVkIHN0cmluZ1xuICpcbiAqIEBmdW5jdGlvbiBzdHJpbmdGb3JtYXRcbiAqXG4gKiBAbWVtYmVyT2YgbG9nZ2luZy5sb2dnaW5nXG4gKi9cbmltcG9ydCB7REFZU19PRl9XRUVLX05BTUVTLCBNT05USF9OQU1FU30gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdGb3JtYXQoc3RyaW5nOiBzdHJpbmcsIC4uLmFyZ3M6IHN0cmluZ1tdKXtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL3soXFxkKyl9L2csIGZ1bmN0aW9uKG1hdGNoLCBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBhcmdzW251bWJlcl0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICA/IGFyZ3NbbnVtYmVyXVxuICAgICAgICAgICAgOiBtYXRjaDtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBEYXRlIEZvcm1hdCBIYW5kbGluZ1xuICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzU1MjQ2MS9ob3ctdG8tZm9ybWF0LWEtamF2YXNjcmlwdC1kYXRlXG4gKlxuICogPHByZT5cbiAqICAgICAgVXNpbmcgc2ltaWxhciBmb3JtYXR0aW5nIGFzIE1vbWVudC5qcywgQ2xhc3MgRGF0ZVRpbWVGb3JtYXR0ZXIgKEphdmEpLCBhbmQgQ2xhc3MgU2ltcGxlRGF0ZUZvcm1hdCAoSmF2YSksXG4gKiAgICAgIEkgaW1wbGVtZW50ZWQgYSBjb21wcmVoZW5zaXZlIHNvbHV0aW9uIGZvcm1hdERhdGUoZGF0ZSwgcGF0dGVyblN0cikgd2hlcmUgdGhlIGNvZGUgaXMgZWFzeSB0byByZWFkIGFuZCBtb2RpZnkuXG4gKiAgICAgIFlvdSBjYW4gZGlzcGxheSBkYXRlLCB0aW1lLCBBTS9QTSwgZXRjLlxuICpcbiAqICAgICAgRGF0ZSBhbmQgVGltZSBQYXR0ZXJuc1xuICogICAgICB5eSA9IDItZGlnaXQgeWVhcjsgeXl5eSA9IGZ1bGwgeWVhclxuICogICAgICBNID0gZGlnaXQgbW9udGg7IE1NID0gMi1kaWdpdCBtb250aDsgTU1NID0gc2hvcnQgbW9udGggbmFtZTsgTU1NTSA9IGZ1bGwgbW9udGggbmFtZVxuICogICAgICBFRUVFID0gZnVsbCB3ZWVrZGF5IG5hbWU7IEVFRSA9IHNob3J0IHdlZWtkYXkgbmFtZVxuICogICAgICBkID0gZGlnaXQgZGF5OyBkZCA9IDItZGlnaXQgZGF5XG4gKiAgICAgIGggPSBob3VycyBhbS9wbTsgaGggPSAyLWRpZ2l0IGhvdXJzIGFtL3BtOyBIID0gaG91cnM7IEhIID0gMi1kaWdpdCBob3Vyc1xuICogICAgICBtID0gbWludXRlczsgbW0gPSAyLWRpZ2l0IG1pbnV0ZXM7IGFhYSA9IEFNL1BNXG4gKiAgICAgIHMgPSBzZWNvbmRzOyBzcyA9IDItZGlnaXQgc2Vjb25kc1xuICogICAgICBTID0gbWlsaXNlY29uZHNcbiAqIDwvcHJlPlxuICpcbiAqIEBwYXJhbSB7RGF0ZX0gZGF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IFtwYXR0ZXJuU3RyXSBkZWZhdWx0cyB0byAneXl5eS9NTS9kZCdcbiAqIEByZXR1cm4ge3N0cmluZ30gdGhlIGZvcm1hdHRlZCBkYXRlXG4gKlxuICogQGZ1bmN0aW9uIGZvcm1hdERhdGVcbiAqXG4gKiBAbWVtYmVyT2YgbG9nZ2luZy5sb2dnaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGU6IERhdGUsIHBhdHRlcm5TdHI6IHN0cmluZyA9ICd5eXl5L01NL2RkJyl7XG4gICAgY29uc3QgZGF5OiBudW1iZXIgPSBkYXRlLmdldERhdGUoKSxcbiAgICAgICAgbW9udGg6IG51bWJlciA9IGRhdGUuZ2V0TW9udGgoKSxcbiAgICAgICAgeWVhcjogbnVtYmVyID0gZGF0ZS5nZXRGdWxsWWVhcigpLFxuICAgICAgICBob3VyOiBudW1iZXIgPSBkYXRlLmdldEhvdXJzKCksXG4gICAgICAgIG1pbnV0ZTogbnVtYmVyID0gZGF0ZS5nZXRNaW51dGVzKCksXG4gICAgICAgIHNlY29uZDogbnVtYmVyID0gZGF0ZS5nZXRTZWNvbmRzKCksXG4gICAgICAgIG1pbGlzZWNvbmRzOiBudW1iZXIgPSBkYXRlLmdldE1pbGxpc2Vjb25kcygpLFxuICAgICAgICBoOiBudW1iZXIgPSBob3VyICUgMTIsXG4gICAgICAgIGhoOiBzdHJpbmcgPSB0d29EaWdpdFBhZChoKSxcbiAgICAgICAgSEg6IHN0cmluZyA9IHR3b0RpZ2l0UGFkKGhvdXIpLFxuICAgICAgICBtbTogc3RyaW5nID0gdHdvRGlnaXRQYWQobWludXRlKSxcbiAgICAgICAgc3M6IHN0cmluZyA9IHR3b0RpZ2l0UGFkKHNlY29uZCksXG4gICAgICAgIGFhYTogc3RyaW5nID0gaG91ciA8IDEyID8gJ0FNJyA6ICdQTScsXG4gICAgICAgIEVFRUU6IHN0cmluZyA9IERBWVNfT0ZfV0VFS19OQU1FU1tkYXRlLmdldERheSgpXSxcbiAgICAgICAgRUVFOiBzdHJpbmcgPSBFRUVFLnN1YnN0cigwLCAzKSxcbiAgICAgICAgZGQ6IHN0cmluZyA9IHR3b0RpZ2l0UGFkKGRheSksXG4gICAgICAgIE06IG51bWJlciA9IG1vbnRoICsgMSxcbiAgICAgICAgTU06IHN0cmluZyA9IHR3b0RpZ2l0UGFkKE0pLFxuICAgICAgICBNTU1NOiBzdHJpbmcgPSBNT05USF9OQU1FU1ttb250aF0sXG4gICAgICAgIE1NTSA6IHN0cmluZz0gTU1NTS5zdWJzdHIoMCwgMyksXG4gICAgICAgIHl5eXk6IHN0cmluZyA9IHllYXIgKyBcIlwiLFxuICAgICAgICB5eTogc3RyaW5nID0geXl5eS5zdWJzdHIoMiwgMilcbiAgICA7XG4gICAgLy8gY2hlY2tzIHRvIHNlZSBpZiBtb250aCBuYW1lIHdpbGwgYmUgdXNlZFxuICAgIHBhdHRlcm5TdHIgPSBwYXR0ZXJuU3RyXG4gICAgICAgIC5yZXBsYWNlKCdoaCcsIGhoKS5yZXBsYWNlKCdoJywgaC50b1N0cmluZygpKVxuICAgICAgICAucmVwbGFjZSgnSEgnLCBISCkucmVwbGFjZSgnSCcsIGhvdXIudG9TdHJpbmcoKSlcbiAgICAgICAgLnJlcGxhY2UoJ21tJywgbW0pLnJlcGxhY2UoJ20nLCBtaW51dGUudG9TdHJpbmcoKSlcbiAgICAgICAgLnJlcGxhY2UoJ3NzJywgc3MpLnJlcGxhY2UoJ3MnLCBzZWNvbmQudG9TdHJpbmcoKSlcbiAgICAgICAgLnJlcGxhY2UoJ1MnLCBtaWxpc2Vjb25kcy50b1N0cmluZygpKVxuICAgICAgICAucmVwbGFjZSgnZGQnLCBkZCkucmVwbGFjZSgnZCcsIGRheS50b1N0cmluZygpKVxuXG4gICAgICAgIC5yZXBsYWNlKCdFRUVFJywgRUVFRSkucmVwbGFjZSgnRUVFJywgRUVFKVxuICAgICAgICAucmVwbGFjZSgneXl5eScsIHl5eXkpXG4gICAgICAgIC5yZXBsYWNlKCd5eScsIHl5KVxuICAgICAgICAucmVwbGFjZSgnYWFhJywgYWFhKTtcbiAgICBpZiAocGF0dGVyblN0ci5pbmRleE9mKCdNTU0nKSA+IC0xKSB7XG4gICAgICAgIHBhdHRlcm5TdHIgPSBwYXR0ZXJuU3RyXG4gICAgICAgICAgICAucmVwbGFjZSgnTU1NTScsIE1NTU0pXG4gICAgICAgICAgICAucmVwbGFjZSgnTU1NJywgTU1NKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHBhdHRlcm5TdHIgPSBwYXR0ZXJuU3RyXG4gICAgICAgICAgICAucmVwbGFjZSgnTU0nLCBNTSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCdNJywgTS50b1N0cmluZygpKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdHRlcm5TdHI7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBudW1cbiAqXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKlxuICogQGZ1bmN0aW9uIHR3b0RpZ2l0UGFkXG4gKlxuICogQG1lbWJlck9mIGxvZ2dpbmcubG9nZ2luZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gdHdvRGlnaXRQYWQobnVtOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBudW0gPCAxMCA/IFwiMFwiICsgbnVtIDogbnVtLnRvU3RyaW5nKCk7XG59Il19
